/*! For license information please see ideogram.min.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,(()=>(()=>{"use strict";var t={913:()=>{try{self["workbox:core:7.0.0"]&&_()}catch(t){}},762:()=>{try{self["workbox:range-requests:7.0.0"]&&_()}catch(t){}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{n.r(o),n.d(o,{default:()=>jm});var t={};n.r(t),n.d(t,{blob:()=>xt,buffer:()=>At,csv:()=>Gt,dsv:()=>Ht,html:()=>Yt,image:()=>jt,json:()=>zt,svg:()=>Xt,text:()=>Ot,tsv:()=>Wt,xml:()=>Vt});var e={};n.r(e),n.d(e,{brush:()=>qr,brushSelection:()=>Gr,brushX:()=>Wr,brushY:()=>jr});var r={};n.r(r),n.d(r,{dispatch:()=>ee});var i={};n.r(i),n.d(i,{FormatSpecifier:()=>Qr,format:()=>ni,formatDefaultLocale:()=>si,formatLocale:()=>ai,formatPrefix:()=>oi,formatSpecifier:()=>Kr,precisionFixed:()=>ci,precisionPrefix:()=>li,precisionRound:()=>ui});const a="1.45.0";function s(){}function c(t){return null==t?s:function(){return this.querySelector(t)}}function l(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function u(){return[]}function d(t){return null==t?u:function(){return this.querySelectorAll(t)}}function f(t){return function(){return this.matches(t)}}function h(t){return function(e){return e.matches(t)}}var p=Array.prototype.find;function m(){return this.firstElementChild}var g=Array.prototype.filter;function y(){return this.children}function v(t){return new Array(t.length)}function b(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function w(t,e,n,o,r,i){for(var a,s=0,c=e.length,l=i.length;s<l;++s)(a=e[s])?(a.__data__=i[s],o[s]=a):n[s]=new b(t,i[s]);for(;s<c;++s)(a=e[s])&&(r[s]=a)}function x(t,e,n,o,r,i,a){var s,c,l,u=new Map,d=e.length,f=i.length,h=new Array(d);for(s=0;s<d;++s)(c=e[s])&&(h[s]=l=a.call(c,c.__data__,s,e)+"",u.has(l)?r[s]=c:u.set(l,c));for(s=0;s<f;++s)l=a.call(t,i[s],s,i)+"",(c=u.get(l))?(o[s]=c,c.__data__=i[s],u.delete(l)):n[s]=new b(t,i[s]);for(s=0;s<d;++s)(c=e[s])&&u.get(h[s])===c&&(r[s]=c)}function _(t){return t.__data__}function A(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}b.prototype={constructor:b,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var C="http://www.w3.org/1999/xhtml";const S={svg:"http://www.w3.org/2000/svg",xhtml:C,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function L(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),S.hasOwnProperty(e)?{space:S[e],local:t}:t}function T(t){return function(){this.removeAttribute(t)}}function k(t){return function(){this.removeAttributeNS(t.space,t.local)}}function M(t,e){return function(){this.setAttribute(t,e)}}function E(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function P(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function D(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function N(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function F(t){return function(){this.style.removeProperty(t)}}function B(t,e,n){return function(){this.style.setProperty(t,e,n)}}function I(t,e,n){return function(){var o=e.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function $(t,e){return t.style.getPropertyValue(e)||N(t).getComputedStyle(t,null).getPropertyValue(e)}function O(t){return function(){delete this[t]}}function R(t,e){return function(){this[t]=e}}function H(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function G(t){return t.trim().split(/^|\s+/)}function W(t){return t.classList||new j(t)}function j(t){this._node=t,this._names=G(t.getAttribute("class")||"")}function q(t,e){for(var n=W(t),o=-1,r=e.length;++o<r;)n.add(e[o])}function z(t,e){for(var n=W(t),o=-1,r=e.length;++o<r;)n.remove(e[o])}function U(t){return function(){q(this,t)}}function V(t){return function(){z(this,t)}}function Y(t,e){return function(){(e.apply(this,arguments)?q:z)(this,t)}}function X(){this.textContent=""}function K(t){return function(){this.textContent=t}}function Q(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function J(){this.innerHTML=""}function Z(t){return function(){this.innerHTML=t}}function tt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function et(){this.nextSibling&&this.parentNode.appendChild(this)}function nt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ot(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===C&&e.documentElement.namespaceURI===C?e.createElement(t):e.createElementNS(n,t)}}function rt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function it(t){var e=L(t);return(e.local?rt:ot)(e)}function at(){return null}function st(){var t=this.parentNode;t&&t.removeChild(this)}function ct(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ut(t){return function(){var e=this.__on;if(e){for(var n,o=0,r=-1,i=e.length;o<i;++o)n=e[o],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function dt(t,e,n){return function(){var o,r=this.__on,i=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=e);this.addEventListener(t.type,i,n),o={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(o):this.__on=[o]}}function ft(t,e,n){var o=N(t),r=o.CustomEvent;"function"==typeof r?r=new r(e,n):(r=o.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ht(t,e){return function(){return ft(this,t,e)}}function pt(t,e){return function(){return ft(this,t,e.apply(this,arguments))}}j.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var mt=[null];function gt(t,e){this._groups=t,this._parents=e}function yt(){return new gt([[document.documentElement]],mt)}gt.prototype=yt.prototype={constructor:gt,select:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i,a,s=e[r],l=s.length,u=o[r]=new Array(l),d=0;d<l;++d)(i=s[d])&&(a=t.call(i,i.__data__,d,s))&&("__data__"in i&&(a.__data__=i.__data__),u[d]=a);return new gt(o,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:l(e)}}(t):d(t);for(var e=this._groups,n=e.length,o=[],r=[],i=0;i<n;++i)for(var a,s=e[i],c=s.length,u=0;u<c;++u)(a=s[u])&&(o.push(t.call(a,a.__data__,u,s)),r.push(a));return new gt(o,r)},selectChild:function(t){return this.select(null==t?m:function(t){return function(){return p.call(this.children,t)}}("function"==typeof t?t:h(t)))},selectChildren:function(t){return this.selectAll(null==t?y:function(t){return function(){return g.call(this.children,t)}}("function"==typeof t?t:h(t)))},filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i,a=e[r],s=a.length,c=o[r]=[],l=0;l<s;++l)(i=a[l])&&t.call(i,i.__data__,l,a)&&c.push(i);return new gt(o,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,_);var n=e?x:w,o=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var i=r.length,a=new Array(i),s=new Array(i),c=new Array(i),u=0;u<i;++u){var d=o[u],f=r[u],h=f.length,p=l(t.call(d,d&&d.__data__,u,o)),m=p.length,g=s[u]=new Array(m),y=a[u]=new Array(m);n(d,f,g,y,c[u]=new Array(h),p,e);for(var v,b,A=0,C=0;A<m;++A)if(v=g[A]){for(A>=C&&(C=A+1);!(b=y[C])&&++C<m;);v._next=b||null}}return(a=new gt(a,o))._enter=s,a._exit=c,a},enter:function(){return new gt(this._enter||this._groups.map(v),this._parents)},exit:function(){return new gt(this._exit||this._groups.map(v),this._parents)},join:function(t,e,n){var o=this.enter(),r=this,i=this.exit();return o="function"==typeof t?t(o):o.append(t+""),null!=e&&(r=e(r)),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(t){if(!(t instanceof gt))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,o=e.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var c,l=e[s],u=n[s],d=l.length,f=a[s]=new Array(d),h=0;h<d;++h)(c=l[h]||u[h])&&(f[h]=c);for(;s<o;++s)a[s]=e[s];return new gt(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o,r=t[e],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=A);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,s=n[i],c=s.length,l=r[i]=new Array(c),u=0;u<c;++u)(a=s[u])&&(l[u]=a);l.sort(e)}return new gt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,o=e.length;n<o;++n)for(var r,i=e[n],a=0,s=i.length;a<s;++a)(r=i[a])&&t.call(r,r.__data__,a,i);return this},attr:function(t,e){var n=L(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==e?n.local?k:T:"function"==typeof e?n.local?D:P:n.local?E:M)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?F:"function"==typeof e?I:B)(t,e,null==n?"":n)):$(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?O:"function"==typeof e?H:R)(t,e)):this.node()[t]},classed:function(t,e){var n=G(t+"");if(arguments.length<2){for(var o=W(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Y:e?U:V)(n,e))},text:function(t){return arguments.length?this.each(null==t?X:("function"==typeof t?Q:K)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?J:("function"==typeof t?tt:Z)(t)):this.node().innerHTML},raise:function(){return this.each(et)},lower:function(){return this.each(nt)},append:function(t){var e="function"==typeof t?t:it(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:it(t),o=null==e?at:"function"==typeof e?e:c(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(st)},clone:function(t){return this.select(t?lt:ct)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var o,r,i=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=i.length;if(!(arguments.length<2)){for(s=e?dt:ut,o=0;o<a;++o)this.each(s(i[o],e,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(o=0,c=s[l];o<a;++o)if((r=i[o]).type===c.type&&r.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?pt:ht)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o,r=t[e],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};const vt=yt;function bt(t){return"string"==typeof t?new gt([[document.querySelector(t)]],[document.documentElement]):new gt([[t]],mt)}function wt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function xt(t,e){return fetch(t,e).then(wt)}function _t(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function At(t,e){return fetch(t,e).then(_t)}var Ct={},St={},Lt=34,Tt=10,kt=13;function Mt(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Et(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var o in t)o in e||n.push(e[o]=o)})),n}function Pt(t,e){var n=t+"",o=n.length;return o<e?new Array(e-o+1).join(0)+n:n}function Dt(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function o(t,e){var o,r=[],i=t.length,a=0,s=0,c=i<=0,l=!1;function u(){if(c)return St;if(l)return l=!1,Ct;var e,o,r=a;if(t.charCodeAt(r)===Lt){for(;a++<i&&t.charCodeAt(a)!==Lt||t.charCodeAt(++a)===Lt;);return(e=a)>=i?c=!0:(o=t.charCodeAt(a++))===Tt?l=!0:o===kt&&(l=!0,t.charCodeAt(a)===Tt&&++a),t.slice(r+1,e-1).replace(/""/g,'"')}for(;a<i;){if((o=t.charCodeAt(e=a++))===Tt)l=!0;else if(o===kt)l=!0,t.charCodeAt(a)===Tt&&++a;else if(o!==n)continue;return t.slice(r,e)}return c=!0,t.slice(r,i)}for(t.charCodeAt(i-1)===Tt&&--i,t.charCodeAt(i-1)===kt&&--i;(o=u())!==St;){for(var d=[];o!==Ct&&o!==St;)d.push(o),o=u();e&&null==(d=e(d,s++))||r.push(d)}return r}function r(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function i(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?function(t){var e,n=t.getUTCHours(),o=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Pt(-e,6):e>9999?"+"+Pt(e,6):Pt(e,4))+"-"+Pt(t.getUTCMonth()+1,2)+"-"+Pt(t.getUTCDate(),2)+(i?"T"+Pt(n,2)+":"+Pt(o,2)+":"+Pt(r,2)+"."+Pt(i,3)+"Z":r?"T"+Pt(n,2)+":"+Pt(o,2)+":"+Pt(r,2)+"Z":o||n?"T"+Pt(n,2)+":"+Pt(o,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,i=o(t,(function(t,o){if(n)return n(t,o-1);r=t,n=e?function(t,e){var n=Mt(t);return function(o,r){return e(n(o),r,t)}}(t,e):Mt(t)}));return i.columns=r||[],i},parseRows:o,format:function(e,n){return null==n&&(n=Et(e)),[n.map(a).join(t)].concat(r(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Et(t)),r(t,e).join("\n")},formatRows:function(t){return t.map(i).join("\n")},formatRow:i,formatValue:a}}var Nt=Dt(","),Ft=Nt.parse,Bt=(Nt.parseRows,Nt.format,Nt.formatBody,Nt.formatRows,Nt.formatRow,Nt.formatValue,Dt("\t")),It=Bt.parse;function $t(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ot(t,e){return fetch(t,e).then($t)}function Rt(t){return function(e,n,o){return 2===arguments.length&&"function"==typeof n&&(o=n,n=void 0),Ot(e,n).then((function(e){return t(e,o)}))}}function Ht(t,e,n,o){3===arguments.length&&"function"==typeof n&&(o=n,n=void 0);var r=Dt(t);return Ot(e,n).then((function(t){return r.parse(t,o)}))}Bt.parseRows,Bt.format,Bt.formatBody,Bt.formatRows,Bt.formatRow,Bt.formatValue;var Gt=Rt(Ft),Wt=Rt(It);function jt(t,e){return new Promise((function(n,o){var r=new Image;for(var i in e)r[i]=e[i];r.onerror=o,r.onload=function(){n(r)},r.src=t}))}function qt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function zt(t,e){return fetch(t,e).then(qt)}function Ut(t){return(e,n)=>Ot(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}const Vt=Ut("application/xml");var Yt=Ut("text/html"),Xt=Ut("image/svg+xml"),Kt={value:()=>{}};function Qt(){for(var t,e=0,n=arguments.length,o={};e<n;++e){if(!(t=arguments[e]+"")||t in o||/[\s.]/.test(t))throw new Error("illegal type: "+t);o[t]=[]}return new Jt(o)}function Jt(t){this._=t}function Zt(t,e){for(var n,o=0,r=t.length;o<r;++o)if((n=t[o]).name===e)return n.value}function te(t,e,n){for(var o=0,r=t.length;o<r;++o)if(t[o].name===e){t[o]=Kt,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:e,value:n}),t}Jt.prototype=Qt.prototype={constructor:Jt,on:function(t,e){var n,o,r=this._,i=(o=r,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!o.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=i[a]).type)r[n]=te(r[n],t.name,e);else if(null==e)for(n in r)r[n]=te(r[n],t.name,null);return this}for(;++a<s;)if((n=(t=i[a]).type)&&(n=Zt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Jt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(o=this._[t]).length;i<n;++i)o[i].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)}};const ee=Qt;function ne(t){t.preventDefault(),t.stopImmediatePropagation()}function oe(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function re(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function ie(){}var ae=.7,se=1/ae,ce="\\s*([+-]?\\d+)\\s*",le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",de=/^#([0-9a-f]{3,8})$/,fe=new RegExp(`^rgb\\(${ce},${ce},${ce}\\)$`),he=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),pe=new RegExp(`^rgba\\(${ce},${ce},${ce},${le}\\)$`),me=new RegExp(`^rgba\\(${ue},${ue},${ue},${le}\\)$`),ge=new RegExp(`^hsl\\(${le},${ue},${ue}\\)$`),ye=new RegExp(`^hsla\\(${le},${ue},${ue},${le}\\)$`),ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function be(){return this.rgb().formatHex()}function we(){return this.rgb().formatRgb()}function xe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=de.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?_e(e):3===n?new Se(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ae(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ae(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=fe.exec(t))?new Se(e[1],e[2],e[3],1):(e=he.exec(t))?new Se(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=pe.exec(t))?Ae(e[1],e[2],e[3],e[4]):(e=me.exec(t))?Ae(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ge.exec(t))?Pe(e[1],e[2]/100,e[3]/100,1):(e=ye.exec(t))?Pe(e[1],e[2]/100,e[3]/100,e[4]):ve.hasOwnProperty(t)?_e(ve[t]):"transparent"===t?new Se(NaN,NaN,NaN,0):null}function _e(t){return new Se(t>>16&255,t>>8&255,255&t,1)}function Ae(t,e,n,o){return o<=0&&(t=e=n=NaN),new Se(t,e,n,o)}function Ce(t,e,n,o){return 1===arguments.length?((r=t)instanceof ie||(r=xe(r)),r?new Se((r=r.rgb()).r,r.g,r.b,r.opacity):new Se):new Se(t,e,n,null==o?1:o);var r}function Se(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function Le(){return`#${Ee(this.r)}${Ee(this.g)}${Ee(this.b)}`}function Te(){const t=ke(this.opacity);return`${1===t?"rgb(":"rgba("}${Me(this.r)}, ${Me(this.g)}, ${Me(this.b)}${1===t?")":`, ${t})`}`}function ke(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Me(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ee(t){return((t=Me(t))<16?"0":"")+t.toString(16)}function Pe(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ne(t,e,n,o)}function De(t){if(t instanceof Ne)return new Ne(t.h,t.s,t.l,t.opacity);if(t instanceof ie||(t=xe(t)),!t)return new Ne;if(t instanceof Ne)return t;var e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,r=Math.min(e,n,o),i=Math.max(e,n,o),a=NaN,s=i-r,c=(i+r)/2;return s?(a=e===i?(n-o)/s+6*(n<o):n===i?(o-e)/s+2:(e-n)/s+4,s/=c<.5?i+r:2-i-r,a*=60):s=c>0&&c<1?0:a,new Ne(a,s,c,t.opacity)}function Ne(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function Fe(t){return(t=(t||0)%360)<0?t+360:t}function Be(t){return Math.max(0,Math.min(1,t||0))}function Ie(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function $e(t,e,n,o,r){var i=t*t,a=i*t;return((1-3*t+3*i-a)*e+(4-6*i+3*a)*n+(1+3*t+3*i-3*a)*o+a*r)/6}oe(ie,xe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:be,formatHex:be,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return De(this).formatHsl()},formatRgb:we,toString:we}),oe(Se,Ce,re(ie,{brighter(t){return t=null==t?se:Math.pow(se,t),new Se(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ae:Math.pow(ae,t),new Se(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Se(Me(this.r),Me(this.g),Me(this.b),ke(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Le,formatHex:Le,formatHex8:function(){return`#${Ee(this.r)}${Ee(this.g)}${Ee(this.b)}${Ee(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Te,toString:Te})),oe(Ne,(function(t,e,n,o){return 1===arguments.length?De(t):new Ne(t,e,n,null==o?1:o)}),re(ie,{brighter(t){return t=null==t?se:Math.pow(se,t),new Ne(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ae:Math.pow(ae,t),new Ne(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new Se(Ie(t>=240?t-240:t+120,r,o),Ie(t,r,o),Ie(t<120?t+240:t-120,r,o),this.opacity)},clamp(){return new Ne(Fe(this.h),Be(this.s),Be(this.l),ke(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ke(this.opacity);return`${1===t?"hsl(":"hsla("}${Fe(this.h)}, ${100*Be(this.s)}%, ${100*Be(this.l)}%${1===t?")":`, ${t})`}`}}));const Oe=t=>()=>t;function Re(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Oe(isNaN(t)?e:t)}const He=function t(e){var n=function(t){return 1==(t=+t)?Re:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):Oe(isNaN(e)?n:e)}}(e);function o(t,e){var o=n((t=Ce(t)).r,(e=Ce(e)).r),r=n(t.g,e.g),i=n(t.b,e.b),a=Re(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=r(e),t.b=i(e),t.opacity=a(e),t+""}}return o.gamma=t,o}(1);function Ge(t){return function(e){var n,o,r=e.length,i=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)o=Ce(e[n]),i[n]=o.r||0,a[n]=o.g||0,s[n]=o.b||0;return i=t(i),a=t(a),s=t(s),o.opacity=1,function(t){return o.r=i(t),o.g=a(t),o.b=s(t),o+""}}}function We(t,e){var n,o=e?e.length:0,r=t?Math.min(o,t.length):0,i=new Array(r),a=new Array(o);for(n=0;n<r;++n)i[n]=Ke(t[n],e[n]);for(;n<o;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=i[n](t);return a}}function je(t,e){var n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function qe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ze(t,e){var n,o={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=Ke(t[n],e[n]):r[n]=e[n];return function(t){for(n in o)r[n]=o[n](t);return r}}Ge((function(t){var e=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[o],i=t[o+1],a=o>0?t[o-1]:2*r-i,s=o<e-1?t[o+2]:2*i-r;return $e((n-o/e)*e,a,r,i,s)}})),Ge((function(t){var e=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*e),r=t[(o+e-1)%e],i=t[o%e],a=t[(o+1)%e],s=t[(o+2)%e];return $e((n-o/e)*e,r,i,a,s)}}));var Ue=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ve=new RegExp(Ue.source,"g");function Ye(t,e){var n,o,r,i=Ue.lastIndex=Ve.lastIndex=0,a=-1,s=[],c=[];for(t+="",e+="";(n=Ue.exec(t))&&(o=Ve.exec(e));)(r=o.index)>i&&(r=e.slice(i,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,c.push({i:a,x:qe(n,o)})),i=Ve.lastIndex;return i<e.length&&(r=e.slice(i),s[a]?s[a]+=r:s[++a]=r),s.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,o=0;o<e;++o)s[(n=c[o]).i]=n.x(t);return s.join("")})}function Xe(t,e){e||(e=[]);var n,o=t?Math.min(e.length,t.length):0,r=e.slice();return function(i){for(n=0;n<o;++n)r[n]=t[n]*(1-i)+e[n]*i;return r}}function Ke(t,e){var n,o=typeof e;return null==e||"boolean"===o?Oe(e):("number"===o?qe:"string"===o?(n=xe(e))?(e=n,He):Ye:e instanceof xe?He:e instanceof Date?je:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Xe:Array.isArray(e)?We:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ze:qe)(t,e)}function Qe(){}function Je(t){return null==t?Qe:function(){return this.querySelector(t)}}function Ze(){return[]}function tn(t){return function(e){return e.matches(t)}}var en=Array.prototype.find;function nn(){return this.firstElementChild}var on=Array.prototype.filter;function rn(){return Array.from(this.children)}function an(t){return new Array(t.length)}function sn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function cn(t,e,n,o,r,i){for(var a,s=0,c=e.length,l=i.length;s<l;++s)(a=e[s])?(a.__data__=i[s],o[s]=a):n[s]=new sn(t,i[s]);for(;s<c;++s)(a=e[s])&&(r[s]=a)}function ln(t,e,n,o,r,i,a){var s,c,l,u=new Map,d=e.length,f=i.length,h=new Array(d);for(s=0;s<d;++s)(c=e[s])&&(h[s]=l=a.call(c,c.__data__,s,e)+"",u.has(l)?r[s]=c:u.set(l,c));for(s=0;s<f;++s)l=a.call(t,i[s],s,i)+"",(c=u.get(l))?(o[s]=c,c.__data__=i[s],u.delete(l)):n[s]=new sn(t,i[s]);for(s=0;s<d;++s)(c=e[s])&&u.get(h[s])===c&&(r[s]=c)}function un(t){return t.__data__}function dn(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function fn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}sn.prototype={constructor:sn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var hn="http://www.w3.org/1999/xhtml";const pn={svg:"http://www.w3.org/2000/svg",xhtml:hn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mn(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),pn.hasOwnProperty(e)?{space:pn[e],local:t}:t}function gn(t){return function(){this.removeAttribute(t)}}function yn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vn(t,e){return function(){this.setAttribute(t,e)}}function bn(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function wn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function xn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _n(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function An(t){return function(){this.style.removeProperty(t)}}function Cn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Sn(t,e,n){return function(){var o=e.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function Ln(t){return function(){delete this[t]}}function Tn(t,e){return function(){this[t]=e}}function kn(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Mn(t){return t.trim().split(/^|\s+/)}function En(t){return t.classList||new Pn(t)}function Pn(t){this._node=t,this._names=Mn(t.getAttribute("class")||"")}function Dn(t,e){for(var n=En(t),o=-1,r=e.length;++o<r;)n.add(e[o])}function Nn(t,e){for(var n=En(t),o=-1,r=e.length;++o<r;)n.remove(e[o])}function Fn(t){return function(){Dn(this,t)}}function Bn(t){return function(){Nn(this,t)}}function In(t,e){return function(){(e.apply(this,arguments)?Dn:Nn)(this,t)}}function $n(){this.textContent=""}function On(t){return function(){this.textContent=t}}function Rn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Hn(){this.innerHTML=""}function Gn(t){return function(){this.innerHTML=t}}function Wn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function jn(){this.nextSibling&&this.parentNode.appendChild(this)}function qn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hn&&e.documentElement.namespaceURI===hn?e.createElement(t):e.createElementNS(n,t)}}function Un(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vn(t){var e=mn(t);return(e.local?Un:zn)(e)}function Yn(){return null}function Xn(){var t=this.parentNode;t&&t.removeChild(this)}function Kn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Qn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Jn(t){return function(){var e=this.__on;if(e){for(var n,o=0,r=-1,i=e.length;o<i;++o)n=e[o],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function Zn(t,e,n){return function(){var o,r=this.__on,i=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=e);this.addEventListener(t.type,i,n),o={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(o):this.__on=[o]}}function to(t,e,n){var o=_n(t),r=o.CustomEvent;"function"==typeof r?r=new r(e,n):(r=o.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function eo(t,e){return function(){return to(this,t,e)}}function no(t,e){return function(){return to(this,t,e.apply(this,arguments))}}Pn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var oo=[null];function ro(t,e){this._groups=t,this._parents=e}function io(t){return"string"==typeof t?new ro([[document.querySelector(t)]],[document.documentElement]):new ro([[t]],oo)}function ao(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,[(o=o.matrixTransform(e.getScreenCTM().inverse())).x,o.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}ro.prototype=function(){return new ro([[document.documentElement]],oo)}.prototype={constructor:ro,select:function(t){"function"!=typeof t&&(t=Je(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i,a,s=e[r],c=s.length,l=o[r]=new Array(c),u=0;u<c;++u)(i=s[u])&&(a=t.call(i,i.__data__,u,s))&&("__data__"in i&&(a.__data__=i.__data__),l[u]=a);return new ro(o,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):function(t){return null==t?Ze:function(){return this.querySelectorAll(t)}}(t);for(var e=this._groups,n=e.length,o=[],r=[],i=0;i<n;++i)for(var a,s=e[i],c=s.length,l=0;l<c;++l)(a=s[l])&&(o.push(t.call(a,a.__data__,l,s)),r.push(a));return new ro(o,r)},selectChild:function(t){return this.select(null==t?nn:function(t){return function(){return en.call(this.children,t)}}("function"==typeof t?t:tn(t)))},selectChildren:function(t){return this.selectAll(null==t?rn:function(t){return function(){return on.call(this.children,t)}}("function"==typeof t?t:tn(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i,a=e[r],s=a.length,c=o[r]=[],l=0;l<s;++l)(i=a[l])&&t.call(i,i.__data__,l,a)&&c.push(i);return new ro(o,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,un);var n=e?ln:cn,o=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var i=r.length,a=new Array(i),s=new Array(i),c=new Array(i),l=0;l<i;++l){var u=o[l],d=r[l],f=d.length,h=dn(t.call(u,u&&u.__data__,l,o)),p=h.length,m=s[l]=new Array(p),g=a[l]=new Array(p);n(u,d,m,g,c[l]=new Array(f),h,e);for(var y,v,b=0,w=0;b<p;++b)if(y=m[b]){for(b>=w&&(w=b+1);!(v=g[w])&&++w<p;);y._next=v||null}}return(a=new ro(a,o))._enter=s,a._exit=c,a},enter:function(){return new ro(this._enter||this._groups.map(an),this._parents)},exit:function(){return new ro(this._exit||this._groups.map(an),this._parents)},join:function(t,e,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,o=e._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),c=0;c<a;++c)for(var l,u=n[c],d=o[c],f=u.length,h=s[c]=new Array(f),p=0;p<f;++p)(l=u[p]||d[p])&&(h[p]=l);for(;c<r;++c)s[c]=n[c];return new ro(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o,r=t[e],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=fn);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,s=n[i],c=s.length,l=r[i]=new Array(c),u=0;u<c;++u)(a=s[u])&&(l[u]=a);l.sort(e)}return new ro(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,o=e.length;n<o;++n)for(var r,i=e[n],a=0,s=i.length;a<s;++a)(r=i[a])&&t.call(r,r.__data__,a,i);return this},attr:function(t,e){var n=mn(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==e?n.local?yn:gn:"function"==typeof e?n.local?xn:wn:n.local?bn:vn)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?An:"function"==typeof e?Sn:Cn)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||_n(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ln:"function"==typeof e?kn:Tn)(t,e)):this.node()[t]},classed:function(t,e){var n=Mn(t+"");if(arguments.length<2){for(var o=En(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?In:e?Fn:Bn)(n,e))},text:function(t){return arguments.length?this.each(null==t?$n:("function"==typeof t?Rn:On)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Hn:("function"==typeof t?Wn:Gn)(t)):this.node().innerHTML},raise:function(){return this.each(jn)},lower:function(){return this.each(qn)},append:function(t){var e="function"==typeof t?t:Vn(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Vn(t),o=null==e?Yn:"function"==typeof e?e:Je(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Xn)},clone:function(t){return this.select(t?Qn:Kn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var o,r,i=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=i.length;if(!(arguments.length<2)){for(s=e?Zn:Jn,o=0;o<a;++o)this.each(s(i[o],e,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(o=0,c=s[l];o<a;++o)if((r=i[o]).type===c.type&&r.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?no:eo)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o,r=t[e],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};var so,co,lo=0,uo=0,fo=0,ho=1e3,po=0,mo=0,go=0,yo="object"==typeof performance&&performance.now?performance:Date,vo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bo(){return mo||(vo(wo),mo=yo.now()+go)}function wo(){mo=0}function xo(){this._call=this._time=this._next=null}function _o(t,e,n){var o=new xo;return o.restart(t,e,n),o}function Ao(){mo=(po=yo.now())+go,lo=uo=0;try{!function(){bo(),++lo;for(var t,e=so;e;)(t=mo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--lo}()}finally{lo=0,function(){for(var t,e,n=so,o=1/0;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:so=e);co=t,So(o)}(),mo=0}}function Co(){var t=yo.now(),e=t-po;e>ho&&(go-=e,po=t)}function So(t){lo||(uo&&(uo=clearTimeout(uo)),t-mo>24?(t<1/0&&(uo=setTimeout(Ao,t-yo.now()-go)),fo&&(fo=clearInterval(fo))):(fo||(po=yo.now(),fo=setInterval(Co,ho)),lo=1,vo(Ao)))}function Lo(t,e,n){var o=new xo;return e=null==e?0:+e,o.restart((n=>{o.stop(),t(n+e)}),e,n),o}xo.prototype=_o.prototype={constructor:xo,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?bo():+n)+(null==e?0:+e),this._next||co===this||(co?co._next=this:so=this,co=this),this._call=t,this._time=n,So()},stop:function(){this._call&&(this._call=null,this._time=1/0,So())}};var To=ee("start","end","cancel","interrupt"),ko=[],Mo=0,Eo=2,Po=3,Do=5,No=6;function Fo(t,e,n,o,r,i){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var o,r=t.__transition;function i(c){var l,u,d,f;if(1!==n.state)return s();for(l in r)if((f=r[l]).name===n.name){if(f.state===Po)return Lo(i);4===f.state?(f.state=No,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[l]):+l<e&&(f.state=No,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[l])}if(Lo((function(){n.state===Po&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(c))})),n.state=Eo,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Eo){for(n.state=Po,o=new Array(d=n.tween.length),l=0,u=-1;l<d;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(o[++u]=f);o.length=u+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=Do,1),i=-1,a=o.length;++i<a;)o[i].call(t,r);n.state===Do&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var o in n.state=No,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=_o((function(t){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)}),0,n.time)}(t,n,{name:e,index:o,group:r,on:To,tween:ko,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Mo})}function Bo(t,e){var n=$o(t,e);if(n.state>Mo)throw new Error("too late; already scheduled");return n}function Io(t,e){var n=$o(t,e);if(n.state>Po)throw new Error("too late; already running");return n}function $o(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Oo(t,e){var n,o,r,i=t.__transition,a=!0;if(i){for(r in e=null==e?null:e+"",i)(n=i[r]).name===e?(o=n.state>Eo&&n.state<Do,n.state=No,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete t.__transition}}var Ro,Ho=180/Math.PI,Go={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wo(t,e,n,o,r,i){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*o)&&(n-=t*c,o-=e*c),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,c/=s),t*o<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*Ho,skewX:Math.atan(c)*Ho,scaleX:a,scaleY:s}}function jo(t,e,n,o){function r(t){return t.length?t.pop()+" ":""}return function(i,a){var s=[],c=[];return i=t(i),a=t(a),function(t,o,r,i,a,s){if(t!==r||o!==i){var c=a.push("translate(",null,e,null,n);s.push({i:c-4,x:qe(t,r)},{i:c-2,x:qe(o,i)})}else(r||i)&&a.push("translate("+r+e+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,c),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:qe(t,e)})):e&&n.push(r(n)+"rotate("+e+o)}(i.rotate,a.rotate,s,c),function(t,e,n,i){t!==e?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:qe(t,e)}):e&&n.push(r(n)+"skewX("+e+o)}(i.skewX,a.skewX,s,c),function(t,e,n,o,i,a){if(t!==n||e!==o){var s=i.push(r(i)+"scale(",null,",",null,")");a.push({i:s-4,x:qe(t,n)},{i:s-2,x:qe(e,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,c),i=a=null,function(t){for(var e,n=-1,o=c.length;++n<o;)s[(e=c[n]).i]=e.x(t);return s.join("")}}}var qo=jo((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Go:Wo(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),zo=jo((function(t){return null==t?Go:(Ro||(Ro=document.createElementNS("http://www.w3.org/2000/svg","g")),Ro.setAttribute("transform",t),(t=Ro.transform.baseVal.consolidate())?Wo((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Go)}),", ",")",")");function Uo(t,e){var n,o;return function(){var r=Io(this,t),i=r.tween;if(i!==n)for(var a=0,s=(o=n=i).length;a<s;++a)if(o[a].name===e){(o=o.slice()).splice(a,1);break}r.tween=o}}function Vo(t,e,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=Io(this,t),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:e,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===e){r[c]=s;break}c===l&&r.push(s)}i.tween=r}}function Yo(t,e,n){var o=t._id;return t.each((function(){var t=Io(this,o);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return $o(t,o).value[e]}}function Xo(t,e){var n;return("number"==typeof e?qe:e instanceof xe?He:(n=xe(e))?(e=n,He):Ye)(t,e)}function Ko(t){return function(){this.removeAttribute(t)}}function Qo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jo(t,e,n){var o,r,i=n+"";return function(){var a=this.getAttribute(t);return a===i?null:a===o?r:r=e(o=a,n)}}function Zo(t,e,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===o?r:r=e(o=a,n)}}function tr(t,e,n){var o,r,i;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttribute(t))===(s=c+"")?null:a===o&&s===r?i:(r=s,i=e(o=a,c));this.removeAttribute(t)}}function er(t,e,n){var o,r,i;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:a===o&&s===r?i:(r=s,i=e(o=a,c));this.removeAttributeNS(t.space,t.local)}}function nr(t,e){var n,o;function r(){var r=e.apply(this,arguments);return r!==o&&(n=(o=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,r)),n}return r._value=e,r}function or(t,e){var n,o;function r(){var r=e.apply(this,arguments);return r!==o&&(n=(o=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,r)),n}return r._value=e,r}function rr(t,e){return function(){Bo(this,t).delay=+e.apply(this,arguments)}}function ir(t,e){return e=+e,function(){Bo(this,t).delay=e}}function ar(t,e){return function(){Io(this,t).duration=+e.apply(this,arguments)}}function sr(t,e){return e=+e,function(){Io(this,t).duration=e}}var cr=vt.prototype.constructor;function lr(t){return function(){this.style.removeProperty(t)}}var ur=0;function dr(t,e,n,o){this._groups=t,this._parents=e,this._name=n,this._id=o}function fr(){return++ur}var hr=vt.prototype;dr.prototype=function(t){return vt().transition(t)}.prototype={constructor:dr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=c(t));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s,l,u=o[a],d=u.length,f=i[a]=new Array(d),h=0;h<d;++h)(s=u[h])&&(l=t.call(s,s.__data__,h,u))&&("__data__"in s&&(l.__data__=s.__data__),f[h]=l,Fo(f[h],e,n,h,f,$o(s,n)));return new dr(i,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=d(t));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var c,l=o[s],u=l.length,f=0;f<u;++f)if(c=l[f]){for(var h,p=t.call(c,c.__data__,f,l),m=$o(c,n),g=0,y=p.length;g<y;++g)(h=p[g])&&Fo(h,e,n,g,p,m);i.push(p),a.push(c)}return new dr(i,a,e,n)},selectChild:hr.selectChild,selectChildren:hr.selectChildren,filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i,a=e[r],s=a.length,c=o[r]=[],l=0;l<s;++l)(i=a[l])&&t.call(i,i.__data__,l,a)&&c.push(i);return new dr(o,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,o=e.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var c,l=e[s],u=n[s],d=l.length,f=a[s]=new Array(d),h=0;h<d;++h)(c=l[h]||u[h])&&(f[h]=c);for(;s<o;++s)a[s]=e[s];return new dr(a,this._parents,this._name,this._id)},selection:function(){return new cr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=fr(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],c=s.length,l=0;l<c;++l)if(a=s[l]){var u=$o(a,e);Fo(a,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new dr(o,this._parents,t,n)},call:hr.call,nodes:hr.nodes,node:hr.node,size:hr.size,empty:hr.empty,each:hr.each,on:function(t,e){var n=this._id;return arguments.length<2?$o(this.node(),n).on.on(t):this.each(function(t,e,n){var o,r,i=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Bo:Io;return function(){var a=i(this,t),s=a.on;s!==o&&(r=(o=s).copy()).on(e,n),a.on=r}}(n,t,e))},attr:function(t,e){var n=L(t),o="transform"===n?zo:Xo;return this.attrTween(t,"function"==typeof e?(n.local?er:tr)(n,o,Yo(this,"attr."+t,e)):null==e?(n.local?Qo:Ko)(n):(n.local?Zo:Jo)(n,o,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var o=L(t);return this.tween(n,(o.local?nr:or)(o,e))},style:function(t,e,n){var o="transform"==(t+="")?qo:Xo;return null==e?this.styleTween(t,function(t,e){var n,o,r;return function(){var i=$(this,t),a=(this.style.removeProperty(t),$(this,t));return i===a?null:i===n&&a===o?r:r=e(n=i,o=a)}}(t,o)).on("end.style."+t,lr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var o,r,i;return function(){var a=$(this,t),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(t),c=s=$(this,t)),a===c?null:a===o&&c===r?i:(r=c,i=e(o=a,s))}}(t,o,Yo(this,"style."+t,e))).each(function(t,e){var n,o,r,i,a="style."+e,s="end."+a;return function(){var c=Io(this,t),l=c.on,u=null==c.value[a]?i||(i=lr(e)):void 0;l===n&&r===u||(o=(n=l).copy()).on(s,r=u),c.on=o}}(this._id,t)):this.styleTween(t,function(t,e,n){var o,r,i=n+"";return function(){var a=$(this,t);return a===i?null:a===o?r:r=e(o=a,n)}}(t,o,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==e)return this.tween(o,null);if("function"!=typeof e)throw new Error;return this.tween(o,function(t,e,n){var o,r;function i(){var i=e.apply(this,arguments);return i!==r&&(o=(r=i)&&function(t,e,n){return function(o){this.style.setProperty(t,e.call(this,o),n)}}(t,i,n)),o}return i._value=e,i}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Yo(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function o(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&function(t){return function(e){this.textContent=t.call(this,e)}}(o)),e}return o._value=t,o}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o,r=$o(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((null==e?Uo:Vo)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rr:ir)(e,t)):$o(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ar:sr)(e,t)):$o(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Io(this,t).ease=e}}(e,t)):$o(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Io(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var s={value:a},c={value:function(){0==--r&&i()}};n.each((function(){var n=Io(this,o),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),n.on=e})),0===r&&i()}))},[Symbol.iterator]:hr[Symbol.iterator]};var pr={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function mr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}vt.prototype.interrupt=function(t){return this.each((function(){Oo(this,t)}))},vt.prototype.transition=function(t){var e,n;t instanceof dr?(e=t._id,t=t._name):(e=fr(),(n=pr).time=bo(),t=null==t?null:t+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],c=s.length,l=0;l<c;++l)(a=s[l])&&Fo(a,t,e,l,s,n||mr(a,e));return new dr(o,this._parents,t,e)};const gr=t=>()=>t;function yr(t,{sourceEvent:e,target:n,selection:o,mode:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:o,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function vr(t){t.preventDefault(),t.stopImmediatePropagation()}var br={name:"drag"},wr={name:"space"},xr={name:"handle"},_r={name:"center"};const{abs:Ar,max:Cr,min:Sr}=Math;function Lr(t){return[+t[0],+t[1]]}function Tr(t){return[Lr(t[0]),Lr(t[1])]}var kr={name:"x",handles:["w","e"].map(Ir),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Mr={name:"y",handles:["n","s"].map(Ir),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Er={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ir),input:function(t){return null==t?null:Tr(t)},output:function(t){return t}},Pr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Dr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Nr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Fr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Br={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ir(t){return{type:t}}function $r(t){return!t.ctrlKey&&!t.button}function Or(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Rr(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Gr(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Wr(){return zr(kr)}function jr(){return zr(Mr)}function qr(){return zr(Er)}function zr(t){var e,n=Or,o=$r,r=Rr,i=!0,a=ee("start","brush","end"),s=6;function c(e){var n=e.property("__brush",m).selectAll(".overlay").data([Ir("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Pr.overlay).merge(n).each((function(){var t=Hr(this).extent;io(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Ir("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Pr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var o=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));o.exit().remove(),o.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Pr[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=io(this),e=Hr(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){var o=t.__brush.emitter;return!o||n&&o.clean?new d(t,e,n):o}function d(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function f(n){if((!e||n.touches)&&o.apply(this,arguments)){var r,a,s,c,d,f,h,p,m,g,y,v=this,b=n.target.__data__.type,w="selection"===(i&&n.metaKey?b="overlay":b)?br:i&&n.altKey?_r:xr,x=t===Mr?null:Fr[b],_=t===kr?null:Br[b],A=Hr(v),C=A.extent,S=A.selection,L=C[0][0],T=C[0][1],k=C[1][0],M=C[1][1],E=0,P=0,D=x&&_&&i&&n.shiftKey,N=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=ao(t,v)).point0=t.slice(),t.identifier=e,t}));Oo(v);var F=u(v,arguments,!0).beforestart();if("overlay"===b){S&&(m=!0);const e=[N[0],N[1]||N[0]];A.selection=S=[[r=t===Mr?L:Sr(e[0][0],e[1][0]),s=t===kr?T:Sr(e[0][1],e[1][1])],[d=t===Mr?k:Cr(e[0][0],e[1][0]),h=t===kr?M:Cr(e[0][1],e[1][1])]],N.length>1&&R(n)}else r=S[0][0],s=S[0][1],d=S[1][0],h=S[1][1];a=r,c=s,f=d,p=h;var B=io(v).attr("pointer-events","none"),I=B.selectAll(".overlay").attr("cursor",Pr[b]);if(n.touches)F.moved=O,F.ended=H;else{var $=io(n.view).on("mousemove.brush",O,!0).on("mouseup.brush",H,!0);i&&$.on("keydown.brush",(function(t){switch(t.keyCode){case 16:D=x&&_;break;case 18:w===xr&&(x&&(d=f-E*x,r=a+E*x),_&&(h=p-P*_,s=c+P*_),w=_r,R(t));break;case 32:w!==xr&&w!==_r||(x<0?d=f-E:x>0&&(r=a-E),_<0?h=p-P:_>0&&(s=c-P),w=wr,I.attr("cursor",Pr.selection),R(t));break;default:return}vr(t)}),!0).on("keyup.brush",(function(t){switch(t.keyCode){case 16:D&&(g=y=D=!1,R(t));break;case 18:w===_r&&(x<0?d=f:x>0&&(r=a),_<0?h=p:_>0&&(s=c),w=xr,R(t));break;case 32:w===wr&&(t.altKey?(x&&(d=f-E*x,r=a+E*x),_&&(h=p-P*_,s=c+P*_),w=_r):(x<0?d=f:x>0&&(r=a),_<0?h=p:_>0&&(s=c),w=xr),I.attr("cursor",Pr[b]),R(t));break;default:return}vr(t)}),!0),function(t){var e=t.document.documentElement,n=bt(t).on("dragstart.drag",ne,!0);"onselectstart"in e?n.on("selectstart.drag",ne,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(n.view)}l.call(v),F.start(n,w.name)}function O(t){for(const e of t.changedTouches||[t])for(const t of N)t.identifier===e.identifier&&(t.cur=ao(e,v));if(D&&!g&&!y&&1===N.length){const t=N[0];Ar(t.cur[0]-t[0])>Ar(t.cur[1]-t[1])?y=!0:g=!0}for(const t of N)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);m=!0,vr(t),R(t)}function R(t){const e=N[0],n=e.point0;var o;switch(E=e[0]-n[0],P=e[1]-n[1],w){case wr:case br:x&&(E=Cr(L-r,Sr(k-d,E)),a=r+E,f=d+E),_&&(P=Cr(T-s,Sr(M-h,P)),c=s+P,p=h+P);break;case xr:N[1]?(x&&(a=Cr(L,Sr(k,N[0][0])),f=Cr(L,Sr(k,N[1][0])),x=1),_&&(c=Cr(T,Sr(M,N[0][1])),p=Cr(T,Sr(M,N[1][1])),_=1)):(x<0?(E=Cr(L-r,Sr(k-r,E)),a=r+E,f=d):x>0&&(E=Cr(L-d,Sr(k-d,E)),a=r,f=d+E),_<0?(P=Cr(T-s,Sr(M-s,P)),c=s+P,p=h):_>0&&(P=Cr(T-h,Sr(M-h,P)),c=s,p=h+P));break;case _r:x&&(a=Cr(L,Sr(k,r-E*x)),f=Cr(L,Sr(k,d+E*x))),_&&(c=Cr(T,Sr(M,s-P*_)),p=Cr(T,Sr(M,h+P*_)))}f<a&&(x*=-1,o=r,r=d,d=o,o=a,a=f,f=o,b in Dr&&I.attr("cursor",Pr[b=Dr[b]])),p<c&&(_*=-1,o=s,s=h,h=o,o=c,c=p,p=o,b in Nr&&I.attr("cursor",Pr[b=Nr[b]])),A.selection&&(S=A.selection),g&&(a=S[0][0],f=S[1][0]),y&&(c=S[0][1],p=S[1][1]),S[0][0]===a&&S[0][1]===c&&S[1][0]===f&&S[1][1]===p||(A.selection=[[a,c],[f,p]],l.call(v),F.brush(t,w.name))}function H(t){if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else!function(t,e){var n=t.document.documentElement,o=bt(t).on("dragstart.drag",null);e&&(o.on("click.drag",ne,!0),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,m),$.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);B.attr("pointer-events","all"),I.attr("cursor",Pr.overlay),A.selection&&(S=A.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(S)&&(A.selection=null,l.call(v)),F.end(t,w.name)}}function h(t){u(this,arguments).moved(t)}function p(t){u(this,arguments).ended(t)}function m(){var e=this.__brush||{selection:null};return e.extent=Tr(n.apply(this,arguments)),e.dim=t,e}return c.move=function(e,n,o){e.tween?e.on("start.brush",(function(t){u(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){u(this,arguments).end(t)})).tween("brush",(function(){var e=this,o=e.__brush,r=u(e,arguments),i=o.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,o.extent),s=Ke(i,a);function c(t){o.selection=1===t&&null===a?null:s(t),l.call(e),r.brush()}return null!==i&&null!==a?c:c(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,a=t.input("function"==typeof n?n.apply(e,r):n,i.extent),s=u(e,r).beforestart();Oo(e),i.selection=null===a?null:a,l.call(e),s.start(o).brush(o).end(o)}))},c.clear=function(t,e){c.move(t,null,e)},d.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,o){var r=io(this.that).datum();a.call(e,this.that,new yr(e,{sourceEvent:n,target:c,selection:t.output(this.state.selection),mode:o,dispatch:a}),r)}},c.extent=function(t){return arguments.length?(n="function"==typeof t?t:gr(Tr(t)),c):n},c.filter=function(t){return arguments.length?(o="function"==typeof t?t:gr(!!t),c):o},c.touchable=function(t){return arguments.length?(r="function"==typeof t?t:gr(!!t),c):r},c.handleSize=function(t){return arguments.length?(s=+t,c):s},c.keyModifiers=function(t){return arguments.length?(i=!!t,c):i},c.on=function(){var t=a.on.apply(a,arguments);return t===a?c:t},c}function Ur(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}function Vr(t){return(t=Ur(Math.abs(t)))?t[1]:NaN}var Yr,Xr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kr(t){if(!(e=Xr.exec(t)))throw new Error("invalid format: "+t);var e;return new Qr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Qr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Jr(t,e){var n=Ur(t,e);if(!n)return t+"";var o=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+o:o.length>r+1?o.slice(0,r+1)+"."+o.slice(r+1):o+new Array(r-o.length+2).join("0")}Kr.prototype=Qr.prototype,Qr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Zr={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Jr(100*t,e),r:Jr,s:function(t,e){var n=Ur(t,e);if(!n)return t+"";var o=n[0],r=n[1],i=r-(Yr=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=o.length;return i===a?o:i>a?o+new Array(i-a+1).join("0"):i>0?o.slice(0,i)+"."+o.slice(i):"0."+new Array(1-i).join("0")+Ur(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ti(t){return t}var ei,ni,oi,ri=Array.prototype.map,ii=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ai(t){var e,n,o=void 0===t.grouping||void 0===t.thousands?ti:(e=ri.call(t.grouping,Number),n=t.thousands+"",function(t,o){for(var r=t.length,i=[],a=0,s=e[0],c=0;r>0&&s>0&&(c+s+1>o&&(s=Math.max(1,o-c)),i.push(t.substring(r-=s,r+s)),!((c+=s+1)>o));)s=e[a=(a+1)%e.length];return i.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?ti:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(ri.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=Kr(t)).fill,n=t.align,d=t.sign,f=t.symbol,h=t.zero,p=t.width,m=t.comma,g=t.precision,y=t.trim,v=t.type;"n"===v?(m=!0,v="g"):Zr[v]||(void 0===g&&(g=12),y=!0,v="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var b="$"===f?r:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",w="$"===f?i:/[%p]/.test(v)?c:"",x=Zr[v],_=/[defgprs%]/.test(v);function A(t){var r,i,c,f=b,A=w;if("c"===v)A=x(t)+A,t="";else{var C=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,o=1,r=-1;o<n;++o)switch(t[o]){case".":r=e=o;break;case"0":0===r&&(r=o),e=o;break;default:if(!+t[o])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),C&&0==+t&&"+"!==d&&(C=!1),f=(C?"("===d?d:l:"-"===d||"("===d?"":d)+f,A=("s"===v?ii[8+Yr/3]:"")+A+(C&&"("===d?")":""),_)for(r=-1,i=t.length;++r<i;)if(48>(c=t.charCodeAt(r))||c>57){A=(46===c?a+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}m&&!h&&(t=o(t,1/0));var S=f.length+t.length+A.length,L=S<p?new Array(p-S+1).join(e):"";switch(m&&h&&(t=o(L+t,L.length?p-A.length:1/0),L=""),n){case"<":t=f+t+A+L;break;case"=":t=f+L+t+A;break;case"^":t=L.slice(0,S=L.length>>1)+f+t+A+L.slice(S);break;default:t=L+f+t+A}return s(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),A.toString=function(){return t+""},A}return{format:d,formatPrefix:function(t,e){var n=d(((t=Kr(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(Vr(e)/3))),r=Math.pow(10,-o),i=ii[8+o/3];return function(t){return n(r*t)+i}}}}function si(t){return ei=ai(t),ni=ei.format,oi=ei.formatPrefix,ei}function ci(t){return Math.max(0,-Vr(Math.abs(t)))}function li(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Vr(e)/3)))-Vr(Math.abs(t)))}function ui(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Vr(e)-Vr(t))+1}si({thousands:",",grouping:[3],currency:["$",""]});var di=Math.sqrt(50),fi=Math.sqrt(10),hi=Math.sqrt(2);function pi(t,e,n){var o=(e-t)/Math.max(0,n),r=Math.floor(Math.log(o)/Math.LN10),i=o/Math.pow(10,r);return r>=0?(i>=di?10:i>=fi?5:i>=hi?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=di?10:i>=fi?5:i>=hi?2:1)}function mi(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gi(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yi(t){let e,n,o;function r(t,o,r=0,i=t.length){if(r<i){if(0!==e(o,o))return i;do{const e=r+i>>>1;n(t[e],o)<0?r=e+1:i=e}while(r<i)}return r}return 2!==t.length?(e=mi,n=(e,n)=>mi(t(e),n),o=(e,n)=>t(e)-n):(e=t===mi||t===gi?t:vi,n=t,o=t),{left:r,center:function(t,e,n=0,i=t.length){const a=r(t,e,n,i-1);return a>n&&o(t[a-1],e)>-o(t[a],e)?a-1:a},right:function(t,o,r=0,i=t.length){if(r<i){if(0!==e(o,o))return i;do{const e=r+i>>>1;n(t[e],o)<=0?r=e+1:i=e}while(r<i)}return r}}}function vi(){return 0}const bi=yi(mi),wi=bi.right,xi=(bi.left,yi((function(t){return null===t?NaN:+t})).center,wi);function _i(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ai(t){return+t}var Ci=[0,1];function Si(t){return t}function Li(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Ti(t,e,n){var o=t[0],r=t[1],i=e[0],a=e[1];return r<o?(o=Li(r,o),i=n(a,i)):(o=Li(o,r),i=n(i,a)),function(t){return i(o(t))}}function ki(t,e,n){var o=Math.min(t.length,e.length)-1,r=new Array(o),i=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<o;)r[a]=Li(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(e){var n=xi(t,e,1,o)-1;return i[n](r[n](e))}}function Mi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ei(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var o,r,i,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((o=e<t)&&(r=t,t=e,e=r),0===(a=pi(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),o=Math.round(e/a);for(n*a<t&&++n,o*a>e&&--o,i=new Array(r=o-n+1);++s<r;)i[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),o=Math.round(e*a);for(n/a<t&&++n,o/a>e&&--o,i=new Array(r=o-n+1);++s<r;)i[s]=(n+s)/a}return o&&i.reverse(),i}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var o=e();return function(t,e,n,o){var r,i=function(t,e,n){var o=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),i=o/r;return i>=di?r*=10:i>=fi?r*=5:i>=hi&&(r*=2),e<t?-r:r}(t,e,n);switch((o=Kr(null==o?",f":o)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(r=li(i,a))||(o.precision=r),oi(o,a);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(r=ui(i,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=r-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(r=ci(i))||(o.precision=r-2*("%"===o.type))}return ni(o)}(o[0],o[o.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var o,r,i=e(),a=0,s=i.length-1,c=i[a],l=i[s],u=10;for(l<c&&(r=c,c=l,l=r,r=a,a=s,s=r);u-- >0;){if((r=pi(c,l,n))===o)return i[a]=c,i[s]=l,e(i);if(r>0)c=Math.floor(c/r)*r,l=Math.ceil(l/r)*r;else{if(!(r<0))break;c=Math.ceil(c*r)/r,l=Math.floor(l*r)/r}o=r}return t},t}var Pi={9606:{commonName:"Human",scientificName:"Homo sapiens",assemblies:{default:"GCF_000001405.26",GRCh38:"GCF_000001405.26",GRCh37:"GCF_000001405.13",NCBI36:"GCF_000001405.12"},hasGeneCache:!0,hasParalogCache:!0,hasInteractionCache:!0,hasGeneStructureCache:!0,hasProteinCache:!0,hasSynonymCache:!0,hasTissueCache:!0},10090:{commonName:"Mouse",scientificName:"Mus musculus",assemblies:{default:"GCF_000001635.27",GRCm39:"GCF_000001635.27",GRCm38:"GCF_000001635.20",MGSCv37:"GCF_000001635.18"},hasGeneCache:!0,hasParalogCache:!0,hasInteractionCache:!0,hasGeneStructureCache:!0,hasProteinCache:!0,hasSynonymCache:!0},9598:{commonName:"Chimpanzee",scientificName:"Pan troglodytes",assemblies:{default:"GCF_028858775.1","NHGRI_mPanTro3-v1.1-hic.freeze_pri":"GCF_028858775.1","Pan_tro 3.0":"GCF_000001515.7"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},10116:{commonName:"Rat",scientificName:"Rattus norvegicus",assemblies:{default:"GCF_000001895.5","Rnor_6.0":"GCF_000001895.5"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},3702:{commonName:"Thale cress",scientificName:"Arabidopsis thaliana",assemblies:{default:"GCF_000001735.3",TAIR10:"GCF_000001735.3"}},4530:{commonName:"Rice",scientificName:"Oryza sativa",assemblies:{default:"GCA_001433935.1","IRGSP-1.0":"GCA_001433935.1"}},4577:{commonName:"Maize",scientificName:"Zea mays",assemblies:{default:"GCA_000005005.5","IRGSP-1.0":"GCA_001433935.1"}},4641:{commonName:"Banana",scientificName:"Musa acuminata",assemblies:{default:"mock"}},7227:{commonName:"Fly",scientificName:"Drosophila melanogaster",assemblies:{default:"GCA_000001215.4","Release 6 plus ISO1 MT":"GCA_000001215.4"},hasSynonymCache:!0},7165:{commonName:"Mosquito",scientificName:"Anopheles gambiae",assemblies:{default:"GCF_000005575.2"}},746128:{commonName:"Aspergillis fumigatus",scientificName:"Aspergillis fumigatus",assemblies:{default:"GCF_000002655.1"}},227321:{scientificName:"Aspergillus nidulans",assemblies:{default:"GCF_000149205.2"}},5061:{commonName:"black mold",scientificName:"Aspergillus niger",assemblies:{default:"GCF_003184595.1"}},5062:{commonName:"koji",scientificName:"Aspergillus oryzae",assemblies:{default:"GCF_000184455.2"}},15368:{commonName:"stiff brome",scientificName:"Brachypodium distachyon",assemblies:{default:"GCF_000005505.3"}},60711:{commonName:"green monkey",scientificName:"Chlorocebus sabaeus",assemblies:{default:"GCF_015252025.1"}},7719:{commonName:"Vase tunicate",scientificName:"Ciona intestinalis",assemblies:{default:"GCF_000224145.3"}},9685:{commonName:"Cat",scientificName:"Felis catus",assemblies:{default:"GCF_000181335.3"},hasGeneCache:!0},9031:{commonName:"Chicken",scientificName:"Gallus gallus",assemblies:{default:"GCF_000002315.6"},hasGeneCache:!0,hasParalogCache:!0},9593:{commonName:"Gorilla",scientificName:"Gorilla gorilla",assemblies:{default:"GCF_008122165.1"}},4513:{commonName:"Barley",scientificName:"Hordeum vulgare",assemblies:{default:"GCA_901482405.1"}},9541:{commonName:"Crab-eating macaque",scientificName:"Macaca fascicularis",assemblies:{default:"GCF_000364345.1"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},9544:{commonName:"Rhesus macaque",scientificName:"Macaca mulatta",assemblies:{default:"GCF_003339765.1"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},9597:{commonName:"Bonobo",scientificName:"Pan paniscus",assemblies:{default:"GCF_013052645.1"}},9615:{commonName:"Dog",scientificName:"Canis lupus familiaris",assemblies:{default:"GCF_014441545.1"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},9823:{commonName:"Pig",scientificName:"Sus scrofa",assemblies:{default:"GCF_000003025.6"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},4932:{commonName:"Yeast",scientificName:"Saccharomyces cerevisiae",assemblies:{default:"GCA_000146045.2",R64:"GCA_000146045.2"}},5833:{commonName:"malaria parasite",scientificName:"Plasmodium falciparum",assemblies:{default:"GCA_000002765.3",GCA_000002765:"GCA_000002765.3"}},6239:{commonName:"worm",scientificName:"Caenorhabditis elegans",assemblies:{default:"GCF_000002985.6"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},4081:{commonName:"tomato",scientificName:"Solanum lycopersicum",assemblies:{default:"GCF_000188115.4"}},4072:{commonName:"pepper",scientificName:"Capsicum annuum",assemblies:{default:"GCF_000710875.1"}},3694:{commonName:"black cottonwood",scientificName:"Populus trichocarpa",assemblies:{default:"GCF_000002775.5"}}},Di=Object.assign({},t,e,r,i);function Ni(){return"assembly"in this.config&&/(GCF_|GCA_)/.test(this.config.assembly)}function Fi(t){var e,n,o,r=document.scripts,i=Ideogram.version;if(!1===location.pathname.includes("/examples/vanilla/"))return`https://cdn.jsdelivr.net/npm/ideogram@${i}/dist/data/${t}`;for(var a=0;a<r.length;a++)if(e=r[a],o=/ideogram/.test(e.src.split("/").slice(-1)),"src"in e&&o)return(n=e.src.split("//"))[0]+"//"+(n="/"+n[1].split("/").slice(0,-2).join("/"))+"/data/"+t;return"../data/"+t}function Bi(t,e=!1){return fetch(t).then((n=>{if(n.ok)return n;if(!1===e)return Bi(t.replace(".json",""),!0);throw Error("Fetch failed for "+t)}))}function Ii(){return Fi("bands/native/")}function $i(t){return Math.round(100*t)/100}function Oi(t){call(this.onDidRotateCallback,t)}function Ri(){return Di.select(this.selector).node()}function Hi(t,e){var n=this.config,o=new Headers;return n.accessToken&&(o=new Headers({Authorization:"Bearer "+n.accessToken})),"text"===e?Di.text(t,{headers:o}):Di.json(t,{headers:o})}function Gi(t){var e,n,o,r,i=this.organisms;for(n in t=zi(t),i)if(o=zi((e=i[n]).commonName),r=zi(e.scientificName),o===t||r===t)return n;return null}function Wi(t){return t in this.organisms?this.organisms[t].commonName:null}function ji(t){return t in this.organisms?this.organisms[t].scientificName:null}function qi(t){const e=t.split(/[ _-]/g).map(((t,e)=>e>0?t[0].toUpperCase()+t.slice(1):t)).join("");return e}function zi(t){return void 0===t?"":t.toLowerCase().replace(/ /g,"-")}function Ui(t){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/i.test(t)}function Vi(t){var e={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};return t.toUpperCase().split("").reduce((function(t,n,o,r){return e[n]<e[r[o+1]]?t-e[n]:t+e[n]}),0)}function Yi(t){const e=t.config;let n="sans-serif";e.fontFamily&&(n=e.fontFamily);let o=600;return e.fontWeight&&(o=e.fontWeight),o+" "+(e.annotLabelSize?e.annotLabelSize:13)+"px "+n}function Xi(t,e){var n=Yi(e),o=(Xi.canvas||(Xi.canvas=document.createElement("canvas"))).getContext("2d");o.font=n;var r=o.measureText(t),i=r.actualBoundingBoxRight,a=r.actualBoundingBoxLeft;return{width:Math.abs(a)+Math.abs(i),height:Math.abs(r.actualBoundingBoxAscent)+Math.abs(r.actualBoundingBoxDescent)}}function Ki(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,o){return e+e+n+n+o+o}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function Qi(t){var e=parseInt(t,10).toString(16);return 1===e.length?"0"+e:e}function Ji(t,e="#FFF"){if("rgb"===t.slice(0,3)&&(t=function(t){const e=t.split("rgb(")[1].trim(")").split(", ");var n,o,r;return n=e[0],o=e[1],r=e[2],"#"+Qi(n)+Qi(o)+Qi(r)}(t)),"#"!==t[0])return t;const n=Ki(t);if("#FFF"===e)n.r>150&&n.g>150&&n.b>150&&(t=`rgb(${n.r-30}, ${n.g-30}, ${n.b-30})`),n.r>200&&n.g>200&&n.b>200&&(t=`rgb(${n.r-50}, ${n.g-50}, ${n.b-50})`);else{const s=Ki(e);o=[n.r,n.g,n.b],r=[s.r,s.g,s.b],i=oa(...o),a=oa(...r),(Math.max(i,a)+.05)/(Math.min(i,a)+.05)<3&&(t="rgb(230, 230, 230)")}var o,r,i,a;return t}Di.select=bt,Di.selectAll=function(t){return"string"==typeof t?new gt([document.querySelectorAll(t)],[document.documentElement]):new gt([null==t?[]:l(t)],mt)},Di.scaleLinear=function t(){var e=function(){var t,e,n,o,r,i,a=Ci,s=Ci,c=Ke,l=Si;function u(){var t,e,n,c=Math.min(a.length,s.length);return l!==Si&&(t=a[0],e=a[c-1],t>e&&(n=t,t=e,e=n),l=function(n){return Math.max(t,Math.min(e,n))}),o=c>2?ki:Ti,r=i=null,d}function d(e){return null==e||isNaN(e=+e)?n:(r||(r=o(a.map(t),s,c)))(t(l(e)))}return d.invert=function(n){return l(e((i||(i=o(s,a.map(t),qe)))(n)))},d.domain=function(t){return arguments.length?(a=Array.from(t,Ai),u()):a.slice()},d.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},d.rangeRound=function(t){return s=Array.from(t),c=_i,u()},d.clamp=function(t){return arguments.length?(l=!!t||Si,u()):l!==Si},d.interpolate=function(t){return arguments.length?(c=t,u()):c},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,o){return t=n,e=o,u()}}()(Si,Si);return e.copy=function(){return n=e,t().domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown());var n},Mi.apply(e,arguments),Ei(e)},Di.max=function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let r of t)null!=(r=e(r,++o,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n};const Zi=.2126,ta=.7152,ea=.0722,na=2.4;function oa(t,e,n){var o=[t,e,n].map((t=>(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,na)));return o[0]*Zi+o[1]*ta+o[2]*ea}function ra(t,e){if("#"!==t[0])return t;const n=Ki(t),o=e;return`rgb(${n.r*o}, ${n.g*o}, ${n.b*o})`}function ia(){return{theme:"light-border",allowHTML:!0,popperOptions:{modifiers:[{name:"flip"}]},onShow:function(){document.querySelectorAll("[data-tippy-root]").forEach((t=>t.remove()))}}}var aa;aa=[["gneg","#FFF","#FFF","#DDD"],["gpos25","#C8C8C8","#DDD","#BBB"],["gpos33","#BBB","#BBB","#AAA"],["gpos50","#999","#AAA","#888"],["gpos66","#888","#888","#666"],["gpos75","#777","#777","#444"],["gpos100","#444","#666","#000"],["acen","#FEE","#FEE","#FDD"],["noBands","#BBB","#BBB","#AAA"]];let sa='#_ideogram {padding-left: 5px;} #_ideogram .labeled {padding-left: 15px;} #_ideogram.labeledLeft {padding-left: 15px; padding-top: 15px;} #_ideogram text {font: 9px Tahoma; fill: #000;} #_ideogram .italic {font-style: italic;} #_ideogram .chromosome {cursor: pointer; fill: #AAA;}#_ideogram.no-rotate .chromosome {cursor: default;} #_ideogram .chrLabel, #_ideogram .annot {cursor: pointer;}#_ideogram .chrSetLabel {font-weight: bolder;}#_ideogram .ghost {opacity: 0.2;}#_ideogram .hidden {display: none;}#_ideogram .bandLabelStalk line {stroke: #AAA; stroke-width: 1;}#_ideogram .syntenyBorder {stroke:#AAA;stroke-width:1;}#_ideogram rect.cursor {  fill: #F00;  stroke: #F00;  fill-opacity: .3;  shape-rendering: crispEdges;}#_ideogram .brush .selection {  fill: #F00;  stroke: #F00;  fill-opacity: .3;  shape-rendering: crispEdges;}#_ideogram .noBands {fill: #AAA;}#_ideogram .gneg {fill: #FFF}#_ideogram .gpos25 {fill: #BBB}#_ideogram .gpos33 {fill: #AAA}#_ideogram .gpos50 {fill: #888}#_ideogram .gpos66 {fill: #666}#_ideogram .gpos75 {fill: #444}#_ideogram .gpos100 {fill: #000}#_ideogram .gpos {fill: #000}#_ideogram .acen {fill: #FDD}#_ideogram .stalk {fill: #CCE;}#_ideogram .gvar {fill: #DDF}#_ideogram.faint .gneg {fill: #FFF}#_ideogram.faint .gpos25 {fill: #EEE}#_ideogram.faint .gpos33 {fill: #EEE}#_ideogram.faint .gpos50 {fill: #EEE}#_ideogram.faint .gpos66 {fill: #EEE}#_ideogram.faint .gpos75 {fill: #EEE}#_ideogram.faint .gpos100 {fill: #DDD}#_ideogram.faint .gpos {fill: #DDD}#_ideogram.faint .acen {fill: #FEE}#_ideogram.faint .stalk {fill: #EEF;}#_ideogram.faint .gvar {fill: #EEF}#_ideogram .gneg {fill: url("#gneg")} #_ideogram .gpos25 {fill: url("#gpos25")} #_ideogram .gpos33 {fill: url("#gpos33")} #_ideogram .gpos50 {fill: url("#gpos50")} #_ideogram .gpos66 {fill: url("#gpos66")} #_ideogram .gpos75 {fill: url("#gpos75")} #_ideogram .gpos100 {fill: url("#gpos100")} #_ideogram .gpos {fill: url("#gpos100")} #_ideogram .acen {fill: url("#acen")} #_ideogram .stalk {fill: url("#stalk")} #_ideogram .gvar {fill: url("#gvar")} #_ideogram .noBands {fill: url("#noBands")} #_ideogram .chromosome {fill: url("#noBands")} ';function ca(t){var e;this.config=JSON.parse(JSON.stringify(t)),(e=this).chromosomesArray=[],e.coordinateSystem="iscn",e.maxLength={bp:0,iscn:0},e.chromosomes={},e.numChromosomes=0,e.config.debug||(e.config.debug=!1),e.config.dataDir||(e.config.dataDir=e.getDataDir()),e.config.container||(e.config.container="body"),e.selector=e.config.container+" #_ideogram",e.config.resolution||(e.config.resolution=""),e.config.orientation||(e.config.orientation="vertical"),e.config.brush||(e.config.brush=null),e.config.rows||(e.config.rows=1),"showChromosomeLabels"in e.config==0&&(e.config.showChromosomeLabels=!0),e.config.showNonNuclearChromosomes||(e.config.showNonNuclearChromosomes=!1),e.config.chromosomeScale||(e.config.chromosomeScale="absolute"),e.config.showTools||(e.config.showTools=!1),function(t){t.config.ploidy||(t.config.ploidy=1),t.config.ploidy>1&&(t.sexChromosomes={},t.config.sex||(t.config.sex="male"),2!==t.config.ploidy||t.config.ancestors||(t.config.ancestors={M:"#ffb6c1",P:"#add8e6"},t.config.ploidyDesc="MP"))}(this),function(t){t.config.showBandLabels||(t.config.showBandLabels=!1),"showFullyBanded"in t.config==0&&(t.config.showFullyBanded=!0),t.bandsToShow=[],t.bandData={}}(this),function(t){var e,n,o;t.config.chrHeight||(e=t.config.container,n=document.querySelector(e).getBoundingClientRect(),o="vertical"===t.config.orientation?n.height:n.width,"body"!==e&&0!==o||(o=400),t.config.chrHeight=o)}(this),function(t){var e,n;t.config.chrWidth||(e=10,(n=t.config.chrHeight)<900&&n>500?e=Math.round(n/40):n>=900&&(e=Math.round(n/45)),t.config.chrWidth=e)}(this),function(t){t.config.geometry&&"collinear"===t.config.geometry?"chrMargin"in t.config==0&&(t.config.chrMargin=0):(t.config.chrMargin||(1===t.config.ploidy?t.config.chrMargin=10:t.config.chrMargin=Math.round(t.config.chrWidth/4)),t.config.showBandLabels&&(t.config.chrMargin+=20))}(this),function(t,e){t.onLoad&&(e.onLoadCallback=t.onLoad),t.onLoadAnnots&&(e.onLoadAnnotsCallback=t.onLoadAnnots),t.onBeforeDrawAnnots&&(e.onBeforeDrawAnnotsCallback=t.onBeforeDrawAnnots),t.onDrawAnnots&&(e.onDrawAnnotsCallback=t.onDrawAnnots),t.onBrushMove&&(e.onBrushMoveCallback=t.onBrushMove),t.onBrushEnd&&(e.onBrushEndCallback=t.onBrushEnd),t.onCursorMove&&(e.onCursorMoveCallback=t.onCursorMove),t.onDidRotate&&(e.onDidRotateCallback=t.onDidRotate),t.onWillShowAnnotTooltip&&(e.onWillShowAnnotTooltipCallback=t.onWillShowAnnotTooltip),t.onDidShowAnnotTooltip&&(e.onDidShowAnnotTooltipCallback=t.onDidShowAnnotTooltip),t.onClickAnnot&&(e.onClickAnnotCallback=t.onClickAnnot)}(t,this),function(t,e){e.organisms=Object.assign({},Pi),t.taxid&&t.organismMetadata&&(e.organisms[t.taxid]=t.organismMetadata),e.organismsWithBands=Object.assign({},e.organisms)}(t,this),function(t){t.bump=Math.round(t.config.chrHeight/125),t.adjustedBump=!1,t.config.chrHeight<200&&(t.adjustedBump=!0,t.bump=4)}(this),function(t,e){t.chromosome&&(e.config.chromosomes=[t.chromosome],"showBandLabels"in t==0&&(e.config.showBandLabels=!0),"rotatable"in t==0&&(e.config.rotatable=!1))}(t,this),function(t){const e=t.config;e.chrLabelSize||(t.config.chrLabelSize=9),e.chrLabelColor||(t.config.chrLabelColor="#000"),e.fontFamily||(t.config.fontFamily="");const n=`font-size: ${e.chrLabelSize}px`,o=`fill: ${e.chrLabelColor}`,r=`font-family: ${e.fontFamily}`;sa+=`#_ideogram text {${r}; ${n}; ${o};}`,sa+=`#_ideogramLabel text {${r};}`}(this),this.initAnnotSettings(),this.config.geometry&&"parallel"!==this.config.geometry||(this.config.chrMargin+=this.config.chrWidth,"heatmap"===this.config.annotationsLayout?this.config.chrMargin+=this.config.annotTracksHeight:this.config.chrMargin+=2*this.config.annotTracksHeight),this.init()}const la=function(t){var e,n,o,r,i=t.config;if(t.config.annotLabelHeight=12,"demarcateCollinearChromosomes"in t.config==0&&(t.config.demarcateCollinearChromosomes=!0),n=function(t,e){var n,o,r,i,a,s,c,l={};for(n=[],o=0;o<t.length;o++)c=e.chromosomesArray[o].id.split("-")[1],r=0===o?o:o-1,i=e.chromosomesArray[r],0===o||c in l==0?(a=20,l[c]=1):(s=i.width,a=n[r]+s+(e.config.showChromosomeLabels?0:2)+e.config.chrMargin),n.push(a);return n}(e=document.querySelectorAll(".chromosome-set"),t),function(t,e,n,o){var r,i,a,s,c,l,u,d=o.config,f=d.chrLabelSize;for(r=0;r<t.length;r++){if(i=t[r],a=e[r]+23-f,l=o.chromosomesArray[r].id.split("-")[1],c=n-200*(u=o.config.taxids.indexOf(l))-30-5,0===u?(s=-34,c+=2*o.config.chrWidth-16):s=2*o.config.chrWidth-24,d.showChromosomeLabels){const t=i.querySelector(".chrLabel > tspan");t.setAttribute("x",s),t.setAttribute("dy",f-8),i.querySelector(".chrLabel").setAttribute("text-anchor","start")}i.setAttribute("transform","rotate(90) translate("+a+","+c+")"),i.querySelector(".chromosome").setAttribute("transform","translate(-13, 10)")}!function(t){t.config.taxids.forEach(((e,n)=>{var o=t.organisms[e].scientificName;Di.select(t.selector).append("text").attr("class","genomeLabel italic").attr("x",55+200*n).attr("y",10).text(o).attr("text-anchor","middle")}))}(o)}(e,n,-40,t),r=Math.round(n.slice(-1)[0]+70),i.multiorganism){o*=8;var a=0;n.forEach((t=>{t>a&&(a=t)})),o=a+30}else o=xOffsets.slice(-1)[0]+30;Di.select(t.selector).attr("height",o).attr("width",r),Di.select("#_ideogramTrackLabelContainer").remove(),Di.select("#_ideogramInnerWrap").insert("div",":first-child").attr("id","_ideogramTrackLabelContainer").style("position","absolute")};const ua=function(t){var e,n,o,r,i,a=t.config,s=a.annotationHeight||0;if("vertical"!==a.orientation){t.config.annotLabelHeight=12;var c=t.config.annotLabelHeight;if("demarcateCollinearChromosomes"in t.config==0&&(t.config.demarcateCollinearChromosomes=!0),e=document.querySelectorAll(".chromosome-set"),o=a.numAnnotTracks*(s+c+4)-a.chrWidth+1,n=function(t,e){var n,o,r,i,a,s,c,l={};for(n=[],o=0;o<t.length;o++)c=e.chromosomesArray[o].id.split("-")[1],r=0===o?o:o-1,i=e.chromosomesArray[r],0===o||c in l==0?(a=20,l[c]=1):(s=i.width,a=n[r]+s+(e.config.showChromosomeLabels?0:2)+e.config.chrMargin),n.push(a);return n}(e,t),function(t,e,n,o){var r,i,a,s,c,l,u,d=o.config,f=d.chrWidth,h=d.chrLabelSize;for(r=0;r<t.length;r++)i=t[r],s=e[r],a=o.chromosomesArray[r].id.split("-")[1],c=n+200*(l=d.taxids.indexOf(a)),0===l&&o.config.multiorganism?(u=h-4,c+=2*f+h):u=2*f+h+2,o.config.showChromosomeLabels&&(i.querySelector(".chrLabel").setAttribute("y",u),i.querySelector(".chrLabel").setAttribute("text-anchor","middle")),i.setAttribute("transform","translate("+s+","+c+")"),i.querySelector(".chromosome").setAttribute("transform","translate(-13, 10)");d.multiorganism&&function(t){t.config.taxids.forEach(((e,n)=>{var o=t.organisms[e],r=t.config,i=o.scientificName;Di.select(t.selector).append("text").attr("class","genomeLabel italic").attr("x",5).attr("y",r.chrLabelSize+(200+3*r.chrWidth)*n).text(i)}))}(o)}(e,n,o,t),r=o+2*a.chrWidth+20,a.multiorganism){r*=8;var l=0;n.forEach((t=>{t>l&&(l=t)})),i=l+20}else i=n.slice(-1)[0]+20;Di.select(t.selector).attr("width",i).attr("height",r),Di.select("#_ideogramTrackLabelContainer").remove(),Di.select("#_ideogramInnerWrap").insert("div",":first-child").attr("id","_ideogramTrackLabelContainer").style("position","absolute")}else la(t)};var da=Uint8Array,fa=Uint16Array,ha=Uint32Array,pa=new da([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ma=new da([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ga=new da([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ya=function(t,e){for(var n=new fa(31),o=0;o<31;++o)n[o]=e+=1<<t[o-1];var r=new ha(n[30]);for(o=1;o<30;++o)for(var i=n[o];i<n[o+1];++i)r[i]=i-n[o]<<5|o;return[n,r]},va=ya(pa,2),ba=va[0],wa=va[1];ba[28]=258,wa[258]=28;for(var xa=ya(ma,0),_a=xa[0],Aa=(xa[1],new fa(32768)),Ca=0;Ca<32768;++Ca){var Sa=(43690&Ca)>>>1|(21845&Ca)<<1;Sa=(61680&(Sa=(52428&Sa)>>>2|(13107&Sa)<<2))>>>4|(3855&Sa)<<4,Aa[Ca]=((65280&Sa)>>>8|(255&Sa)<<8)>>>1}var La=function(t,e,n){for(var o=t.length,r=0,i=new fa(e);r<o;++r)t[r]&&++i[t[r]-1];var a,s=new fa(e);for(r=0;r<e;++r)s[r]=s[r-1]+i[r-1]<<1;if(n){a=new fa(1<<e);var c=15-e;for(r=0;r<o;++r)if(t[r])for(var l=r<<4|t[r],u=e-t[r],d=s[t[r]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)a[Aa[d]>>>c]=l}else for(a=new fa(o),r=0;r<o;++r)t[r]&&(a[r]=Aa[s[t[r]-1]++]>>>15-t[r]);return a},Ta=new da(288);for(Ca=0;Ca<144;++Ca)Ta[Ca]=8;for(Ca=144;Ca<256;++Ca)Ta[Ca]=9;for(Ca=256;Ca<280;++Ca)Ta[Ca]=7;for(Ca=280;Ca<288;++Ca)Ta[Ca]=8;var ka=new da(32);for(Ca=0;Ca<32;++Ca)ka[Ca]=5;var Ma=La(Ta,9,1),Ea=La(ka,5,1),Pa=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Da=function(t,e,n){var o=e/8|0;return(t[o]|t[o+1]<<8)>>(7&e)&n},Na=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},Fa=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var o=new(2==t.BYTES_PER_ELEMENT?fa:4==t.BYTES_PER_ELEMENT?ha:da)(n-e);return o.set(t.subarray(e,n)),o},Ba=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ia=function(t,e,n){var o=new Error(e||Ba[t]);if(o.code=t,Error.captureStackTrace&&Error.captureStackTrace(o,Ia),!n)throw o;return o},$a=function(t,e,n){var o=t.length;if(!o||n&&n.f&&!n.l)return e||new da(0);var r=!e||n,i=!n||n.i;n||(n={}),e||(e=new da(3*o));var a,s=function(t){var n=e.length;if(t>n){var o=new da(Math.max(2*n,t));o.set(e),e=o}},c=n.f||0,l=n.p||0,u=n.b||0,d=n.l,f=n.d,h=n.m,p=n.n,m=8*o;do{if(!d){c=Da(t,l,1);var g=Da(t,l+1,3);if(l+=3,!g){var y=t[(a=l,(k=4+((a+7)/8|0))-4)]|t[k-3]<<8,v=k+y;if(v>o){i&&Ia(0);break}r&&s(u+y),e.set(t.subarray(k,v),u),n.b=u+=y,n.p=l=8*v,n.f=c;continue}if(1==g)d=Ma,f=Ea,h=9,p=5;else if(2==g){var b=Da(t,l,31)+257,w=Da(t,l+10,15)+4,x=b+Da(t,l+5,31)+1;l+=14;for(var _=new da(x),A=new da(19),C=0;C<w;++C)A[ga[C]]=Da(t,l+3*C,7);l+=3*w;var S=Pa(A),L=(1<<S)-1,T=La(A,S,1);for(C=0;C<x;){var k,M=T[Da(t,l,L)];if(l+=15&M,(k=M>>>4)<16)_[C++]=k;else{var E=0,P=0;for(16==k?(P=3+Da(t,l,3),l+=2,E=_[C-1]):17==k?(P=3+Da(t,l,7),l+=3):18==k&&(P=11+Da(t,l,127),l+=7);P--;)_[C++]=E}}var D=_.subarray(0,b),N=_.subarray(b);h=Pa(D),p=Pa(N),d=La(D,h,1),f=La(N,p,1)}else Ia(1);if(l>m){i&&Ia(0);break}}r&&s(u+131072);for(var F=(1<<h)-1,B=(1<<p)-1,I=l;;I=l){var $=(E=d[Na(t,l)&F])>>>4;if((l+=15&E)>m){i&&Ia(0);break}if(E||Ia(2),$<256)e[u++]=$;else{if(256==$){I=l,d=null;break}var O=$-254;if($>264){var R=pa[C=$-257];O=Da(t,l,(1<<R)-1)+ba[C],l+=R}var H=f[Na(t,l)&B],G=H>>>4;if(H||Ia(3),l+=15&H,N=_a[G],G>3&&(R=ma[G],N+=Na(t,l)&(1<<R)-1,l+=R),l>m){i&&Ia(0);break}r&&s(u+131072);for(var W=u+O;u<W;u+=4)e[u]=e[u-N],e[u+1]=e[u+1-N],e[u+2]=e[u+2-N],e[u+3]=e[u+3-N];u=W}}n.l=d,n.p=I,n.b=u,n.f=c,d&&(c=1,n.m=h,n.d=f,n.n=p)}while(!c);return u==e.length?e:Fa(e,0,u)},Oa=new da(0),Ra=function(t){31==t[0]&&139==t[1]&&8==t[2]||Ia(6,"invalid gzip data");var e=t[3],n=10;4&e&&(n+=t[10]|2+(t[11]<<8));for(var o=(e>>3&1)+(e>>4&1);o>0;o-=!t[n++]);return n+(2&e)},Ha=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},Ga=function(t){(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&Ia(6,"invalid zlib data"),32&t[1]&&Ia(6,"invalid zlib data: preset dictionaries not supported")};function Wa(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?function(t,e){return $a(t.subarray(Ra(t),-8),e||new da(Ha(t)))}(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?function(t,e){return $a(t,e)}(t,e):function(t,e){return $a((Ga(t),t.subarray(2,-4)),e)}(t,e)}var ja="undefined"!=typeof TextDecoder&&new TextDecoder;try{ja.decode(Oa,{stream:!0})}catch(t){}var qa=function(t){for(var e="",n=0;;){var o=t[n++],r=(o>127)+(o>223)+(o>239);if(n+r>t.length)return[e,Fa(t,n-1)];r?3==r?(o=((15&o)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,e+=String.fromCharCode(55296|o>>10,56320|1023&o)):e+=1&r?String.fromCharCode((31&o)<<6|63&t[n++]):String.fromCharCode((15&o)<<12|(63&t[n++])<<6|63&t[n++]):e+=String.fromCharCode(o)}};function za(t,e){if(e){for(var n="",o=0;o<t.length;o+=16384)n+=String.fromCharCode.apply(null,t.subarray(o,o+16384));return n}if(ja)return ja.decode(t);var r=qa(t),i=r[0];return r[1].length&&Ia(8),i}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout,n(913);class Ua extends Error{constructor(t,e){super(((t,...e)=>{let n=t;return e.length>0&&(n+=` :: ${JSON.stringify(e)}`),n})(t,e)),this.name=t,this.details=e}}async function Va(t,e){try{if(206===e.status)return e;const n=t.headers.get("range");if(!n)throw new Ua("no-range-header");const o=function(t){const e=t.trim().toLowerCase();if(!e.startsWith("bytes="))throw new Ua("unit-must-be-bytes",{normalizedRangeHeader:e});if(e.includes(","))throw new Ua("single-range-only",{normalizedRangeHeader:e});const n=/(\d*)-(\d*)/.exec(e);if(!n||!n[1]&&!n[2])throw new Ua("invalid-range-values",{normalizedRangeHeader:e});return{start:""===n[1]?void 0:Number(n[1]),end:""===n[2]?void 0:Number(n[2])}}(n),r=await e.blob(),i=function(t,e,n){const o=t.size;if(n&&n>o||e&&e<0)throw new Ua("range-not-satisfiable",{size:o,end:n,start:e});let r,i;return void 0!==e&&void 0!==n?(r=e,i=n+1):void 0!==e&&void 0===n?(r=e,i=o):void 0!==n&&void 0===e&&(r=o-n,i=o),{start:r,end:i}}(r,o.start,o.end),a=r.slice(i.start,i.end),s=a.size,c=new Response(a,{status:206,statusText:"Partial Content",headers:e.headers});return c.headers.set("Content-Length",String(s)),c.headers.set("Content-Range",`bytes ${i.start}-${i.end-1}/${r.size}`),c}catch(t){return new Response("",{status:416,statusText:"Range Not Satisfiable"})}}function Ya(t,e,n=11){return"WBGene"===t&&(n=8),t+e.padStart(n,"0")}async function Xa(){const t=`ideogram-${a}`;return(await caches.keys()).forEach((e=>{e.startsWith("ideogram-")&&e!==t&&caches.delete(e)})),await caches.open(t)}async function Ka(t){const e=await Xa();window.ideoCache=e,window.createPartialResponse=Va;const n=t.replace(".gz","");if(void 0===await e.match(n)){const o=await fetch(t),r=await o.blob(),i=za(Wa(new Uint8Array(await r.arrayBuffer()))),a=i.length,s=new Response(new Blob([i],{type:"text/tab-separated-values"}),{headers:new Headers({"Content-Length":a})});return await e.put(n,s),await e.match(n)}return await e.match(n)}async function Qa(t,e){const n=e[0]+1,o=e[1]-1,r=new Headers({"content-type":"multipart/byteranges",range:`bytes=${n}-${o}`}),i=new Request(t,{headers:r}),a=await Xa(),s=await a.match(i),c=await Va(i,s);return await c.text()}function Ja(t,e){const n=[];for(let o=0;o<t.length;o++){const r=t[o].split(";"),i=[e[parseInt(r[0])],parseInt(r[1]),parseInt(r[2])];n.push(i)}return n}function Za(t){const e=t.split(" keys: ");if(e.length<2)return[null];const n=e[0].split("## ")[1],o={};return e[1].split(", ").forEach((t=>{const e=t.split(" = ");o[e[0]]=e[1]})),[n,o]}function ts(t,e){const n=[];for(let o=0;o<t.length;o++){const r=t[o].split(";"),i=[e[r[0]],parseInt(r[1]),parseInt(r[2])];n.push(i)}return n}function es(t){const e=t.split(" keys: ");if(e.length<2)return[null];const n=e[0].split("## ")[1],o={};return e[1].split("; ").forEach((t=>{const e=t.split(" = ");o[e[0]]=e[1]})),[n,o]}function ns(t){const e=[],n=[],o=[];return t.split(";").forEach((t=>{const r=t.split(",");e.push(r[0]),n.push(r[1]),o.push(r[2])})),[e,n,o]}async function os(t,e){const n=e.tissueCache,o=n.byteRangesByName[t];if(e.cacheRangeFetch||(e.cacheRangeFetch=Qa),!o)return null;const r=[],i=(await Qa("/dist/data/cache/tissues/homo-sapiens-tissues.tsv",o)).split("\t").slice(1);for(let t=0;t<i.length;t++){const e=i[t].split(";").map((t=>""===t?0:t)),o=e.length;15===o?e.splice(1,0,0):14===o?(e.splice(1,0,0),e.splice(1,0,0)):13===o&&(e.splice(1,0,0),e.splice(1,0,0),e.splice(1,0,0));const a=e[0],s=e.slice(1,6),c={min:parseFloat(s[0]),q1:parseFloat(s[1]),median:parseFloat(s[2]),q3:parseFloat(s[3]),max:parseFloat(s[4]),quantiles:e.slice(6).map((t=>parseInt(t)))},l=n.tissueNames[a],u=n.tissueColors[a],d=parseInt(n.tissueSamples[a]);r.push({tissue:l,expression:c,color:u,samples:d})}return r}n(762),window.cacheRangeFetch=Qa;const rs={gene:{metadata:"Gene",dir:"genes",fn:function(t,e){const[n,o,r,i,a,s,c]=t;e.geneCache={interestingNames:n,nameCaseMap:o,namesById:r,fullNamesById:i,idsByName:a,lociByName:s,lociById:c}},parseFn:function(t,e){const n=[],o={},r={},i={},a={},s={},c={},l=[],u={};let d,f=performance.now();const h=t.split(/\r\n|\n/);e.rawTsvSplit=Math.round(performance.now()-f),f=performance.now();for(let t=0;t<h.length;t++){const e=h[t];if(""===e)continue;if("#"===e[0]){"## prefix"===e.slice(0,9)&&(d=e.split("prefix: ")[1]);continue}const[f,p,m,g,y,v,b]=e.trim().split(/\t/),w=decodeURIComponent(v),x=parseInt(p),_=x+parseInt(m),A=Ya(d,g);l.push([f,x,_,A,y,w]);const C=[f,x,_];if(n.push(y),o[y.toLowerCase()]=y,r[A]=y,i[A]=w,a[y]=A,s[y]=C,c[A]=C,void 0!==b){const t=[],e=b.split(",");for(let n=0;n<e.length;n++)t.push(parseInt(e[n],10));u[y]=t}}const p=performance.now();return e.parseCacheLoop=Math.round(p-f),e.parseAnnots=Math.round(performance.now()-p),[n,o,r,i,a,s,c]}},paralog:{metadata:"Paralog",dir:"paralogs",fn:function(t,e){const n=t;e.paralogCache={paralogsByName:n}},parseFn:function(t,e){const n={};let o,r=performance.now();const i=t.split(/\r\n|\n/);e.rawTsvSplit=Math.round(performance.now()-r),r=performance.now();for(let t=0;t<i.length;t++){const e=i[t];if(""===e)continue;if("#"===e[0]){"## prefix"===e.slice(0,9)&&(o=e.split("prefix: ")[1]);continue}const r=e.trim().split(/\t/),a=r[0],s=r[1],c=[];if("_"===r[2][0]){const t=n[r[2].slice(1).toUpperCase()],e=Ya(o,s);for(let n=0;n<t.length;n++){const o=t[n];o!==e&&c.push(o)}c.unshift(Ya(o,r[3]))}else{const t=r.slice(2);for(let e=0;e<t.length;e++){const n=t[e];n!==s&&c.push(Ya(o,n))}}n[a.toUpperCase()]=c}const a=performance.now();return e.parseCacheLoop=Math.round(a-r),n}},interaction:{metadata:"Interaction",dir:"interactions",fn:function(t,e){const n=t;e.interactionCache=n},extension:"json",parseFn:function(t,e,n){let o=performance.now();const r={},i=n.replace("-"," "),a=i[0].toUpperCase()+i.slice(1);o=performance.now();for(const e in t.interactions){const n=t.interactions[e];r[e]={result:[]};for(let o=0;o<n.length;o++){const i=n[o],s=i[0];r[e].result.push({fields:{left:{values:i[1]},right:{values:i[2]}},id:"WP"+s,name:t.pathwayNamesById[s],species:a})}}const s=performance.now();return e.parseCacheLoop=Math.round(s-o),r}},geneStructure:{metadata:"GeneStructure",dir:"gene-structures",fn:function(t,e){const n=t;e.geneStructureCache=n},parseFn:function(t,e){const n={};let o=performance.now();const r=t.split(/\r\n|\n/);let i,a;e.rawTsvSplit=Math.round(performance.now()-o),o=performance.now();for(let t=0;t<r.length;t++){const e=r[t];if(""===e)continue;if("#"===e[0]){if("#"===e[1]){const[t,n]=Za(e);"biotype"===t?i=n:"subpart"===t&&(a=n)}continue}const o=e.trim().split(/\t/),[s,c,l]=o.slice(0,3),u=s.split("-").slice(0,-1).join("-"),d=Ja(o.slice(3),a),f={name:s,biotype:i[c],strand:l,subparts:d};u in n?n[u].push(f):n[u]=[f]}const s=performance.now();return e.parseCacheLoop=Math.round(s-o),n}},protein:{metadata:"Protein",dir:"proteins",fn:function(t,e){e.proteinCache=t},parseFn:function(t,e){const n={};let o=performance.now();const r=t.split(/\r\n|\n/);let i;e.rawTsvSplit=Math.round(performance.now()-o),o=performance.now();let a,s=null;for(let t=0;t<r.length;t++){const e=r[t];if(""===e)continue;if("#"===e[0]){if("#"===e[1]){const[t,n]=es(e);"domain"===t&&(i=n)}continue}const o=e.trim().split(/\t/);let c=o[0];if(isNaN(c)){const t=c.split("-"),e=t.slice(-1)[0];a=parseInt(e[0])*10**(e.length-1),s=t.slice(0,-1).join("-")}else c=a+parseInt(c),c=s+"-"+c;const l={transcriptName:c,protein:ts(o.slice(1),i)};s in n?n[s].push(l):n[s]=[l]}const c=performance.now();return e.parseCacheLoop=Math.round(c-o),n}},synonym:{metadata:"Synonym",dir:"synonyms",fn:function(t,e){e.synonymCache=t},parseFn:function(t,e){const n={};let o=performance.now();const r=t.split(/\r\n|\n/);e.rawTsvSplit=Math.round(performance.now()-o),o=performance.now();for(let t=0;t<r.length;t++){const e=r[t];if(""===e||"#"===e[0])continue;const o=e.trim().split(/\t/),i=o[0],a=o.slice(1);n[i]=a}const i=performance.now();return e.parseCacheLoop=Math.round(i-o),{byGene:n}}},tissue:{metadata:"Tissue",dir:"tissues",fn:function(t,e){e.tissueCache=t},parseFn:function(t,e,n){let o,r,i,a=performance.now();const s=t.split(/\r\n|\n/);e.rawTsvSplit=Math.round(performance.now()-a),a=performance.now();for(let t=0;t<s.length;t++){const e=s[t];if(""!==e)if("#"!==e[0]);else if("## tissues"===e.slice(0,10)){const t=ns(e.split("tissues: ")[1]);[o,r,i]=t}}const c=performance.now();return e.parseCacheLoop=Math.round(c-a),{getTissueExpressions:os,byteRangesByName:n,tissueNames:o,tissueColors:r,tissueSamples:i}}}};async function is(t,e,n,o=null){const r=rs[t],i=n.config.debug,a=performance.now();let s,c={};if(!function(t,e){const n=function(t){const e=function(t){t=zi(t);for(const e in Pi){const n=Pi[e],o=zi(n.commonName),r=zi(n.scientificName);if(o===t||r===t)return e}return null}(t);return Pi[e]||{}}(t),o="has"+e+"Cache";return n[o]&&!0===n[o]}(e,r.metadata))return;const l=t+"Cache";if(Ideogram[l]&&Ideogram[l][e])return void(n[l]=Ideogram[l][e]);Ideogram[l]||(Ideogram[l]={});const u=(null==r?void 0:r.extension)??"tsv",d=function(t,e,n,o="tsv"){const r=zi(t);return e?e+=n+"/":e=Fi("cache/"+n+"/"),e+r+"-"+n+"."+o+".gz"}(e,o,r.dir,u);return[s,c]=await async function(t,e,n,o=null){const r=performance.now(),i=await Ka(t);let a;a=t.includes(".json")?await i.json():await i.text();const s=performance.now();let c;if(e.fetch=Math.round(s-r),t.includes("tissue")){const o=await async function(t){const e={},n=`${t.replace(".tsv.gz","")}.tsv.li.gz`,o=await Ka(n),r=(await o.text()).split("\n");for(let t=0;t<r.length-1;t++){const[n,o]=r[t].split("\t");if("#"===n[0])continue;const i=parseInt(o),a=parseInt(r[t+1].split("\t")[1]);e[n]=[i,a]}return e}(t);c=n(a,e,o)}else c=n(a,e,o);return e.parseCache=Math.round(performance.now()-s),[c,e]}(d,c,r.parseFn,e),i&&console.time(`${t}Cache total`),new Promise((o=>{if(r.fn(s,n,e),Ideogram[l][e]=n[l],i){console.timeEnd(`${t}Cache total`),c.total=Math.round(performance.now()-a);const e="perfTimes in init"+r.metadata+"Cache:";console.log(e,c)}o()}))}function as(t){void 0!==t.timeout&&window.clearTimeout(t.timeout),t.rawAnnots=t.setOriginalTrackIndexes(t.rawAnnots),t.config.annotationsDisplayedTracks?t.annots=t.updateDisplayedTracks(t.config.annotationsDisplayedTracks):(t.annots=t.processAnnotData(t.rawAnnots),t.config.filterable&&t.initCrossFilter(),t.drawProcessedAnnots(t.annots))}function ss(t){var e=(new Date).getTime(),n=this,o=n.config,r=o.annotations;n.initDrawChromosomes(),o.annotationsPath&&function(t){t.rawAnnots?as(t):function e(){t.timeout=setTimeout((function(){!t.rawAnnots||t.rawAnnots&&void 0!==t.rawAnnots.then?e():as(t)}),50)}()}(n),function(t,e){var n,o,r,i;if(!0===t.showBandLabels&&(r=(new Date).getTime(),e.hideUnshownBandLabels(),i=(new Date).getTime(),t.debug&&console.log("Time in showing bands: "+(i-r)+" ms"),"vertical"===t.orientation))for(n=0;n<e.chromosomesArray.length;n++)o="#"+e.chromosomesArray[n].id,e.rotateChromosomeLabels(Di.select(o),n);!0===t.showChromosomeLabels&&e.drawChromosomeLabels(e.chromosomes)}(o,n),o.brush?n.createBrush(o.brush):o.cursorPosition&&n.createClickCursor(o.cursorPosition),r&&(Array.isArray(r)?n.drawAnnots(r):(n.rawAnnots=r,n.afterRawAnnots(),as(n))),function(t,e,n){var o=(new Date).getTime();t.debug&&console.log("Time in drawChromosome: "+(o-n)+" ms");var r=(new Date).getTime();t.debug&&console.log("Time constructing ideogram: "+(r-e)+" ms")}(o,t,e),n.setOverflowScroll(),"collinear"===o.geometry&&ua(n),n.config.debug&&console.time("initCache: Ideogram"),async function(t){const e=t.config;if(!e.useCache)return;const n=e.organism;let o=null;if(e.cacheDir&&(o=e.cacheDir),e.awaitCache){const r=Promise.all([is("gene",n,t,o),is("paralog",n,t,o),is("interaction",n,t,o),is("synonym",n,t,o),is("tissue",n,t,o)]);return e.showGeneStructureInTooltip&&(is("geneStructure",n,t,o),is("protein",n,t,o)),r}is("gene",n,t,o),is("paralog",n,t,o),is("interaction",n,t,o),e.showGeneStructureInTooltip&&(is("geneStructure",n,t,o),is("protein",n,t,o),is("synonym",n,t,o),is("tissue",n,t,o))}(n).then((()=>{n.config.debug&&console.timeEnd("initCache: Ideogram"),n.onLoadCallback&&n.onLoadCallback()}))}class cs{constructor(t){this._config=t,this._description=this._normalize(this._config.ploidyDesc)}getChromosomesNumber(t){if(this._config.ploidyDesc){var e=this._config.ploidyDesc[t];return e instanceof Object?Object.keys(e)[0].length:e.length}return this._config.ploidy||1}_normalize(t){var e,n,o=[];if(!t)return t;for(e in t)"string"==typeof(n=t[e])?("vertical"===this._config.orientation&&(n=n.split("").reverse()),o.push({ancestors:n,existence:this._getexistenceArray(n.length)})):o.push({ancestors:Object.keys(n)[0],existence:n[Object.keys(n)[0]]});return o}_getexistenceArray(t){for(var e=[],n=0;n<t;n++)e.push("11");return e}getSetSize(t){return this._description?this._description[t].ancestors.length:1}getAncestor(t,e){return this._description?this._description[t].ancestors[e]:""}exists(t,e,n){if(this._description){var o=this._description[t].existence[e][n];return Number(o)>0}return!0}}class ls{constructor(t){this._node=t}getLabel(){return Di.select(this._node.parentNode).select("text.chrLabel").text()}getSetLabel(){return Di.select(this._node.parentNode).select("text.chrSetLabel").text()}}const us=class{constructor(t,e){if(this._config=t,this._ideo=e,this._ploidy=this._ideo._ploidy,this._translate=void 0,"chrSetMargin"in t)this.chrSetMargin=t.chrSetMargin;else{var n=this._config.chrMargin;this.chrSetMargin=this._config.ploidy>1?n:0}this._tickSize=8,this._isRotated=!1}_getLeftMargin(){return this.margin.left}_getYScale(){return 20/this._config.chrWidth}getChromosomeLabels(t){var e=new ls(t),n=[];return this._ideo.config.ploidy>1&&n.push(e.getSetLabel()),n.push(e.getLabel()),n.filter((function(t){return t.length>0}))}getChromosomeBandLabelTranslate(t){var e,n,o,r=this._ideo,i=this._tickSize,a=r.config.orientation;return"vertical"===a?o="rotate(-90)translate("+(e=i)+","+(n=r.round(2+t.px.start+t.px.width/2))+")":"horizontal"===a&&(o="translate("+(e=r.round(-i+t.px.start+t.px.width/2))+","+(n=-10)+")"),{x:e,y:n,translate:o}}didRotate(t,e){var n,o,r,i,a,s,c,l,u;o=(n=this._ideo).config.taxid,r=e.id.split("-")[0].replace("chr",""),i=(a=n.chromosomes[o][r]).bands,l=(c=Di.select(e.parentNode)).attr("transform"),u=/scale\(.*\)/.exec(l),l=l.replace(u,""),c.attr("transform",l),s=a.width,(a=n.getChromosomeModel(i,r,o,t)).oldWidth=s,n.chromosomes[o][r]=a,n.drawChromosome(a),n.handleRotateOnClick(),n.rawAnnots&&(n.displayedTrackIndexes?n.updateDisplayedTracks(n.displayedTrackIndexes):(n.annots=n.processAnnotData(n.rawAnnots),n.drawProcessedAnnots(n.annots),n.config.filterable&&n.initCrossFilter())),!0===n.config.showBandLabels&&(n.drawBandLabels(n.chromosomes),n.hideUnshownBandLabels()),n.onDidRotateCallback&&n.onDidRotateCallback(a)}rotate(t,e,n){var o,r,i,a;o=this._ideo,a=o.selector+" .chrSetLabel, "+o.selector+" .chrLabel",i=document.querySelector(o.selector).getBoundingClientRect(),r=Di.selectAll(o.selector+" g.chromosome").filter((function(){return this!==n})),this._isRotated?(this._isRotated=!1,o.config.chrHeight=o.config.chrHeightOriginal,o.config.chrWidth=o.config.chrWidthOriginal,o.config.annotationHeight=o.config.annotationHeightOriginal,this.rotateBack(t,e,n,(function(){r.style("display",null),Di.selectAll(a).style("display",null),o._layout.didRotate(e,n)}))):(this._isRotated=!0,r.style("display","none"),Di.selectAll(a).style("display","none"),this.rotateForward(t,e,n,(function(){var t,r,a;o.config.chrHeightOriginal=o.config.chrHeight,o.config.chrWidthOriginal=o.config.chrWidth,o.config.annotationHeightOriginal=o.config.annotationHeight,"VerticalLayout"===o._layout._class?(r=i.width-20,a=window.innerWidth-20):(r=i.height-10,a=window.innerHeight-10),t=a<r?a:r,t-=2*o.config.chrMargin,o.config.chrHeight=t,o.config.chrWidth*=2.3,o.config.annotationHeight*=1.7,o._layout.didRotate(e,n)})))}getChromosomeLabelClass(){return 1===this._config.ploidy?"chrLabel":"chrSetLabel"}_getAdditionalOffset(){var t=this._config,e=t.annotationsNumTracks||t.numAnnotTracks||1;return(t.annotationHeight||0)*e}_getChromosomeSetSize(t){return this._ploidy.getSetSize(t)*this._config.chrWidth*2+this.chrSetMargin}getChromosomeSetLabelAnchor(){return"middle"}getChromosomeLabelYPosition(){return-5.5}getChromosomeSetLabelYPosition(t){return 1===this._config.ploidy?this.getChromosomeLabelYPosition(t):-2*this._config.chrWidth}},ds=class extends us{constructor(t,e){super(t,e),this._class="VerticalLayout",this.margin={top:30,left:15}}rotateForward(t,e,n,o){var r="translate(20, 25) "+this.getChromosomeScale(n);Di.select(n.parentNode).transition().attr("transform",r).on("end",o);var i=this.getChromosomeLabels(n),a=1.3*(20+this._config.chrWidth);Di.select(this._ideo.getSvg()).append("g").attr("class","tmp").selectAll("text").data(i).enter().append("text").attr("class",(function(t,e){return 0===e&&2===i.length?"chrSetLabel":null})).attr("x",0).attr("y",a).style("opacity",0).text(String).transition().style("opacity",1),this._ideo.config.orientation="horizontal"}rotateBack(t,e,n,o){var r=this.getChromosomeScaleBack(n),i=this.getChromosomeSetTranslate(t);Di.select(n.parentNode).transition().attr("transform",i+" "+r).on("end",o),Di.selectAll(this._ideo.selector+" g.tmp").style("opacity",0).remove(),this._ideo.config.orientation="vertical"}getHeight(){return this._config.chrHeight+1.5*this.margin.top}getWidth(){return"97%"}getChromosomeBandTickY1(){return 2}getChromosomeBandTickY2(){return 10}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeBandLabelAnchor(){return null}getChromosomeScale(t){var e,n;return e=Di.select(this._ideo.selector).node().getBoundingClientRect(),n=t.getBoundingClientRect(),"scale("+e.width/n.height*.97+", "+this._getYScale()+")"}getChromosomeScaleBack(t){var e,n,o;return n=(o=this._ideo.config).taxid,e=t.id.split("-")[0].replace("chr",""),"scale("+this._ideo.chromosomes[n][e].oldWidth/(3*o.chrHeight)*.97+", "+1/this._getYScale()+")"}getChromosomeSetTranslate(t){return"rotate(90) translate("+this.margin.top+", -"+this.getChromosomeSetYTranslate(t)+")"}getChromosomeSetYTranslate(t){var e,n=this._getAdditionalOffset(),o=this._config,r=o.chrMargin,i=o.chrWidth;if(!o.ploidyDesc)return"histogram"===o.annotationsLayout?r+t*(r+i+3)+2*o.barWidth:(e=i+t*(r+i)+2*n+("legendPad"in o?o.legendPad:0),n>0?e:e+4+2*t);if(!this._translate){var a;this._translate=[this._ploidy.getSetSize(0)*i*2];for(var s=1;s<this._config.ploidyDesc.length;s++)a=this._translate[s-1],this._translate[s]=a+this._getChromosomeSetSize(s-1)}return this._translate[t]}getChromosomeSetLabelXPosition(){return this._config.chrWidth*this._config.ploidy/-2}getChromosomeLabelXPosition(){return this._config.chrWidth/-2}},fs=class extends us{constructor(t,e){super(t,e),this._class="HorizontalLayout",this.margin={left:20,top:30}}_getLeftMargin(){var t=us.prototype._getLeftMargin.call(this);return this._config.ploidy>1&&(t*=1.8),t}rotateForward(t,e,n,o){var r;Di.select(n.parentNode).transition().attr("transform","rotate(90) translate(30, -37.5) ").on("end",o),r=this.getChromosomeLabels(n),Di.select(this._ideo.getSvg()).append("g").attr("class","tmp").selectAll("text").data(r).enter().append("text").attr("class",(function(t,e){return 0===e&&2===r.length?"chrSetLabel":null})).attr("x",26).attr("y",(function(t,e){return 12*(e+1+r.length%2)})).style("text-anchor","middle").style("opacity",0).text(String).transition().style("opacity",1),this._ideo.config.orientation="vertical"}rotateBack(t,e,n,o){var r=this.getChromosomeSetTranslate(t);Di.select(n.parentNode).transition().attr("transform",r).on("end",o),Di.selectAll(this._ideo.selector+" g.tmp").style("opacity",0).remove(),this._ideo.config.orientation="horizontal"}getHeight(t){void 0===t&&(t=this._config.taxids[0]);var e=this._config.chromosomes[t].length,n=this.getChromosomeSetYTranslate(e-1);return(n+=this._getChromosomeSetSize(e-1))+2*this._getAdditionalOffset()}getWidth(){return this._config.chrHeight+1.5*this.margin.top}getChromosomeSetLabelAnchor(){return"end"}getChromosomeBandLabelAnchor(){return null}getChromosomeBandTickY1(){return 2}getChromosomeBandTickY2(){return 10}getChromosomeSetLabelTranslate(){return null}getChromosomeSetTranslate(t){return"translate("+this._getLeftMargin()+", "+this.getChromosomeSetYTranslate(t)+")"}getChromosomeSetYTranslate(t){if(!this._config.ploidyDesc)return this._config.chrMargin*(t+1);if(!this._translate){this._translate=[1];for(var e=1;e<this._config.ploidyDesc.length;e++)this._translate[e]=this._translate[e-1]+this._getChromosomeSetSize(e-1)}return this._translate[t]}getChromosomeSetLabelXPosition(t){return 1===this._config.ploidy?this.getChromosomeLabelXPosition(t):-20}getChromosomeSetLabelYPosition(t){var e=this._ploidy.getSetSize(t),n=this._config,o=n.chrMargin,r=n.chrWidth;return 1===n.ploidy?r/2+3:e*o/2}getChromosomeLabelXPosition(){return-8}getChromosomeLabelYPosition(){return this._config.chrWidth}},hs=class extends us{constructor(t,e){super(t,e),this._class="PairedLayout",this.margin={left:30}}getHeight(){return this._config.chrHeight+1.5*this.margin.left}getWidth(){return"97%"}getChromosomeBandTickY1(t){return t%2?this._config.chrWidth:2*this._config.chrWidth}getChromosomeBandTickY2(t){var e=this._config.chrWidth;return t%2?e-this._tickSize:2*e+this._tickSize}getChromosomeBandLabelAnchor(t){return t%2?null:"end"}getChromosomeBandLabelTranslate(t,e){var n=e%2?10:-this._config.chrWidth-10,o=this._ideo.round(t.px.start+t.px.width/2)+3;return{x:o,y:o,translate:"rotate(-90) translate("+n+", "+o+")"}}getChromosomeLabelXPosition(){return-this._tickSize}getChromosomeSetLabelXPosition(){return this._config.chrWidth/-2}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeSetTranslate(t){var e=this.getChromosomeSetYTranslate(t);return"rotate(90) translate("+this.margin.left+", -"+e+")"}getChromosomeSetYTranslate(t){return 200*(t+1)}},ps=class extends us{constructor(t,e){super(t,e),this._class="SmallLayout",this.margin={left:36.5,top:10};var n=this._ideo.getTaxid(this._ideo.config.organism);this.chrs=t.chromosomes[n];var o=this.chrs.length;this.chrsPerRow=Math.ceil(o/t.rows)}getHeight(){var t=1.25*this._config.chrHeight;return this._config.rows*(t+this.margin.top)}getWidth(){return"97%"}getChromosomeBandLabelTranslate(){}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeSetTranslate(t){var e,n;return t>this.chrsPerRow-1?(e=this.margin.left+1.3*this._config.chrHeight,n=this.getChromosomeSetYTranslate(t-this.chrsPerRow)):(e=this.margin.left,n=this.getChromosomeSetYTranslate(t)),"rotate(90) translate("+e+", -"+n+")"}getChromosomeSetYTranslate(t){var e=.3*this._getAdditionalOffset();return this.margin.left*t+this._config.chrWidth+2*e+e*t}getChromosomeSetLabelXPosition(t){return(this._ploidy.getSetSize(t)*this._config.chrWidth+20)/-2+(this._config.ploidy>1?0:this._config.chrWidth)}getChromosomeLabelXPosition(){return this._config.chrWidth/-2}};function ms(t){if(27===t.keyCode){const t=document.querySelector("#_ideogramTooltip");if(!t)return;t.style.opacity=0}}function gs(t){var e=this;e.config.annotationsPath&&e.fetchAnnots(e.config.annotationsPath),function(t){if("ploidyDesc"in t.config&&"string"==typeof t.config.ploidyDesc){for(var e=[],n=0;n<t.numChromosomes;n++)e.push(t.config.ploidyDesc);t.config.ploidyDesc=e}t._ploidy=new cs(t.config)}(e),e._layout=function(t){var e=t.config;return"perspective"in e&&"comparative"===e.perspective?new hs(e,t):"rows"in e&&e.rows>1?new ps(e,t):"vertical"===e.orientation?new ds(e,t):"horizontal"===e.orientation?new fs(e,t):new ds(e,t)}(e),function(t){Di.selectAll(t.config.container+" #_ideogramOuterWrap").remove(),Di.select(t.config.container).append("div").attr("id","_ideogramOuterWrap").append("div").attr("id","_ideogramTrackLabelContainer").style("position","absolute"),Di.select(t.config.container+" #_ideogramOuterWrap").append("div").attr("id","_ideogramMiddleWrap").style("position","relative").style("overflow-x","auto").style("transform","translateZ(0)").append("div").attr("id","_ideogramInnerWrap").append("svg").attr("id","_ideogram").attr("class",function(t){var e="";return t.config.showChromosomeLabels&&("horizontal"===t.config.orientation?e+="labeledLeft ":e+="labeled "),!1===t.config.rotatable&&(e+="no-rotate "),t.config.annotationsLayout&&"overlay"===t.config.annotationsLayout&&(e+="faint"),e}(t)).attr("width",t._layout.getWidth()).attr("height",t._layout.getHeight()).html(t.getBandColorGradients())}(e),e.isOnlyIdeogram=1===document.querySelectorAll("#_ideogram").length,function(t){Di.select(t.config.container+" #_ideogramOuterWrap").append("div").attr("class","_ideogramTooltip").attr("id","_ideogramTooltip").style("opacity",0).style("position","fixed").style("text-align","center").style("padding","4px").style("font","12px sans-serif").style("background","white").style("border","1px solid black").style("border-radius","5px").style("z-index","1000").style("margin-left","-2px"),document.removeEventListener("keydown",ms),document.addEventListener("keydown",ms)}(e),e.finishInit(t)}var ys="";function vs(t,e,n){return n.config.dataDir+t[e]}function bs(t,e,n){var o=n.config.ploidy;return"sex"in n.config&&(2===o&&n.sexChromosomes.index+1===e||"female"===n.config.sex&&"Y"===t.name)}function ws(t,e,n,o){var r,i,a,s,c;for(r=0;r<e.length;r++)a=e[r],void 0!==t&&(i=t[r]),c=r+o.config.taxids.indexOf(n),s=o.getChromosomeModel(i,a,n,c),"string"!=typeof a&&(a=a.name.split(" ").slice(-1)[0].replace("chr","")),o.chromosomes[n][a]=s,o.chromosomesArray.push(s),bs(s,r,o)||o.drawChromosome(s)}function xs(t,e){"undefined"!=typeof chrBands&&t.length>=chrBands.length/2&&(e.coordinateSystem="bp")}function _s(){var t,e,n,o,r=this,i=r.config.taxids;for(e=0;e<i.length;e++)t=i[e],n=r.config.chromosomes[t],o=r.bandsArray[t],r.config.showNonNuclearChromosomes||(n=n.filter((t=>"MT"!==t)),void 0!==o&&(o=o.filter((t=>"MT"!==t[0].chr)))),xs(n,r),r.chromosomes[t]={},r.setSexChromosomes(n),ws(o,n,t,r),r.config.showBandLabels&&r.drawBandLabels(r.chromosomes),r.handleRotateOnClick(),r._gotChrModels=!0}function As(){var t=this;"rotatable"in t.config&&!1===t.config.rotatable?Di.selectAll(t.selector).style("cursor","default"):Di.selectAll(t.selector+" .chromosome-set").on("click",(function(){const e=this.children[1];t.rotateAndToggleDisplay(e)}))}function Cs(){call(this.onLoadCallback)}function Ss(t,e,n){var o=n.organisms[t],r=[zi(o.scientificName)],i=o.assemblies,a=n.config.resolution;return e!==i.default&&r.push(e),"9606"===t&&(e in i==="false"&&Object.values(i).includes(config.assembly)||""!==a&&850!==a)&&r.push(a),r=r.join("-"),["9606","10090","10116"].includes(t)&&!n.config.showFullyBanded&&(r+="-no-bands"),r+".json"}function Ls(t,e,n){var o,r,i,a=n.config;o=n.organisms[t],a.assembly||(n.config.assembly="default"),r=o.assemblies,i=Ss(t,n.assemblyIsAccession()?a.assembly:r[a.assembly],n);var s="-1"===t;return(t in n.organismsWithBands||s)&&(e[t]=i),e}function Ts(t,e,n,o){return function(t,e,n){var o=vs(t,e,n);return(!(void 0!==window.chrBands&&""===ys)||ys!==o)&&function(t){return"assembly"in t.config&&!1===/(GCA_)/.test(t.config.assembly)}(n)&&e in t}(e,t,o)?function(t,e,n,o){var r=vs(t,e,o);return o.numBandDataResponses||(o.numBandDataResponses=0),Bi(r).then((function(e){return e.json().then((function(n){ys=r,delete window.chrBands,window.chrBands=n.chrBands,function(t,e,n,o){var r,i,a;for(r in e)a=e[r],t.includes(a)&&""!==a&&(i=r);o.bandData[i]=n}(e.url,t,chrBands,o)}))}))}(e,t,0,o).then((function(){return o.processBandData(t)})):new Promise((function(e){o.processBandData(t),e([t,void 0])}))}var ks={},Ms={},Es={};function Ps(t){var e=(t=t||this).config.container;Es[e]?(Ms[e]=!0,ks[e]=t):(Es[e]=!0,function(t){return new Promise((function(e){var n=t.config.organism;"number"==typeof n?t.getOrganismFromEutils(n,(function(){t.getTaxids(e)})):t.getTaxids(e)}))}(t).then((function(n){var o=n[0];t.config.taxid=o,t.config.taxids=n,t.organismScientificName=t.getScientificName(t.config.taxid),function(t,e,n){var o,r,i,a=[];for(i in o={},Pi)o[i]="";for(r=0;r<t.length;r++)o=Ls(i=String(t[r]),o,n),a.push(Ts(i,o,0,n));Promise.all(a).then((function(t){var o,i,a;for(r=0;r<t.length;r++)i=(o=t[r])[0],a=o[1],"bandsArray"in n==0&&(n.bandsArray={}),n.bandsArray[i]=a;n.writeContainer(e)}))}(n,(new Date).getTime(),t),Es[e]=!1,Ms[e]&&(Ms[e]=!1,Ps(ks[e]))})))}class Ds{constructor(t,e){this.rawAnnots=this.parseBed(t,e)}static componentToHex(t){var e=parseInt(t,10).toString(16);return 1===e.length?"0"+e:e}static rgbToHex(t,e,n){return"#"+Ds.componentToHex(t)+Ds.componentToHex(e)+Ds.componentToHex(n)}parseGenomicCoordinates(t,e){var n,o,r,i;return n=t[0],o=parseInt(t[1],10),i=(r=parseInt(t[2],10))-o,e&&(n=n.slice(3)),[n,o,r,i]}parseAnnotFromTsvLine(t,e,n){var o,r,i,a,s,c,l,u=t.split(/\s/g);return[i,a,stop,length]=this.parseGenomicCoordinates(u,n),-1===(r=e.indexOf(i))?[null,null]:(o=["",a,length,0],u.length>=4&&(l=u[3],o[0]=l),u.length>=8&&(s=u[8].split(","),c=Ds.rgbToHex(s[0],s[1],s[2]),o.push(c)),[r,o])}parseRawAnnots(t,e,n,o){var r,i,a,s,c,l;for(l=!0,!1===isNaN(parseInt(n[e],10))&&(l=!1),r=e;r<n.length;r++)i=n[r],[a,s]=this.parseAnnotFromTsvLine(i,o,l),null!==a&&t[a].annots.push(s);return c=["name","start","length","trackIndex"],n[e].length>=8&&c.push("color"),{keys:c,annots:t}}parseBed(t,e){var n,o,r,i,a=[],s=t.split(/\r\n|\n/);for(o=Object.keys(e.chromosomes[e.config.taxid]),n=0;n<o.length;n++)r=o[n],a.push({chr:r,annots:[]});return i=0,("chr"===s[0].slice(0,3)||isNaN(parseInt(s[0],10)))&&(i=1),this.parseRawAnnots(a,i,s,o)}}class Ns{constructor(t,e){this.rawAnnots=this.parseTsv(t,e)}parseGenomicCoordinates(t){return[t[1],parseInt(t[2],10),parseInt(t[3],10)]}parseTsv(t,e){const n=t.split(/\r\n|\n/),o=Object.keys(e.chromosomes[e.config.taxid]),r=[];for(let t=0;t<o.length;t++){const e=o[t];r.push({chr:e,annots:[]})}let i;const a={},s=[];for(let t=0;t<n.length;t++){const e=n[t];if(""===e)continue;if("#"===e[0]){if("#"===e[1]){const t=e.split(" keys: ");if(t.length>1){const e=t[0].slice(3),n=t[1].split(";");a[qi(e)]=n}}else i=e.slice(1).trim().split(/\t/).map((t=>qi(t))),i.slice(4).forEach(((t,e)=>s.push(qi(t))));continue}const c=e.trim().split(/\t/),l=c[0],[u,d,f]=this.parseGenomicCoordinates(c),h=o.indexOf(u);if(-1===h)continue;const p=c.slice(4);for(let t=0;t<4;t++){const e=s[t];if(e in a){const n=a[e],o=c[4+t].split(";"),r=[];if(""!==o[0])for(let t=0;t<o.length;t++){const e={},i=o[t].split("!");for(let t=0;t<i.length;t++){const o=n[t],r=i[t];e[qi(o)]=r}r.push(e)}p[t]=r}}const m=[l,u,d,f].concat(p);m.push(t),r[h].annots.push(m)}return i.push("initRank"),{keys:i,annots:r,innerKeysByField:a}}}var Fs=["name","start","length","trackIndex","trackIndexOriginal","color"],Bs={3:["00B","DDD","F00"],5:["00D","66D","DDD","F88","F00"],17:["00D","00D","00D","00D","00D","44D","44D","DDD","DDD","DDD","DDD","F88","F66","F22","F22","F00","F00","F00"]};function Is(t){var e,n,o;if(t.rawAnnots.metadata&&t.rawAnnots.metadata.trackLabels)e=t.rawAnnots.metadata.trackLabels;else if(t.config.heatmaps)for(e=[],n=t.config.heatmaps,o=0;o<n.length;o++)e.push(n[o].key);else e=t.rawAnnots.keys.slice(0).filter((t=>!Fs.includes(t)));return t.displayedTrackIndexes&&(e=e.filter((function(e,n){return t.displayedTrackIndexes.includes(n+1)}))),e}function $s(t){var e,n,o=t.rawAnnots;if(!o.metadata||o.metadata.heatmapThresholds||t.config.heatmapThresholds)return e=t.config.heatmapThresholds?t.config.heatmapThresholds:t.rawAnnots.metadata.heatmapThresholds,n=Bs[e.length+1],e=e.map(((t,e)=>[t,"#"+n[e]])),e.push(["+","#"+n.slice(-1)[0]]),e}function Os(t,e,n,o,r){return t===e&&"+"===r&&n>o||n===r||0!==t&&t!==e&&n<=r&&n>o||0===t&&n<=r}function Rs(t,e){var n,o,r,i,a,s,c,l;for(n=0;n<t.length;n++)o=t.length-1,i=(r=t[n])[0],a=parseFloat(i),!1===isNaN(a)&&(i=a),0!==n&&(c=parseFloat(t[n-1][0])),s=r[1],Os(n,o,e,c,i)&&(l=s);return l}function Hs(t,e,n){var o,r,i,a,s,c=t.width,l=[],u=n.config.annotLabelHeight,d=n.config.numAnnotTracks;for(o=0;o<d;o++)i=n.config.annotationHeight+u+4,s=t.id+"-canvas-"+o,r=e,t.chrIndex>0&&(r+=n.config.chrMargin*t.chrIndex-1),a=Di.select(n.config.container+" #_ideogramInnerWrap").append("canvas").attr("id",s).attr("width",c+1).attr("height",i).style("position","absolute").style("left",r+"px").style("top",i*o+1+"px").nodes()[0].getContext("2d"),l.push([a,t]);return l}function Gs(t,e,n){var o,r,i,a,s=n.config.annotLabelHeight,c=n.config.annotationHeight,l=n.config.demarcateCollinearChromosomes,u=c+s+4;for(o=0;o<t.length;o++)if(i=e[(r=t[o]).trackIndex][0],a=e[r.trackIndex][1],i.fillStyle=r.color,l){if(r.startPx<1||r.startPx>a.width-1)continue;i.fillRect(r.startPx,1,.5,u)}else i.fillRect(r.startPx,s+1,.5,c);if(l)for(o=0;o<e.length;o++)i=e[o][0],a=e[o][1],i.fillStyle="#555",0===a.chrIndex&&i.fillRect(0,0,1,u),i.fillRect(a.width-1,0,1.1,u),i.fillRect(0,0,a.width+1,1),n.config.chrMargin&&i.fillRect(0,0,1.1,u)}function Ws(t,e,n){var o,r,i,a=n.config.annotationHeight,s=n._layout.margin.top;for(i=t.values,o=0;o<i.length;o++)e.fillStyle=i[o],r=(o-1)*a,e.fillRect(r,t.startPx+s,a,2)}function js(t,e,n,o,r,i,a){var s,c,l,u,d,f,h,p=a.config.heatmapThresholds;for(s=0;s<n.annots.length;s++){for(u=n.annots[s],(l={}).values=[],c=0;c<3;c++)l[i[c]]=u[c];for(c=3;c<i.length;c++)h=Rs(p,u[c]),l.values.push(h);d=l.start+l.length,l.chr=n.chr,l.chrIndex=r,l.startPx=a.convertBpToPx(o,l.start),f=a.convertBpToPx(o,d),l.px=Math.round((l.startPx+f)/2),t.push(l)}return t.shift(),[t,e]}function qs(t){!1!==t.config.showTrackLabel&&(t.hideTrackLabelTimeout=window.setTimeout((function(){Di.select(t.config.container+" #_ideogramTrackLabel").transition().duration(500).style("opacity",0)}),250))}function zs(t,e,n,o){var r,i,a,s,c,l=[],u=o.config.numAnnotTracks;for(r=0;r<u;r++)a=o.config.annotationHeight,c=t.id+"-canvas-"+r,i=e-a*(u-r)-7,s=Di.select(o.config.container+" #_ideogramInnerWrap").append("canvas").attr("id",c).attr("width",a).attr("height",n).style("position","absolute").style("left",i+"px").nodes()[0].getContext("2d"),l.push(s);return l}function Us(t,e,n,o){var r,i,a,s;for(r=0;r<t.length;r++)(a=e[(i=t[r]).trackIndex]).fillStyle=i.color,s=i.trackIndex-1,a.fillRect(s,i.startPx+o,n,.5)}function Vs(t){var e,n,o,r,i=this,a=i.config,s=i._layout.margin.top,c=a.chrHeight+s;if("collinear"===a.geometry)return function(t,e){var n,o,r,i,a=0,s=e.config.showChromosomesLabels?2:-.1;for(Di.select(e.selector).classed("labeledLeft",!1),Di.selectAll(e.config.container+" canvas").remove(),r=0;r<t.length;r++)n=t[r].annots,i=e.chromosomesArray[r],0===r?o=12:(o=a+e.chromosomesArray[r-1].width+14,a+=e.chromosomesArray[r-1].width+s),Gs(n,Hs(i,o,e),e);(function(t){!function(t,e){var n,o,r,i,a=e.config.annotLabelHeight;for(i=e.config.demarcateCollinearChromosomes?2:0,(r=Di.select(e.config.container+" #_ideogramTrackLabelContainer")).html(""),o=e.config.annotationHeight+a+4,n=0;n<t.length;n++)r.style("position","absolute").append("div").attr("class","_ideogramTrackLabel").style("opacity",1).style("position","absolute").style("text-align","center").style("padding","1px").style("font","11px sans-serif").style("background","white").style("line-height","10px").style("z-index","5").style("left",11+i+"px").style("top",o*n+i+"px").style("width","max-content").style("transform-origin","bottom left").style("text-align","left").html(t[n])}(Is(t),t)})(e),e.onDrawAnnotsCallback&&e.onDrawAnnotsCallback()}(t,i);if("heatmap-2d"===a.annotationsLayout)return function(t,e){var n,o,r=e.config.container,i=e._layout.margin.top,a=e.config.chrHeight+i,s=e.config.annotationHeight*t[0].values.length;for(Di.selectAll(r+" canvas").remove(),Di.select(r+" #_ideogramInnerWrap").style("max-width",s+"px"),Di.select(r+" #_ideogram").attr("width",s),n=function(t,e,n,o){var r,i;return i=t.id+"-canvas",r=2*o.config.chrWidth+o.config.annotationHeight-.5,Di.select(o.config.container+" #_ideogramInnerWrap").append("canvas").attr("id",i).attr("width",n).attr("height",e).style("position","absolute").style("left",r+"px").style("top","0px").nodes()[0].getContext("2d")}(e.chromosomesArray[0],a,s,e),o=0;o<t.length;o++)Ws(t[o],n,e);e.onDrawAnnotsCallback&&e.onDrawAnnotsCallback()}(t,i);for(Di.selectAll(i.config.container+" canvas").remove(),function(t){Di.select(t.config.container+" #_ideogramTrackLabelContainer").append("div").attr("id","_ideogramTrackLabel").style("opacity",0).style("position","absolute").style("text-align","center").style("padding","1px").style("font","11px sans-serif").style("background","white").style("line-height","10px").style("z-index","9000")}(i),o=0;o<t.length;o++)e=t[o].annots,r=i.chromosomesArray[o],n=i.config.chrWidth,Us(e,zs(r,i._layout.getChromosomeSetYTranslate(o),c,i),n,s);Di.selectAll(i.config.container+" canvas").on("mouseover",(function(){!function(t,e){var n,o,r;clearTimeout(e.hideTrackLabelTimeout),n=(n=Is(e)).join("<br>"),Di.select(e.config.container+" #_ideogramTrackLabel").interrupt().style("top","").style("left","").style("transform",null).style("transform","rotate(-90deg)").html(n),[o,r]=function(t,e,n){var o,r,i,a,s;return o=e.id.split("-").slice(0,-1).join("-")+"-0",r=Di.select(n.config.container+" #"+o).nodes()[0].getBoundingClientRect(),i=Di.select(n.config.container+" #_ideogramTrackLabel").nodes()[0].getBoundingClientRect(),a=Di.select(n.config.container).nodes()[0].getBoundingClientRect(),s=Math.round(r.left+i.width)-r.width-1,[s-=a.left-7,-(t.split("<br>").length-2)*r.width+2]}(n,t,e),function(t,e,n){Di.select(n.config.container+" #_ideogramTrackLabel").style("opacity",1).style("left",e+"px").style("top",t+"px").style("width","max-content").style("transform-origin","bottom left").style("text-align","left").on("mouseover",(function(){clearTimeout(n.hideTrackLabelTimeout)})).on("mouseout",(function(){qs(n)}))}(r,o,e)}(this,i)})).on("mouseout",(function(){qs(i)})),i.onDrawAnnotsCallback&&i.onDrawAnnotsCallback()}function Ys(t,e,n){var o,r,i,a,s,c,l,u=[];for(o=0;o<e.length;o++)for(i=e[o],r=0;r<t.length;r++)a=i.slice(0,3),s=i[t[r]],c=Rs(n.config.heatmaps[r].thresholds,s),l=r,a.push(l,c,s),u.push(a);return u}function Xs(t){var e,n,o,r,i=(new Date).getTime(),a=t.keys,s=t.annots,c=this;for(o=[],r=0;r<c.config.heatmaps.length;r++)n=c.config.heatmaps[r].key,o.push(a.indexOf(n));e=function(t,e,n){var o,r,i,a,s=[];for(a=0;a<e.length;a++)r=(o=e[a]).chr,i=Ys(t,o.annots,n),s.push({chr:r,annots:i});return s}(o,s,c),a.splice(3,0,"trackIndex"),a.splice(4,0,"color"),c.rawAnnots.keys=a,c.rawAnnots.annots=e,function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in deserializeAnnotsForHeatmap: "+(n-t)+" ms")}(i,c)}function Ks(){call(this.onLoadAnnotsCallback)}function Qs(){call(this.onDrawAnnotsCallback)}function Js(){Di.select("._ideogramTooltip").transition().duration(500).style("opacity",0).style("pointer-events","none")}function Zs(){const t=this;if(!1===t.config.showAnnotTooltip)return;const e=t.oneTimeDelayTooltipHideMs??250;delete t.oneTimeDelayTooltipHideMs,t.hideAnnotTooltipTimeout=window.setTimeout((function(){Js()}),e),t.isTooltipCooling=!0,t.hideAnnotTooltipCounter=window.setTimeout((function(){t.isTooltipCooling=!1}),500)}function tc(t){call(this.onWillShowAnnotTooltipCallback,t)}function ec(){call(this.onDidShowAnnotTooltipCallback)}function nc(t){this.prevClickedAnnot=t,this.onClickAnnotCallback(t)}function oc(t,e){var n,o,r,i,a=Number(e.getAttribute("cx")),s=Number(e.getAttribute("cy")),c=this;!1!==c.config.showAnnotTooltip&&(clearTimeout(c.hideAnnotTooltipTimeout),c.onWillShowAnnotTooltipCallback&&(t=c.onWillShowAnnotTooltipCallback(t)),null!==t?(c.prevTooltipAnnotName=t.name,(i=Di.select("._ideogramTooltip")).interrupt(),n=e.getScreenCTM().translate(a,s),[o,r]=function(t,e=!1){var n,o,r;return r="chr"+t.chr+":"+t.start.toLocaleString(),t.displayCoordinates?r=t.displayCoordinates:t.length>0&&(r+="-"+t.stop.toLocaleString(),e&&(r+=" ("+function(t){const e=Math.abs(t.stop-t.start);return n=e,((o=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(t){return n>=t.value})))?(n/o.value).toFixed(void 0).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+" "+o.symbol:"0")+"bp";var n,o}(t)+")")),n=`<span class="_ideoTooltipFooter"><br />${r}</span>`,o=24,t.name&&(n=(t.displayName?t.displayName:t.name)+n,o+=8),[n,o]}(t,!0),function(t,e,n,o,r){t.html(e).style("opacity",1).style("left",n.e+"px").style("top",n.f-o+"px").style("font-family",r.config.fontFamily).style("pointer-events",null).on("mouseover",(function(){clearTimeout(r.hideAnnotTooltipTimeout)})).on("mouseout",(function(){r.startHideAnnotTooltipTimeout()}))}(i,o,n,r,c),c.onDidShowAnnotTooltipCallback&&c.onDidShowAnnotTooltipCallback()):Js())}function rc(t){return"ideogramLabel_"+t.domId}function ic(t,e,n){Di.selectAll("._ideoActive").classed("_ideoActive",!1),Di.select("#"+e).attr("class","_ideogramLabel "+t),Di.select("#"+n+" > path").attr("class",t)}function ac(t,e){let n,o;const r=t.target,i=t.type;if(Array.from(r.classList).includes("_ideogramLabel"))n=r.id,o=r.id.split("ideogramLabel_")[1],Di.select("#"+o+" path").dispatch(i);else{const t=r.parentElement;n="ideogramLabel_"+t.id,o=t.id}"mouseout"===i&&(e.time.prevTooltipOff=performance.now(),e.time.prevTooltipAnnotDomId=o),"mouseover"===i?(clearTimeout(window._ideoActiveTimeout),ic("_ideoActive",n,o)):window._ideoActiveTimeout=window.setTimeout((function(){ic("",n,o)}),250)}function sc(t,e){var n,o=!1;return e.annots.forEach((e=>{o||e.annots.forEach((e=>{o||e.name===t&&(n=e,o=!0)}))})),n}function cc(t,e){var n,o,r,i,a,s,c,l,u,d=e.config;return null===(n=document.querySelector("#"+t.domId))?null:(o=n.getBoundingClientRect(),r=document.querySelector("#_ideogram").getBoundingClientRect(),i=Xi(t.name,e).width,i+=d.fontFamily?9:7,a=d.annotLabelSize?d.annotLabelSize:13,c=(s=o.top-r.top+a-1)+a,u=(l=o.left-r.left-i)+i,name=t.name,{top:s,bottom:c,right:u,left:l,width:i,height:a,name})}function lc(t,e,n){var o,r=this;const i=cc(o=sc(t,r),r);null!==i&&function(t,e,n){n.didSetLabelStyle||(document.querySelector("#_ideogramInnerWrap").insertAdjacentHTML("afterbegin","\n  <style>\n    #_ideogram .annot path, ._ideogramLabel {\n      cursor: pointer;\n    }\n\n    #_ideogram .annot path {\n      stroke-width: 1px;\n      stroke: white;\n      stroke-linejoin: bevel;\n    }\n\n    #_ideogram ._ideogramLabel._ideoActive {\n      fill: #77F !important;\n      stroke: #F0F0FF !important;\n    }\n\n    #_ideogram .annot > ._ideoActive {\n      stroke: #D0D0DD !important;\n      stroke-width: 1.5px;\n    }\n\n    #_ideogram ._ideogramLabel {\n      stroke: white;\n      stroke-width: 5px;\n      stroke-linejoin: round;\n      paint-order: stroke fill;\n      text-align: center;\n    }\n  </style>\n  "),n.didSetLabelStyle=!0);const o=rc(t),r=Yi(n);let i="pink"===t.color?"#CF406B":t.color;i=Ji(i),Di.select("#_ideogram").append("text").attr("id",o).attr("class","_ideogramLabel").attr("x",e.left).attr("y",e.top).style("font",r).style("fill",i).style("pointer-events",null).html(t.name)}(o,Object.assign(i,{backgroundColor:e,borderColor:n}),r)}function uc(t=[],e=10){const n=this;t=function(t){return JSON.parse(JSON.stringify(t))}(t),n.clearAnnotLabels();let o=[];const r=[];0===t.length&&(t=n.flattenAnnots()),t.forEach(((t,e)=>{const i=cc(t,n);null!==i?r.length>0&&r.some(((t,e)=>{const n=function(t,e,n){const o=t.left-0,r=e.left-0,i=t.right+0,a=e.right+0;return o<=r&&o<=a&&i<=a&&i>=r||o>=r&&o<=a&&i>=a&&i>=r||o<=r&&o<=a&&i>=a&&i>=r||o>=r&&o<=a&&i>=r&&i<=a}(t,i),o=function(t,e,n){const o=t.top-0,r=e.top-0,i=t.bottom+0,a=e.bottom+0;return o<=r&&o<=a&&i<=a&&i>=r||o>=r&&o<=a&&i>=a&&i>=r}(t,i);return n&&o}))||(o.push(t),r.push(i)):console.debug(t.name+" has null layout")}));const i=n.config;"relatedGenesMode"in i&&["hints"].includes(i.relatedGenesMode)&&(e=20),o=o.sort(n.annotSortFunction).slice(0,e),o.reverse(),o.forEach((t=>{n.addAnnotLabel(t.name)})),Di.selectAll("._ideogramLabel, .annot").on("mouseover",(t=>ac(t))).on("mouseout",(t=>ac(t,n))).on("click",(t=>ac(t)))}function dc(t){const e=rc(sc(t,this));document.querySelector("#"+e).remove()}function fc(){document.querySelectorAll("._ideogramLabel").forEach((t=>{t.remove()}))}function hc(t){var e,n,o=!1,r=(new Date).getTime(),i=this;return e=i.chromosomes[i.config.taxid],function(t){"histogramScaling"in t.config==0&&(t.config.histogramScaling="absolute")}(i),void 0===i.maxAnnotsPerBar&&(i.maxAnnotsPerBar={},o=!0),n=function(t,e){var n,o,r,i,a,s,c,l,u=e.config.barWidth,d=[];for(s=0;s<e.chromosomesArray.length;s++){for(r=(o=t[n=e.chromosomesArray[s].name]).bands[o.bands.length-1],i=Math.round(r.px.stop/u),a={chr:n,annots:[]},c=0;c<i;c++)l=c*u-e.bump,a.annots.push({bp:e.convertPxToBp(o,l+e.bump),px:l,count:0,chrIndex:o.chrIndex,chrName:n,color:e.config.annotationsColor,annots:[]});d.push(a)}return d}(e,i),n=function(t,e,n,o){var r,i,a,s,c,l,u,d,f,h,p=o.config.barWidth;for(s=0;s<t.length;s++)for(r=t[s].annots,a=e[(i=n[t[s].chr]).chrIndex].annots,c=0;c<r.length;c++)for(u=(l=r[c]).px-o.bump,d=0;d<a.length;d++)if(h=(f=a[d].px)+p,d===a.length-1&&(h+=p),u>=f&&u<h){e[i.chrIndex].annots[d].count+=1,e[i.chrIndex].annots[d].annots.push(l);break}return e}(t,n,e,i),function(t,e,n){var o,r,i,a,s,c,l;if(e||"relative"===n.config.histogramScaling){for(o=0,r=0;r<t.length;r++){for(i=0,a=t[r].annots,s=t[r].chr,c=0;c<a.length;c++)(l=a[c].count)>i&&(i=l),l>o&&(o=l);n.maxAnnotsPerBar[s]=i}n.maxAnnotsPerBarAllChrs=o}}(n,o,i),n=function(t,e){var n,o,r,i,a,s,c,l=e._layout._isRotated;for(n=0;n<t.length;n++)for(o=t[n].annots,r=t[n].chr,i=0;i<o.length;i++)a=o[i].count,s="relative"===e.config.histogramScaling?a/e.maxAnnotsPerBar[r]:a/e.maxAnnotsPerBarAllChrs,c=!1===l?s*e.config.chrMargin:s*e.config.chrHeightOriginal*3,isNaN(c)&&(c=0),t[n].annots[i].height=c;return t}(n,i),function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time spent in getHistogramBars: "+(n-t)+" ms")}(r,i),i.bars=n,n}var pc="#_ideogramLegend {font: 12px Arial; overflow: auto; cursor: default;} #_ideogramLegend svg {float: left;} #_ideogramLegend ul {position: relative; left: -14px; list-style: none; float: left; padding-left: 10px; margin: 0 0 1em 0; width: auto; border: none;} #_ideogramLegend li {float: none; margin: 0;}#_ideogramLegend ul span {position: relative; left: -15px;} ";function mc(t,e){var n,o='fill="'+t.color+'" style="stroke: #AAA;"',r=t.shape;if("shape"in t&&["circle","triangle"].includes(r)){if("circle"===r)n='<path d="m2,9a 4.5,4.5 0 1,0 9,0a 4.5,4.5 0 1,0 -9,0" '+o+"></path>";else if("triangle"===r){var i="";"vertical"===e.config.orientation&&(i=' transform="rotate(90, 7, 7)"'),"down"===e.config.orientation&&(i=' transform="rotate(180, 7, 7)"'),n='<path d="m7,3 l -5 9 l 9 0 z"'+i+" "+o+"></path>"}}else n='<rect height="10" width="10" y="3" '+o+"/>";return n}function gc(t,e,n,o,r){var i,a,s,c=yc(r);for(i=0;i<n.rows.length;i++)t+='<li class="_ideoLegendEntry">'+(s=n.rows[i]).name+"</li>",a=c*(i-1)+o+1,"name"in n&&(a+=c),e+='<g transform="translate(0, '+a+')">'+mc(s,r)+"</g>";return[t,e]}function yc(t){return 2*$i(Xi("A",t).height)+.5}function vc(t){var e,n,o,r,i,a,s=t.config,c=yc(t);for(Di.select(s.container+" #_ideogramLegend").remove(),n=s.legend,a="",e=0;e<n.length;e++){let s=c;(i=n[e]).nameHeight&&(s=i.nameHeight);let l="";s&&(l=`style="height: ${s}px; position: relative; left: -${s-5}px;"`),"name"in i&&(r=`<li class="_ideoLegendName" ${l}>`+i.name+"</li>"),o='<svg id="_ideogramLegendSvg" width="'+c+'">',[r,o]=gc(r,o,i,s,t),a+=(o+="</svg>")+"<ul>"+r+"</ul>"}var l=`font-family: ${s.fontFamily};`,u=`line-height: ${yc(t)}px;`;pc+=`#_ideogramLegend {${l} ${u}}`;var d=Di.select(s.container+" #_ideogramOuterWrap");d.append("style").html(pc),d.append("div").attr("id","_ideogramLegend").html(a)}function bc(t,e,n=!1,o=!1){var r,i,a=[],s=this,c=s.chromosomes[s.config.taxid];if(0===t.length)return void(s.annots=[]);if("annots"in t[0]||"values"in t[0])return s.drawProcessedAnnots(t,e);for(i in c)a.push({chr:i,annots:[]});a=function(t,e){var n,o,r,i;for(n=0;n<t.length;n++)for(r=t[n],o=0;o<e.length;o++)if(r.chr===e[o].chr){i=[r.name,r.start,r.stop-r.start],"color"in r&&i.push(r.color),"shape"in r&&i.push(r.shape),e[o].annots.push(i);break}return e}(t,a),r=function(t){var e=["name","start","length"];return"color"in t[0]&&e.push("color"),"shape"in t[0]&&e.push("shape"),e}(t),s.rawAnnots={keys:r,annots:a};const l=s.processAnnotData(s.rawAnnots);o?s.annotsOther=l:s.annots=l,s.drawProcessedAnnots(l,e,n)}function wc(t,e,n=!1){var o=this;o.onBeforeDrawAnnotsCallback&&o.onBeforeDrawAnnotsCallback(),n||Di.selectAll(o.selector+" .annot").remove(),void 0===e&&(e="tracks"),o.config.annotationsLayout&&(e=o.config.annotationsLayout),"legend"in o.config&&vc(o),/heatmap/.test(e)?o.drawHeatmaps(t):(function(t,e,n){var o;!function(t,e){var n,o;if(!/heatmap/.test(t)&&"histogram"!==t){for(o=0,n=0;n<e.length;n++)o+=e[n].annots.length;o>2e3&&console.warn('Rendering more than 2000 annotations in Ideogram?\nTry setting "annotationsLayout" to "heatmap" or "histogram" in your Ideogram configuration object for better layout and performance.')}}(t,e),"histogram"===t&&(e=n.getHistogramBars(e)),o=function(t,e){return Di.selectAll(e.selector+" .chromosome").data(t).selectAll("path.annot").data((function(t){return t.annots})).enter()}(n.fillAnnots(e),n),"tracks"===t?function(t,e){var n,o=e.config.annotationHeight;n=function(t){var e;return{triangle:"m0,0 l -"+t+" "+2*t+" l "+2*t+" 0 z",circle:"m -"+(e=t)+", "+e+"a "+e+","+e+" 0 1,0 "+2*e+",0a "+e+","+e+" 0 1,0 -"+2*e+",0",rectangle:"m0,0 l 0 "+2*t+"l "+t+" 0l 0 -"+2*t+"z"}}(o),t.append("g").attr("id",(function(t){return t.domId})).attr("class","annot").attr("transform",(function(t){var n=e.config.chrWidth+t.trackIndex*o*2;return"translate("+t.px+","+n+")"})).append("path").attr("d",(function(t){return function(t,e){return t.shape&&"triangle"!==t.shape?"circle"===t.shape?e.circle:"rectangle"===t.shape?e.rectangle:t.shape:e.triangle}(t,n)})).attr("fill",(function(t){return t.color})).on("mouseover",(function(t,n){e.showAnnotTooltip(n,this)})).on("mouseout",(function(){e.startHideAnnotTooltipTimeout()})).on("click",(function(t,n){e.onClickAnnot(n)}))}(o,n):"overlay"===t?function(t,e){t.append("polygon").attr("id",(function(t){return t.id})).attr("class","annot").attr("points",(function(t){var n,o,r=e.config.chrWidth;return t.stopPx-t.startPx>1?(n=t.startPx,o=t.stopPx):(n=t.px-.5,o=t.px+.5),n+","+r+" "+o+","+r+" "+o+",0 "+n+",0"})).attr("fill",(function(t){return t.color})).on("mouseover",(function(t,n){e.showAnnotTooltip(n,this)})).on("mouseout",(function(){e.startHideAnnotTooltipTimeout()}))}(o,n):"histogram"===t&&function(t,e){var n,o,r={},i=e.config.chrWidth;for(o in n=e.chromosomes[e.config.taxid])r[o]=n[o];t.append("polygon").attr("class","annot").attr("points",(function(t){return function(t,e,n,o){var r,i,a,s;r=t.px+o.bump,i=t.px+o.config.barWidth+o.bump,a=e,s=e+t.height;var c=n[t.chr];return i>c&&(i=c),r+","+a+" "+i+","+a+" "+i+","+s+" "+r+","+s}(t,i,r,e)})).attr("fill",(function(t){return t.color}))}(o,n)}(e,t,o),o.onDrawAnnotsCallback&&o.onDrawAnnotsCallback())}function xc(t,e,n){return t.append("g").attr("class","syntenicRegion").attr("id",e).on("click",(function(){var t=this,e=Di.selectAll(n.selector+" .syntenicRegion").filter((function(){return this!==t}));e.classed("hidden",!e.classed("hidden"))})).on("mouseover",(function(){var t=this;Di.selectAll(n.selector+" .syntenicRegion").filter((function(){return this!==t})).classed("ghost",!0)})).on("mouseout",(function(){Di.selectAll(n.selector+" .syntenicRegion").classed("ghost",!1)}))}function _c(t,e,n,o,r,i){var a,s;a="color"in i?i.color:"#CFC",s="opacity"in i?i.opacity:1,t.append("polygon").attr("points",e+", "+o.startPx+" "+e+", "+o.stopPx+" "+n+", "+r.stopPx+" "+n+", "+r.startPx).style("fill",a).style("fill-opacity",s)}function Ac(t,e,n,o,r,i){var a,s;a="color"in i?i.color:"#CFC",s="opacity"in i?i.opacity:1,t.append("polygon").attr("points",o.startPx-15+", "+e+" "+(o.stopPx-15)+", "+e+" "+(r.stopPx-15)+", "+n+" "+(r.startPx-15)+", "+n).style("fill",a).style("fill-opacity",s)}function Cc(t,e,n=null){var o,r,i,a;if(o=t.r1,r=t.r2,"string"==typeof o.chr){const t=e.config.taxids;e.config.multiorganism?(o.chr=e.chromosomes[t[0]][o.chr],r.chr=e.chromosomes[t[1]][r.chr]):(o.chr=e.chromosomes[t[0]][o.chr],r.chr=e.chromosomes[t[0]][r.chr])}var s=document.querySelector("#"+o.chr.id+"-chromosome-set"),c=s.getCTM().e,l=s.getCTM().f,u=document.querySelector("#"+r.chr.id+"-chromosome-set"),d=u.getCTM().e,f=u.getCTM().f;return null===n?"vertical"===e.config.orientation?(i=l-12,a=f-12):(i=c,a=d):(i=n,a=n),o.startPx=e.convertBpToPx(o.chr,o.start)+i,o.stopPx=e.convertBpToPx(o.chr,o.stop)+i,r.startPx=e.convertBpToPx(r.chr,r.start)+a,r.stopPx=e.convertBpToPx(r.chr,r.stop)+a,[o,r]}function Sc(t,e,n,o,r){t.append("line").attr("class","syntenyBorder").attr("x1",e).attr("x2",n).attr("y1",o.startPx).attr("y2",r.startPx),t.append("line").attr("class","syntenyBorder").attr("x1",e).attr("x2",n).attr("y1",o.stopPx).attr("y2",r.stopPx)}function Lc(t,e,n,o,r){t.append("line").attr("class","syntenyBorder").attr("x1",o.startPx-15).attr("x2",r.startPx-15).attr("y1",e).attr("y2",n),t.append("line").attr("class","syntenyBorder").attr("x1",o.stopPx-15).attr("x2",r.stopPx-15).attr("y1",e).attr("y2",n)}function Tc(t,e,n,o,r,i){var a,s;Math.abs(o.startPx-o.startPx)<2&&Math.abs(o.stopPx-o.stopPx)<2?(a=i.color,s=i.width):(a="",s=""),t.append("line").attr("class","syntenyBorder").attr("x1",e).attr("x2",n).attr("y1",o.startPx).attr("y2",r.startPx).style("stroke",a).style("stroke-width",s),t.append("line").attr("class","syntenyBorder").attr("x1",e).attr("x2",n).attr("y1",o.stopPx).attr("y2",r.stopPx).style("stroke",a).style("stroke-width",a)}function kc(t,e,n,o,r,i){var a=i.split("__").map((t=>"label_"+t));if("name"in o){t.append("text").attr("id",a[0]).attr("y",o.startPx+3).text(o.name);var s=document.querySelector("#"+a[0]).getBoundingClientRect().width;Di.select("#"+a[0]).attr("x",e-15-s)}"name"in r&&t.append("text").attr("id",a[1]).text(r.name).attr("x",n+15).attr("y",r.startPx+3).text(r.name)}function Mc(t){var e=(new Date).getTime(),n=this,o=n.config;if(n.syntenicRegions=t,o.multiorganism&&"collinear"===o.geometry)return"vertical"===o.orientation?function(t,e){var n=(new Date).getTime();(function(t,e,n){var o,r,i,a,s,c,l,u;for(o=0;o<t.length;o++)r=t[o],[i,a]=Cc(r,n),_c(s=xc(e,i.chr.id+"_"+i.start+"_"+i.stop+"___"+a.chr.id+"_"+a.start+"_"+a.stop,n),l=(c=n.config.chrWidth)+51,u=c+245,i,a,r),Sc(s,l,u,i,a)})(t,Di.select(e.selector).insert("g",":first-child").attr("class","synteny"),e),function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in drawSyntenicRegions: "+(n-t)+" ms")}(n,e)}(t,n):function(t,e){var n=(new Date).getTime();(function(t,e,n){var o,r,i,a,s,c,l,u;for(o=0;o<t.length;o++)r=t[o],[i,a]=Cc(r,n),Ac(s=xc(e,i.chr.id+"_"+i.start+"_"+i.stop+"___"+a.chr.id+"_"+a.start+"_"+a.stop,n),l=(c=n.config.chrWidth)+31,u=c+191,i,a,r),Lc(s,l,u,i,a)})(t,Di.select(e.selector).insert("g",":first-child").attr("class","synteny"),e),function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in drawSyntenicRegions: "+(n-t)+" ms")}(n,e)}(t,n);(function(t,e,n,o){var r,i,a,s,c,l,u,d,f;for(r=0;r<t.length;r++)i=t[r],[a,s]=Cc(i,o,n),l=xc(e,c=a.chr.id+"_"+a.start+"_"+a.stop+"___"+s.chr.id+"_"+s.start+"_"+s.stop,o),u=o.config.chrWidth,_c(l,d=o._layout.getChromosomeSetYTranslate(0),f=o._layout.getChromosomeSetYTranslate(1)-u,a,s,i),Tc(l,d,f,a,s,i),kc(l,d,f,a,s,c)})(t,Di.select(n.selector).insert("g",":first-child").attr("class","synteny"),n._layout.margin.left,n),function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in drawSyntenicRegions: "+(n-t)+" ms")}(e,n)}function Ec(){var t=this;t.config.numAnnotTracks=t.config.annotationsNumTracks,Di.selectAll(t.selector+" .annot").remove(),t.drawAnnots(t.processAnnotData(t.rawAnnots))}function Pc(t){var e,n,o,r=this,i=r.rawAnnots.annots;return r.config.numAnnotTracks=t.length,e=function(t,e){var n,o,r,i,a,s,c;for(o=[],i=0;i<t.length;i++){for(r=t[i],a=[],s=0;s<r.annots.length;s++)c=(n=r.annots[s].slice())[3]+1,e.includes(c)&&(n[3]=e.indexOf(c),a.push(n));o.push({chr:r.chr,annots:a})}return o}(i,t),o={keys:r.rawAnnots.keys,annots:e},"collinear"===r.config.geometry&&ua(r),n=r.processAnnotData(o),Di.selectAll(r.selector+" .annot").remove(),r.displayedTrackIndexes=t,r.drawAnnots(n),n}function Dc(t){var e,n,o=this;return(e=t.keys).length<4||"trackIndex"!==e[3]||"trackIndexOriginal"===e[4]||(n=function(t,e){var n,o,r,i,a,s,c,l=[];for(c=1,n=0;n<t.length;n++){for(r=t[n],a=[],o=0;o<r.annots.length;o++)(s=(i=r.annots[o].slice())[3])+1>c&&(c=s+1),i.splice(4,0,s),a.push(i);l.push({chr:r.chr,annots:a})}return e.numAvailTracks=c,l}(t.annots,o),e.splice(4,0,"trackIndexOriginal"),t={keys:e,annots:n},o.rawAnnots.metadata&&(t.metadata=o.rawAnnots.metadata)),t}var Nc=[["F00"],["F00","88F"],["F00","CCC","88F"],["F00","FA0","0AF","88F"],["F00","FA0","CCC","0AF","88F"],["F00","FA0","875","578","0AF","88F"],["F00","FA0","875","CCC","578","0AF","88F"],["F00","FA0","7A0","875","0A7","578","0AF","88F"],["F00","FA0","7A0","875","CCC","0A7","578","0AF","88F"],["F00","FA0","7A0","875","552","255","0A7","578","0AF","88F"]];function Fc(t,e,n,o,r,i,a){return a.config.annotationTracks?r=function(t,e,n,o,r){var i;return e.trackIndex=n[3],(i=r.config.annotationTracks[e.trackIndex]).color&&(e.color=i.color),i.shape&&(e.shape=i.shape),t[o].annots.push(e),t}(r,t,n,i,a):"trackIndex"===e[3]&&1!==a.numAvailTracks?[r,o]=function(t,e,n,o,r,i){var a=Nc[i.numAvailTracks-1];return t.trackIndex=e[3],t.trackIndexOriginal=e[4],t.color="#"+a[t.trackIndexOriginal],t.trackIndex>i.config.numTracks-1?(t.trackIndex in n?n[t.trackIndex].push(t):n[t.trackIndex]=[t],[o,n]):(o[r].annots.push(t),[o,n])}(t,n,o,r,i,a):r=function(t,e,n,o){return e.trackIndex=0,e.color||(e.color=o.config.annotationsColor),e.shape||(e.shape="triangle"),t[n].annots.push(e),t}(r,t,i,a),[r,o]}function Bc(t,e){return"_c"+t+"_a"+e}function Ic(t,e,n,o,r,i,a){var s,c,l,u;const d=!a.config.annotationsLayout||"tracks"===a.config.annotationsLayout;for(s=0;s<n.annots.length;s++){for(u=n.annots[s],l={},c=0;c<i.length;c++)l[i[c]]=u[c];l.stop=l.start+l.length,l.chr=n.chr,l.chrIndex=r,l.startPx=a.convertBpToPx(o,l.start),l.stopPx=a.convertBpToPx(o,l.stop),l.px=Math.round((l.startPx+l.stopPx)/2),d&&(l.domId=Bc(r,s)),[t,e]=Fc(l,i,u,e,t,r,a)}if(d)for(a.annotSortFunction?(t[r].annots=Uc(t[r].annots,a),t[r].annots.sort(((t,e)=>-a.annotSortFunction(t,e)))):t[r].annots.sort(((t,e)=>t[1]-e[1])),s=0;s<t[r].annots.length;s++)t[r].annots[s].domId=Bc(r,s);return[t,e]}function $c(t){console.warn('Chromosome "'+t.chr+'" undefined in ideogram; '+t.annots.length+" annotations not shown")}function Oc(t){var e,n,o,r=this;return e=t.keys,t=t.annots,[n,o]=function(t,e,n){var o,r,i,a,s=[],c={};for(o=-1,r=0;r<t.length;r++)i=t[r],void 0!==(a=n.chromosomes[n.config.taxid][i.chr])?(o++,s.push({chr:i.chr,annots:[]}),"heatmap-2d"!==n.config.annotationsLayout?[s,c]=Ic(s,c,i,a,o,e,n):[s,c]=js(s,c,i,a,o,e,n)):$c(i);return[s,c]}(t,e,r),n=function(t,e){var n,o,r,i,a,s;for(n=t,t=[],s=e.chromosomesArray,o=0;o<s.length;o++)for(a=s[o].name,r=0;r<n.length;r++)(i=n[r]).chr===a&&t.push(i);return t}(n,r),function(t,e){var n,o=e.config.annotationsLayout,r=e.config.numAnnotTracks;!/heatmap/.test(o)&&r>10&&console.error("Ideogram only displays up to 10 tracks at a time.  You specified "+r+" tracks.  Perhaps consider a different way to visualize your data."),(n=Object.keys(t).length)&&console.warn("Ideogram configuration specified "+r+" tracks, but loaded annotations contain "+n+" extra tracks.")}(o,r),n}class Rc{constructor(t,e){this.matrix=t,this.ideo=e}setRawAnnots(){var t,e,n;return t=this,e=this.ideo,n=this.matrix,new Promise((function(o){t.rawAnnots=t.fetchCoordinates(e).then((function(r){t.coordinates=r,o(t.parseExpressionMatrix(n,e))}))}))}fetchCoordinates(t){var e={};if("human"===t.config.organism){var n=t.config.dataDir+"../../annotations/Homo_sapiens,_Ensembl_80.tsv";return new Promise((function(o){t.fetch(n,"text").then((function(t){var n,r,i,a,s,c,l;for(n=t.split(/\r\n|\n/).slice(1),r=0;r<n.length;r++)[i,a,s,,c]=n[r].split(/\s/g),i=parseInt(i),l=(a=parseInt(a))-i,e[s]=[c,i,l];o(e)}))}))}throw Error("Expression matrix parsing is only supported for human")}parseAnnotFromTsvLine(t,e){var n,o,r,i,a,s=t.split(/\s/g);return(i=s[0])in this.coordinates==0?[null,null]:(a=s.slice(1).map((t=>parseFloat(t))),[o,r,length]=this.coordinates[i],-1===(n=e.indexOf(o))?[null,null]:[n,[i,r,length].concat(a)])}parseExpressionMatrix(t,e){var n,o,r,i,a,s,c=[],l=t.split(/\r\n|\n/);for(o=Object.keys(e.chromosomes[e.config.taxid]),n=0;n<o.length;n++)c.push({chr:o[n],annots:[]});for(n=1;n<l.length;n++)i=l[n],[a,s]=this.parseAnnotFromTsvLine(i,o),null!==a&&c[a].annots.push(s);return r=l[0].split(/\s/g),{keys:["name","start","length"].concat(r),annots:c}}}function Hc(){const t=this,e={};t.annots.forEach((n=>{n.annots.forEach((n=>{const o=t.annotDescriptions.annots[n.name];e[n.name]=[n.name,o.ensemblId,n.chr,n.start,n.stop,n.length,o.type]}))}));const n=[["# Gene name","Ensembl ID","Chromosome","Start","Stop","Length","Type"]].concat(Object.values(e)),o=t.annotDescriptions.headers+"\n#\n"+n.map((t=>t.join("\t"))).join("\n"),r="data:text/plain;charset=utf-8,"+encodeURIComponent(o);var i=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),a=document.createElement("a");a.setAttribute("download","ideogram.tsv"),a.setAttribute("href",r),a.setAttribute("target","_blank"),a.setAttribute("id","_ideo-undisplayed-dl-annots-link"),a.setAttribute("style","display: none;"),document.body.appendChild(a),a.dispatchEvent(i)}function Gc(){var t=this,e=t.config;!function(t){var e,n=t.config;n.annotationHeight||("heatmap"===n.annotationsLayout?e=n.chrWidth-1:(e=Math.round(n.chrHeight/100))<3&&(e=3),t.config.annotationHeight=e)}(t),e.annotationsPath||e.localAnnotationsPath||t.annots||e.annotations?function(t,e){e.annotationTracks?t.config.numAnnotTracks=e.annotationTracks.length:e.annotationsNumTracks?t.config.numAnnotTracks=e.annotationsNumTracks:t.config.numAnnotTracks=1,t.config.annotTracksHeight=e.annotationHeight*e.numAnnotTracks,void 0===e.barWidth&&(t.config.barWidth=3)}(t,e):(t.config.annotTracksHeight=0,t.config.numAnnotTracks=0),void 0===e.annotationsColor&&(t.config.annotationsColor="#F00"),e.onClickAnnot&&(t.onClickAnnotCallback=e.onClickAnnot),function(t,e){!1!==e.showAnnotTooltip&&(t.config.showAnnotTooltip=!0),e.onWillShowAnnotTooltip&&(t.onWillShowAnnotTooltipCallback=e.onWillShowAnnotTooltip),e.onDidShowAnnotTooltip&&(t.onDidShowAnnotTooltipCallback=e.onDidShowAnnotTooltip)}(t,e),function(t,e){!1!==e.addAnnotLabel&&(t.config.addAnnotLabel=!0),e.onWillAddAnnotLabel&&(t.onWillAddAnnotLabelCallback=e.onWillAddAnnotLabel)}(t,e)}function Wc(){var t=this,e=t.config;t.rawAnnots.annots=t.rawAnnots.annots.sort(Ideogram.sortChromosomes),t.onLoadAnnotsCallback&&t.onLoadAnnotsCallback(),("heatmapThresholds"in e||"metadata"in t.rawAnnots&&"heatmapThresholds"in t.rawAnnots.metadata)&&("heatmap"===e.annotationsLayout?function(t){var e,n,o,r,i,a,s=t.config.heatmapThresholds;for(o=[],n=(i=t.rawAnnots).keys.slice(3),r=[],a=[],!i.metadata&&isNaN(s[0])||(s=$s(t)),e=0;e<n.length;e++)o.push({key:n[e],thresholds:s}),r.push({id:n[e]}),a.push(e+1);t.config.annotationsNumTracks=n.length,t.config.annotationsDisplayedTracks=a,t.config.heatmaps=o,t.config.annotationTracks=r}(t):"heatmap-2d"===e.annotationsLayout&&(t.config.heatmapThresholds=$s(t))),e.heatmaps&&t.deserializeAnnotsForHeatmap(t.rawAnnots),function(t){const e={},n=[],o=t.rawAnnots.annots.map((t=>t.chr));if(o.forEach((t=>{t in e&&n.push(t),e[t]=1})),n.length>0)throw Error(`Duplicate chromosomes detected.\nChromosome list: ${o}.  Duplicates: ${n}.\nTo fix this, edit your raw annotations JSON data to remove redundant chromosomes.`)}(t)}function jc(){return this.annots.reduce(((t,e)=>[...t,...e.annots]),[])}function qc(t){var e,n=this,o=n.config;e="heatmap-2d"===o.annotationsLayout;var r=function(t){var e,n;return n=(e=t.split("?")[0].split("."))[e.length-1],!1===["bed","json","tsv"].includes(n)?(n=n.toUpperCase(),void alert("Ideogram.js only supports BED and Ideogram JSON and TSV at the moment.  Sorry, check back soon for "+n+" support!")):n}(t);"http"===t.slice(0,4)||e||"tsv"===r?(r=e?"":r,n.fetch(t,"text").then((function(t){n.rawAnnotsResponse=t,e?new Rc(t,n).setRawAnnots().then((function(t){n.rawAnnots=t,n.afterRawAnnots()})):(n.rawAnnots="tsv"===r?new Ns(t,n).rawAnnots:"bed"===r?new Ds(t,n).rawAnnots:JSON.parse(t),n.afterRawAnnots())}))):n.fetch(t).then((function(t){n.rawAnnotsResponse=t,n.rawAnnots=t,n.afterRawAnnots()}))}function zc(t){var e,n,o,r,i,a,s;for(e=[],n=[],o=this.chromosomesArray,r=0;r<o.length;r++)i=o[r].name,n.push(i),e.push({chr:i,annots:[]});for(r=0;r<t.length;r++)a=t[r],-1!==(s=n.indexOf(a.chr))&&(e[s]=a);return e}function Uc(t,e){if(0===t.length)return t;if("initRank"in t[0]==0){if("geneCache"in e==0)return t;const n=e.geneCache.interestingNames;return t.map((t=>(n.includes(t.name)?t.rank=n.indexOf(t.name)+1:t.rank=1e10,t)))}return t.map((t=>(t.rank=t.initRank,t)))}function Vc(t,e="red"){const n=this,o=n.config.taxid,r=t.map((t=>{const r=n.chromosomes[o][t].id,i=`${n.selector} #${r}-chromosome-set`,a=document.querySelector(i),s=a.getBoundingClientRect();return`<rect class="ideo-highlight" id="ideo-highlight-${r}" style="\n      stroke-width: 1px;\n      stroke: ${e};\n      fill: ${e};\n      fill-opacity: 0.05;\n      position: absolute;\n      rx: 4;\n      ry: 4;\n      height: ${s.width+15}px;\n      width: ${s.height+15}px" transform="rotate(90) translate(10, ${a.transform.baseVal[1].matrix.f-7.5})"/>`})).join();document.querySelector(n.selector).insertAdjacentHTML("afterBegin",r)}function Yc(t){const e=this;let n=`${e.selector} .ideo-highlight`;if(void 0!==t){const o=e.config.taxid;n=t.map((t=>{const n=e.chromosomes[o][t].id;return`${e.selector} #ideo-highlight-${n}`}))}document.querySelectorAll(n).forEach((t=>{t.remove()}))}var Xc="&api_key=7e33ac6a08a6955ec3b83d214d22b21a2808",Kc="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/",Qc=Kc+"esearch.fcgi?retmode=json"+Xc,Jc=Kc+"esummary.fcgi?retmode=json"+Xc,Zc=Kc+"elink.fcgi?retmode=json"+Xc;function tl(t,e){var n,o;return n=e.esearch+"&db=taxonomy&term="+t,Di.json(n).then((function(e){if(0===e.esearchresult.idlist.length)throw'Organism "'+t+"\" is generally unknown; it was not found in the NCBI Taxonomy database.  If you did not intend to specify a novel or custom taxon, then try using the organism's scientific name, e.g. Homo sapiens or Arabidopsis thaliana.";return o=e.esearchresult.idlist[0],[t,o]}))}function el(t,e){var n,o,r=this;t=r.config.organism,o=r.esummary+"&db=taxonomy&id="+t,Di.json(o).then((function(o){return n=o.result[String(t)].commonname,r.config.organism=n,e(n)}))}function nl(t,e,n){var o,r,i,a,s,c=n.config;(function(t,e){var n,o,r;if(e.assemblyIsAccession())return new Promise((function(n){e.coordinateSystem="bp",e.getAssemblyAndChromosomesFromEutils(t,n)}));n=e.config.dataDir,o=zi(e.organisms[t].scientificName),r=[t],["9606","10090","10116"].includes(t)&&!e.config.showFullyBanded&&(o+="-no-bands");var i=n+o+".json",a=new Promise(((t,e)=>Bi(i).then((e=>e.json().then((function(e){t(e)})))).catch((t=>{e(t)}))));return a.then((function(n){var o,i,a,s,c=n.chrBands,l=[""],u=[],d={};e.bandData[n.taxid]=c;for(var f=0;f<c.length;f++)o=(a=c[f].split(" "))[0],s=a.slice(-1)[0],o in d||(u.push({name:o,type:"nuclear",length:s}),d[o]=1);return u=u.sort(Ideogram.sortChromosomes),i={bp:0,iscn:0},u.forEach((t=>{t.length>i.bp&&(i.bp=t.length)})),e.maxLength[t]=i,l.push(u),l.push(r),l}),(function(){return new Promise((function(n){e.coordinateSystem="bp",e.getAssemblyAndChromosomesFromEutils(t,n)}))}))})(t,n).then((function(l){o=l[0],r=l[1],"chromosomes"in c==0||null===c.chromosomes?(n.config.chromosomes={},n.config.chromosomes[t]=r):(c.multiorganism?t in c.chromosomes?i=c.chromosomes[t]:(a=zi(n.getScientificName(t)),n.config.chromosomes[t]=c.chromosomes[a].slice(),i=n.config.chromosomes[t]):i=c.chromosomes,s=r.filter((t=>i.includes(t.name))),n.config.chromosomes[t]=s),n.chromosomes[t]=n.config.chromosomes[t].slice(),n.organisms[t].assemblies={default:o},e()}))}function ol(t,e){var n,o;for(n in e.organisms)if(o=e.organisms[n],n===zi(t)||zi(o.commonName)===zi(t)||zi(o.scientificName)===zi(t))return!0;return!1}function rl(t,e){(function(t){var e,n,o,r,i,a=t.config;return e=[],n={},function(t,e){var n,o,r,i=[],a={};for(r=0;r<t.length;r++)o=!1===ol(n=t[r],e)?tl(n,e).then((function(t){var n,o,r=t[1];o=(n=t[0].replace("-"," "))[0].toUpperCase()+n.slice(1),a[r]={scientificName:o,commonName:"",assemblies:{default:""}},Object.assign(e.organisms,a)}),(function(t){console.warn(t);var o={scientificName:n,commonName:n,assemblies:{default:""}};e.organisms[-1]=o,a[-1]=o})):new Promise((function(t){var o=e.getTaxid(n);a[o]=e.organisms[o],t()})),i.push(o);return Promise.all(i).then((function(){return a}))}(a.multiorganism?a.organism:[a.organism],t).then((function(t){var s=t[r];for(r in t)s=t[r],e.push(r),a.multiorganism&&(void 0!==a.chromosomes?(i=Object.keys(a.chromosomes).map((t=>zi(t))),i.includes(zi(s.scientificName))?o=s.scientificName:i.includes(zi(s.commonName))&&(o=s.commonName),zi(o)in a.chromosomes?n[r]=a.chromosomes[zi(o)]:n[r]=a.chromosomes[o.toLowerCase()]):n=null);return[n,e]}))})(e).then((function([n,o]){var r,i,a,s,c,l=e.config,u=[];for(r=0;r<o.length;r++)i=o[r],s=e.organisms[i].assemblies,c=Object.values(s),""===s.default||e.assemblyIsAccession()&&!c.includes(l.assembly)?a=new Promise((function(t){nl(i,t,e)})):(e.config.taxids=o,e.config.multiorganism&&(e.config.chromosomes=n),a=new Promise((function(t){t()}))),u.push(a);Promise.all(u).then((function(){return o=function(t){var e,n,o;if(e=t.config.organism,n=[],Array.isArray(e))for(o=0;o<e.length;o++)n.push(t.getTaxid(e[o]));else n.push(t.getTaxid(e));return n}(e),e.config.taxids=o,t(o)}))}))}function il(t){var e,n=this;if(e="taxid"in n.config,n.config.multiorganism=function(t,e){return"organism"in e.config&&e.config.organism instanceof Array||t&&e.config.taxid instanceof Array}(e,n),n.config.multiorganism&&(n.coordinateSystem="bp"),"organism"in n.config){const e=n.config.organism;"string"==typeof e&&(n.config.organism=zi(e.toLowerCase())),rl(t,n)}else!function(t,e,n){var o;n.config.multiorganism?t&&(o=n.config.taxid):(t&&(o=[n.config.taxid]),n.config.taxids=o),e(o)}(e,t,n)}function al(t,e){var n,o;return[n,o]=function(t,e){var n=t.genome;return"mitochondrion"===n?function(t,e){var n,o;return e.config.showNonNuclearChromosomes?(n=t.genome,[-1===(o=t.subtype.split("|").indexOf("plasmid"))?"MT":t.subname.split("|")[o],n]):[null,null]}(t,e):"chloroplast"===n||"plastid"===n?function(t){return t.config.showNonNuclearChromosomes?["CP","chloroplast"]:[null,null]}(e):"apicoplast"===n?function(t){return t.config.showNonNuclearChromosomes?["AP","apicoplast"]:[null,null]}(e):function(t){var e,n;return e=t.subtype.split("|").indexOf("chromosome"),void 0!==(n=t.subname.split("|")[e])&&"chr"===n.substr(0,3)&&(n=n.substr(3)),[n,"nuclear"]}(t)}(t,e),{name:n,length:t.slen,type:o}}function sl(t,e){var n,o=this,r=function(t,e){var n;return n=e.assemblyIsAccession()?e.config.assembly+"%22[Assembly%20Accession]":t+"%22[taxid]AND%20(%22latest%20refseq%22[filter])%20",e.esearch+"&db=assembly&term=%22"+n+"AND%20(%22chromosome%20level%22[filter]%20OR%20%22complete%20genome%22[filter])"}(t,o);Di.json(r).then((function(t){return function(t,e){var n,o;return n=t.esearchresult.idlist[0],o=e.esummary+"&db=assembly&id="+n,Di.json(o)}(t,o)})).then((function(t){var e=t.result.uids[0];return n=t.result[e],function(t,e){var n;return n="&db=nuccore&dbfrom=assembly&linkname=assembly_nuccore&cmd=neighbor_history&from_uid="+t,Di.json(e.elink+n).then((function(t){var o=t.linksets[0].webenv;return n="&db=nuccore&term=%231+AND+%28sequence_from_chromosome[Properties]+OR+sequence_from_plastid[Properties]+OR+sequence_from_mitochondrion[Properties]%29&WebEnv="+o+"&usehistory=y&retmax=1000",e.esearch+n}))}(e,o)})).then((function(t){return Di.json(t)})).then((function(t){return function(t,e){var n,o;return n=t.esearchresult.idlist.join(","),o=e.esummary+"&db=nucleotide&id="+n,Di.json(o)}(t,o)})).then((function(r){var i=function(t,e,n){var o,r,i,a,s={},c=[];for(o in t)"uids"!==o&&(i=(r=al(t[o],n)).name+"_"+r.length,null!==r.type&&i in s==0&&c.push(r),s[i]=1);return c=c.sort(Ideogram.sortChromosomes),a={bp:0,iscn:0},c.forEach((t=>{t.length>a.bp&&(a.bp=t.length)})),a.bp>n.maxLength.bp&&(n.maxLength.bp=a.bp),n.maxLength[e]=a,n.coordinateSystem="bp",c}(r.result,t,o);return e([n,i])}),(function(t){console.warn(t)}))}function cl(){var t=this,e=t.bandsToShow.join(",");0!==t.bandsToShow.length&&(Di.selectAll(t.selector+" .bandLabel, .bandLabelStalk").style("display","none"),Di.selectAll(e).style("display",""))}function ll(t,e,n,o,r){return e!==n&&(t=o[r.id][n]+36),t}function ul(t,e,n,o,r,i,a){var s,c;return n<o+(a?e:r)?(e=r,s=i,c=a):t.push(i),[t,e,s,c]}function dl(t,e){var n,o,r,i,a,s=[],c=t[e.id].length,l=0;for(n=0;n<c;n++)r=t[e.id][n],[s,l,o,a]=ul(s,l,r,5,i,n,!0),a||(i=ll(i,o,n,t,e),[s,l,o,a]=ul(s,l,r,5,i,n,!1));return s}function fl(t,e){var n,o,r,i,a,s,c,l=this;for(l.bandsToShow=[],o=0;o<t.length;o++){for(s=[],c=(i=dl(e,a=t[o])).length,r=0;r<c;r++)n=i[r],s.push("#"+a.id+" .bsbsl-"+n);l.bandsToShow=l.bandsToShow.concat(s)}}function hl(t,e,n,o){var r=this,i=r._layout,a=n.chrIndex;return t.selectAll("text").data(e).enter().append("g").attr("class",(function(t,e){return"bandLabel bsbsl-"+e})).attr("transform",(function(t){var e=i.getChromosomeBandLabelTranslate(t,a);return"horizontal"===r.config.orientation?o[n.id].push(e.x+13):o[n.id].push(e.y+6),e.translate})).append("text").attr("text-anchor",i.getChromosomeBandLabelAnchor(a)).text((function(t){return t.name})),o}function pl(t,e,n,o){var r=this;t.selectAll("line.bandLabelStalk").data(e).enter().append("g").attr("class",(function(t,e){return"bandLabelStalk bsbsl-"+e})).attr("transform",(function(t){var e;return e=r.round(t.px.start+t.px.width/2),o[n.id].push(e+13),"translate("+e+",-10)"})).append("line").attr("x1",0).attr("y1",r._layout.getChromosomeBandTickY1(n.chrIndex)).attr("x2",0).attr("y2",r._layout.getChromosomeBandTickY2(n.chrIndex))}function ml(t){var e,n,o,r,i,a=this,s={};for(r=function(t){var e,n,o=[];for(e in t)for(n in t[e])o.push(t[e][n]);return o}(t),e=0;e<r.length;e++)o=r[e],n=Di.select(a.selector+" #"+o.id),s[o.id]=[],i=o.bands.filter((t=>"pter"!==t.name)),s=a.drawBandLabelText(n,i,o,s),a.drawBandLabelStalk(n,i,o,s);a.setBandsToShow(r,s)}function gl(t,e){return[e[t][0],e[t][1],e[t][2],e[t][3]]}function yl(){var t="";return t=function(t){var e,n,o,r,i,a="";for(e=0;e<t.length;e++)[n,o,r,i]=gl(e,t),a+='<linearGradient id="'+n+'" x1="0%" y1="0%" x2="0%" y2="100%">',a+="gneg"===n?'<stop offset="70%" stop-color="'+r+'" /><stop offset="95%" stop-color="'+i+'" /><stop offset="100%" stop-color="'+o+'" />':'<stop offset="5%" stop-color="'+o+'" /><stop offset="15%" stop-color="'+r+'" /><stop offset="60%" stop-color="'+i+'" />',a+="</linearGradient>";return a}(aa),`<style>${sa}</style><defs>`+(t+='<pattern id="stalk" width="2" height="1" patternUnits="userSpaceOnUse" patternTransform="rotate(30 0 0)"><rect x="0" y="0" width="10" height="2" fill="#CCE" /> <line x1="0" y1="0" x2="0" y2="100%" style="stroke:#88B; stroke-width:0.7;" /></pattern><pattern id="gvar" width="2" height="1" patternUnits="userSpaceOnUse" patternTransform="rotate(-30 0 0)"><rect x="0" y="0" width="10" height="2" fill="#DDF" /> <line x1="0" y1="0" x2="0" y2="100%" style="stroke:#99C; stroke-width:0.7;" /></pattern>')+"</defs>"}function vl(t,e,n){var o,r,i;return(o=e[0])in t==0&&(t[o]=[]),r=function(t){var e=t[7];return t[8]&&(e+=t[8]),e}(e),i=function(t,e,n,o){return{chr:t,bp:{start:parseInt(e[5],10),stop:parseInt(e[6],10)},iscn:{start:parseInt(e[3],10),stop:parseInt(e[4],10)},px:{start:-1,stop:-1,width:-1},name:e[1]+e[2],stain:n,taxid:o}}(o,e,r,n),t[o].push(i),t}function bl(t,e,n,o){var r,i,a=o.config.multiorganism;return null!=t&&(i=(r=Array.isArray(t))&&-1===t.indexOf(e),!(!r||"object"==typeof t||!i)||(n in t!=0||!a)&&(a?"string"==typeof t[n][0]?!1===t[n].includes(e):0===t[n].filter((t=>t.name===e)).length:0===t.filter((t=>t===e)).length))}function wl(t,e,n,o){var r,i,a=[];return r=e[t],a.push(r),i={iscn:r[r.length-1].iscn.stop,bp:r[r.length-1].bp.stop},n in o.maxLength==0&&(o.maxLength[n]={bp:0,iscn:0}),i.iscn>o.maxLength[n].iscn&&(o.maxLength[n].iscn=i.iscn,i.iscn>o.maxLength.iscn&&(o.maxLength.iscn=i.iscn)),i.bp>o.maxLength[n].bp&&(o.maxLength[n].bp=i.bp,i.bp>o.maxLength.bp&&(o.maxLength.bp=i.bp)),a}function xl(t,e,n,o){var r,i;if(t in o.bandData||t in Pi&&!1===o.assemblyIsAccession())n=function(t,e,n,o){var r,i,a;r=function(t,e,n){var o,r,i,a,s,c,l={};c=n.bandData[t],Array.isArray(c)&&(s="native"),e=function(t){var e,n;if(t instanceof Array&&"object"==typeof t[0]){for(e=[],n=0;n<t.length;n++)e.push(t[n].name);t=e}return t}(e);var u=function(t,e){var n,o,r;return"undefined"==typeof chrBands&&"native"!==t?(n=/\t/,o=e.split(/\r\n|\n/),r=1):(n=/ /,o=e,r=0),[n,o,r]}(s,c);for(o=u[0],r=u[1],a=u[2];a<r.length;a++)bl(e,(i=r[a].split(o))[0],t,n)||(l=vl(l,i,t));return l}(t,e,o),e=Object.keys(r).sort(Ideogram.sortChromosomes),"chromosomes"in o.config!=0&&null!==o.config.chromosomes||(o.config.chromosomes={}),e.length>0&&(o.config.chromosomes[t]=e.slice()),o.numChromosomes+=o.config.chromosomes[t].length;for(i=0;i<e.length;i++)a=wl(e[i],r,t,o),n=n.concat(a);return n}(t,e,n,o);else for(o.numChromosomes+=e.length,i=0;i<e.length;i++)(r=e[i]).length>o.maxLength.bp&&(o.maxLength.bp=r.length);return n}function _l(t){var e,n,o=this,r=o.config,i=(new Date).getTime();return e=[],"chromosomes"in r&&(n=r.multiorganism?r.chromosomes:t in r.chromosomes?r.chromosomes[t].slice():r.chromosomes.slice()),e=xl(t,n,e,o),function(t,e){var n=(new Date).getTime();e.config.debug&&console.log("Time in processBandData: "+(n-t)+" ms")}(i,o),[t,e]}function Al(){call(this.onBrushMoveCallback)}function Cl(){call(this.onBrushEndCallback)}function Sl(t,e,n){var o,r,i,a,s=this,c=s.config.chrWidth+6.5,l=s._layout.margin.left;[t,e,n]=function(t,e,n){var o,r;return o=t.split(":"),r=t.split("-"),o.length>1&&r.length>1&&(t=o[0].replace("chr",""),r=o[1].split("-"),e=parseInt(r[0]),n=parseInt(r[1]-1)),[t,e,n]}(t,e,n),o=function(t,e){var n,o;for(n=0;n<e.chromosomesArray.length;n++)if((o=e.chromosomesArray[n]).name===t)return o}(t,s),[i,a]=function(t,e){var n,o,r=[1],i=[1],a=t.bands.slice(-1)[0];for(o=0;o<t.bands.length;o++)n=t.bands[o],r.push(n.bp.start),i.push(n.px.start+e);return r.push(a.bp.stop-1),i.push(a.px.stop+e),[r,i]}(o,l),r=o.bands.slice(-1)[0].bp.stop,void 0===e&&(e=Math.floor(r/10)),void 0===n&&(n=Math.ceil(2*e)),function(t,e,n,o,r){var i,a=r.config.chrHeight;i=Di.scaleLinear().domain(t).range(e),r.brush=Di.brushX().extent([[n,0],[a+n,o]]).on("brush",(function({selection:t}){var e=t.map(i.invert),n=Math.floor(e[0]),o=Math.ceil(e[1]);r.selectedRegion={from:n,to:o,extent:o-n},r.onBrushMoveCallback&&r.onBrushMoveCallback()})).on("end",(function({selection:t}){r.onBrushEndCallback&&r.onBrushEndCallback()}))}(i,a,l,c,s),function(t,e,n){var o=e-t+1;n.selectedRegion={from:t,to:e,extent:o}}(e,n,s),function(t,e,n,o,r,i){var a,s,c;a=i.convertBpToPx(t,e)+o,s=i.convertBpToPx(t,n)+o,c=i._layout.getChromosomeSetYTranslate(0)+(i.config.chrWidth-r)/2,Di.select(i.selector).append("g").attr("class","brush").attr("transform","translate(0, "+c+")").call(i.brush).call(i.brush.move,[a,s])}(o,e,n,l,c,s)}function Ll(){call(this.onCursorMoveCallback)}function Tl(t){var e,n,o,r=this,i=r.config.chrWidth+6.5,a=r._layout.margin.left;if(void 0===t)return!1;e=function(t,e){var n,o;for(n=0;n<e.chromosomesArray.length;n++)if((o=e.chromosomesArray[n]).name===t)return o}(r.config.chromosome,r),[n,o]=function(t,e){var n,o,r=[1],i=[1],a=t.bands.slice(-1)[0];for(o=0;o<t.bands.length;o++)n=t.bands[o],r.push(n.bp.start),i.push(n.px.start+e);return r.push(a.bp.stop-1),i.push(a.px.stop+e),[r,i]}(e,a),function(t,e,n,o,r,i){var a;a=Di.scaleLinear().domain(e).range(n),"rotatable"in i.config&&!1===i.config.rotatable||console.warn("Using the cursor with rotate is not supported.");var s=i._layout.getChromosomeSetYTranslate(0)+(i.config.chrWidth-r)/2,c=Di.select(i.selector).append("g").attr("class","brush").attr("transform","translate(0, "+s+")").append("rect").attr("class","cursor").attr("x",a(t)).attr("y",0).attr("width",1).attr("height",30);i.onCursorMove&&i.onCursorMoveCallback(t),i.setCursorPosition||(i.setCursorPosition=function(t){c.attr("x",a(t)),i.onCursorMove&&i.onCursorMoveCallback(t)}),Di.selectAll(i.selector+" .chromosome").on("click",(function(t){var e=t.offsetX;e-=6,c.attr("x",e);var n=Math.floor(a.invert(e));i.onCursorMove&&i.onCursorMoveCallback(n)}))}(t,n,o,0,i,r)}function kl(t,e){var n,o,r,i,a,s,c,l,u,d;for(n=this.bandsArray,o=this.config.taxid,r=this.config.chromosomes[o],a=(i="male"===this.config.sex?[1,0]:[0,0]).length,d=0;d<a;d++)s=r[u=i[d]+e],c=n[o][u],l=this.getChromosomeModel(c,s,o,u),this.appendHomolog(l,e,d,t)}function Ml(t){var e,n,o=this,r={X:1,Y:1};if(2===this.config.ploidy&&this.config.sex)for(o.sexChromosomes.list=[],n=0;n<t.length;n++)e=t[n],"male"===o.config.sex&&e in r?(o.sexChromosomes.list.push(e),o.sexChromosomes.index||(o.sexChromosomes.index=n)):"X"===e&&(o.sexChromosomes.list.push(e,e),o.sexChromosomes.index=n)}function El(t,e){var n,o;if(t.bands.length>1||"MT"===t.name){if([o,n]=function(t,e){var n,o,r,i,a,s,c,l,u;for(n=0;n<t.bands.length;n++)if(a=(o=t.bands[n]).bp.start,c=(s=o.bp.stop)-a,r=o.iscn.start,i=o.iscn.stop-r,l=o.px.start,u=o.px.width,e>=a&&e<=s)return[l+u*(r+i/c*(e-a)-r)/i,o];return[null,o]}(t,e),null!==o)return o}else if(e>=1&&e<=t.length)return t.scale.bp*e;!function(t,e,n){throw new Error("Base pair out of range.  bp: "+t+"; length of chr"+e.name+": "+n.bp.stop)}(e,t,n)}function Pl(t,e,n,o,r,i,a){var s,c,l,u;return a=t-e,s=o-r,c=i.bp.stop-i.bp.start,l=e+a/s*(n-r),u=i.bp.start+c*(l-e)/a,Math.round(u)}function Dl(t,e){var n,o,r,i,a,s;for(0===e&&(e=t.bands[0].px.start),n=0;n<t.bands.length;n++)if(r=(o=t.bands[n]).px.start,i=o.px.stop,a=o.iscn.start,s=o.iscn.stop,e>=r&&e<=i)return Pl(s,a,e,i,r,o,void 0);!function(t,e,n){throw new Error("Pixel out of range.  px: "+t+"; length of chr"+e.name+": "+n)}(e,t,i)}let Nl=Ol,Fl=Ol,Bl=Ol,Il=Rl,$l=Hl;function Ol(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function Rl(t,e){for(var n=t.length;n<e;)t[n++]=0;return t}function Hl(t,e){if(e>32)throw new Error("invalid array width!");return t}function Gl(t){this.length=t,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=Nl(t)}"undefined"!=typeof Uint8Array&&(Nl=function(t){return new Uint8Array(t)},Fl=function(t){return new Uint16Array(t)},Bl=function(t){return new Uint32Array(t)},Il=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},$l=function(t,e){var n;switch(e){case 16:n=Fl(t.length);break;case 32:n=Bl(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n}),Gl.prototype.lengthen=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)this[e]=Il(this[e],t);this.length=t},Gl.prototype.add=function(){var t,e,n,o,r;for(o=0,r=this.subarrays;o<r;++o)if(n=(~(t=this.masks[o])&t+1)>>>0,!((e=this.width-32*o)>=32)||n)return e<32&&n&1<<e&&(this[o]=$l(this[o],e<<=1),this.width=32*o+e),this.masks[o]|=n,{offset:o,one:n};return this[this.subarrays]=Nl(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},Gl.prototype.copy=function(t,e){var n,o;for(n=0,o=this.subarrays;n<o;++n)this[n][t]=this[n][e]},Gl.prototype.truncate=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)for(var o=this.length-1;o>=t;o--)this[e][o]=0;this.length=t},Gl.prototype.zero=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)if(this[e][t])return!1;return!0},Gl.prototype.zeroExcept=function(t,e,n){var o,r;for(o=0,r=this.subarrays;o<r;++o)if(o===e?this[o][t]&n:this[o][t])return!1;return!0},Gl.prototype.zeroExceptMask=function(t,e){var n,o;for(n=0,o=this.subarrays;n<o;++n)if(this[n][t]&e[n])return!1;return!0},Gl.prototype.only=function(t,e,n){var o,r;for(o=0,r=this.subarrays;o<r;++o)if(this[o][t]!=(o===e?n:0))return!1;return!0},Gl.prototype.onlyExcept=function(t,e,n,o,r){var i,a,s;for(a=0,s=this.subarrays;a<s;++a)if(i=this[a][t],a===e&&(i&=n),i!=(a===o?r:0))return!1;return!0};const Wl={array8:Ol,array16:Ol,array32:Ol,arrayLengthen:Rl,arrayWiden:Hl,bitarray:Gl},jl=t=>[0,t.length],ql=t=>t,zl=()=>null,Ul=()=>0;function Vl(t){function e(t,e,o){for(var r=o-e,i=1+(r>>>1);--i>0;)n(t,i,r,e);return t}function n(e,n,o,r){for(var i,a=e[--r+n],s=t(a);(i=n<<1)<=o&&(i<o&&t(e[r+i])>t(e[r+i+1])&&i++,!(s<=t(e[r+i])));)e[r+n]=e[r+i],n=i;e[r+n]=a}return e.sort=function(t,e,o){for(var r,i=o-e;--i>0;)r=t[e],t[e]=t[e+i],t[e+i]=r,n(t,1,i,e);return t},e}const Yl=Vl(ql);Yl.by=Vl;const Xl=Yl;function Kl(t){var e=Xl.by(t);return function(n,o,r,i){var a,s,c,l=new Array(i=Math.min(r-o,i));for(s=0;s<i;++s)l[s]=n[o++];if(e(l,0,i),o<r){a=t(l[0]);do{t(c=n[o])>a&&(l[0]=c,a=t(e(l,0,i)[0]))}while(++o<r)}return l}}const Ql=Kl(ql);Ql.by=Kl;const Jl=Ql;function Zl(t){function e(e,n,o,r){for(;o<r;){var i=o+r>>>1;n<t(e[i])?r=i:o=i+1}return o}return e.right=e,e.left=function(e,n,o,r){for(;o<r;){var i=o+r>>>1;t(e[i])<n?o=i+1:r=i}return o},e}const tu=Zl(ql);tu.by=Zl;const eu=tu,nu=(t,e,n)=>{for(var o=0,r=e.length,i=n?JSON.parse(JSON.stringify(t)):new Array(r);o<r;++o)i[o]=t[e[o]];return i},ou=t=>t+1,ru=t=>t-1,iu=t=>function(e,n){return e+ +t(n)},au=t=>function(e,n){return e-t(n)},su=(t,e)=>{const n=t[e];return"function"==typeof n?n.call(t):n},cu=/\[([\w\d]+)\]/g;var lu=-1;du.heap=Xl,du.heapselect=Jl,du.bisect=eu,du.permute=nu;const uu=du;function du(){var t,e={add:c,remove:function(e){for(var i=new Array(o),s=[],c="function"==typeof e,l=function(o){return c?e(n[o],o):t.zero(o)},d=0,f=0;d<o;++d)l(d)?(s.push(d),i[d]=lu):i[d]=f++;r.forEach((function(t){t(-1,-1,[],s,!0)})),a.forEach((function(t){t(i)}));for(var h=0,p=0;h<o;++h)i[h]!==lu&&(h!==p&&(t.copy(p,h),n[p]=n[h]),++p);n.length=o=p,t.truncate(p),u("dataRemoved")},dimension:function(e,s){if("string"==typeof e){var c=e;e=function(t){return function(t,e,n,o,r){for(r in o=(n=n.split(".")).splice(-1,1),n)e=e[n[r]]=e[n[r]]||{};return t(e,o)}(su,t,c.replace(cu,".$1"))}}var l,d,f,h,p,m,g,y,v,b,w,x,_,A,C={filter:function(t){return null==t?H():Array.isArray(t)?R(t):"function"==typeof t?G(t):O(t)},filterExact:O,filterRange:R,filterFunction:G,filterAll:H,currentFilter:function(){return x},hasCurrentFilter:function(){return _},top:function(e,o){var r,i=[],a=P,c=0;for(o&&o>0&&(c=o);--a>=E&&e>0;)t.zero(r=m[a])&&(c>0?--c:(i.push(n[r]),--e));if(s)for(a=0;a<S.length&&e>0;a++)t.zero(r=S[a])&&(c>0?--c:(i.push(n[r]),--e));return i},bottom:function(e,o){var r,i,a=[],c=0;if(o&&o>0&&(c=o),s)for(r=0;r<S.length&&e>0;r++)t.zero(i=S[r])&&(c>0?--c:(a.push(n[i]),--e));for(r=E;r<P&&e>0;)t.zero(i=m[r])&&(c>0?--c:(a.push(n[i]),--e)),r++;return a},group:j,groupAll:function(){var t=j(zl),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:q,remove:q,accessor:e,id:function(){return h}},S=[],L=function(t){return hu(t).sort((function(t,e){var n=g[t],o=g[e];return n<o?-1:n>o?1:t-e}))},T=jl,k=[],M=[],E=0,P=0,D=0;i.unshift(F),i.push(B),a.push(I);var N=t.add();function F(n,r,i){var a,c;if(s){D=0,W=0,A=[];for(var u=0;u<n.length;u++)for(W=0,A=e(n[u]);W<A.length;W++)D++;g=[],a=hu(n.length),c=fu(D,1);for(var d=hu(D),h=0,x=0;x<n.length;x++)if((A=e(n[x])).length)for(a[x]=A.length,W=0;W<A.length;W++)g.push(A[W]),d[h]=x,h++;else a[x]=0,S.push(x+r);var _=L(D);g=nu(g,_),y=nu(d,_)}else g=n.map(e),y=L(i),g=nu(g,y);var C,k,M,N=T(g),F=N[0],B=N[1];if(s)if(i=D,w)for(C=0;C<i;++C)w(g[C],C)||(0==--a[y[C]]&&(t[f][y[C]+r]|=l),c[C]=1);else{for(k=0;k<F;++k)0==--a[y[k]]&&(t[f][y[k]+r]|=l),c[k]=1;for(M=B;M<i;++M)0==--a[y[M]]&&(t[f][y[M]+r]|=l),c[M]=1}else if(w)for(C=0;C<i;++C)w(g[C],C)||(t[f][y[C]+r]|=l);else{for(k=0;k<F;++k)t[f][y[k]+r]|=l;for(M=B;M<i;++M)t[f][y[M]+r]|=l}if(!r)return p=g,m=y,v=a,b=c,E=F,void(P=B);var I,$=p,O=m,R=b,H=0;if(u=0,s&&(I=r,r=$.length,i=D),p=new Array(s?r+i:o),m=s?new Array(r+i):fu(o,o),s&&(b=fu(r+i,1)),s){var G=v.length;v=Wl.arrayLengthen(v,o);for(var W=0;W+G<o;W++)v[W+G]=a[W]}for(var j=0;u<r&&H<i;++j)$[u]<g[H]?(p[j]=$[u],s&&(b[j]=R[u]),m[j]=O[u++]):(p[j]=g[H],s&&(b[j]=c[H]),m[j]=y[H++]+(s?I:r));for(;u<r;++u,++j)p[j]=$[u],s&&(b[j]=R[u]),m[j]=O[u];for(;H<i;++H,++j)p[j]=g[H],s&&(b[j]=c[H]),m[j]=y[H]+(s?I:r);N=T(p),E=N[0],P=N[1]}function B(t,e,n){k.forEach((function(t){t(g,y,e,n)})),g=y=null}function I(t){if(s){for(var e=0,n=0;e<S.length;e++)t[S[e]]!==lu&&(S[n]=t[S[e]],n++);for(S.length=n,e=0,n=0;e<o;e++)t[e]!==lu&&(n!==e&&(v[n]=v[e]),n++);v=v.slice(0,n)}for(var r,i=p.length,a=0,c=0;a<i;++a)t[r=m[a]]!==lu&&(a!==c&&(p[c]=p[a]),m[c]=t[r],s&&(b[c]=b[a]),++c);for(p.length=c,s&&(b=b.slice(0,c));c<i;)m[c++]=0;var l=T(p);E=l[0],P=l[1]}function $(e){var n=e[0],o=e[1];if(w)return w=null,W((function(t,e){return n<=e&&e<o}),0===e[0]&&e[1]===p.length),E=n,P=o,C;var i,a,c,d=[],h=[],g=[],y=[];if(n<E)for(i=n,a=Math.min(E,o);i<a;++i)d.push(m[i]),g.push(i);else if(n>E)for(i=E,a=Math.min(n,P);i<a;++i)h.push(m[i]),y.push(i);if(o>P)for(i=Math.max(n,P),a=o;i<a;++i)d.push(m[i]),g.push(i);else if(o<P)for(i=Math.max(E,o),a=P;i<a;++i)h.push(m[i]),y.push(i);if(s){var x=[],_=[];for(i=0;i<d.length;i++)v[d[i]]++,b[g[i]]=0,1===v[d[i]]&&(t[f][d[i]]^=l,x.push(d[i]));for(i=0;i<h.length;i++)v[h[i]]--,b[y[i]]=1,0===v[h[i]]&&(t[f][h[i]]^=l,_.push(h[i]));if(d=x,h=_,T===jl)for(i=0;i<S.length;i++)t[f][c=S[i]]&l&&(t[f][c]^=l,d.push(c));else for(i=0;i<S.length;i++)t[f][c=S[i]]&l||(t[f][c]^=l,h.push(c))}else{for(i=0;i<d.length;i++)t[f][d[i]]^=l;for(i=0;i<h.length;i++)t[f][h[i]]^=l}return E=n,P=o,r.forEach((function(t){t(l,f,d,h)})),u("filtered"),C}function O(t){return x=t,_=!0,$((T=((t,e)=>function(n){var o=n.length;return[t.left(n,e,0,o),t.right(n,e,0,o)]})(eu,t))(p))}function R(t){return x=t,_=!0,$((T=((t,e)=>{var n=e[0],o=e[1];return function(e){var r=e.length;return[t.left(e,n,0,r),t.left(e,o,0,r)]}})(eu,t))(p))}function H(){return x=void 0,_=!1,$((T=jl)(p))}function G(t){x=t,_=!0,w=t,T=jl,W(t,!1);var e=T(p);return E=e[0],P=e[1],C}function W(e,n){var o,i,a,c=[],h=[],g=[],y=[],w=p.length;if(!s)for(o=0;o<w;++o)!(t[f][i=m[o]]&l)^!!(a=e(p[o],o))&&(a?c.push(i):h.push(i));if(s)for(o=0;o<w;++o)e(p[o],o)?(c.push(m[o]),g.push(o)):(h.push(m[o]),y.push(o));if(s){var x=[],_=[];for(o=0;o<c.length;o++)1===b[g[o]]&&(v[c[o]]++,b[g[o]]=0,1===v[c[o]]&&(t[f][c[o]]^=l,x.push(c[o])));for(o=0;o<h.length;o++)0===b[y[o]]&&(v[h[o]]--,b[y[o]]=1,0===v[h[o]]&&(t[f][h[o]]^=l,_.push(h[o])));if(c=x,h=_,n)for(o=0;o<S.length;o++)t[f][i=S[o]]&l&&(t[f][i]^=l,c.push(i));else for(o=0;o<S.length;o++)t[f][i=S[o]]&l||(t[f][i]^=l,h.push(i))}else{for(o=0;o<c.length;o++)t[f][c[o]]&l&&(t[f][c[o]]&=d);for(o=0;o<h.length;o++)t[f][h[o]]&l||(t[f][h[o]]|=l)}r.forEach((function(t){t(l,f,c,h)})),u("filtered")}function j(e){var i={top:function(t){var e=h(I(),0,c.length,t);return g.sort(e,0,e.length)},all:I,reduce:$,reduceCount:O,reduceSum:function(t){return $(iu(t),au(t),Ul)},order:R,orderNatural:function(){return R(ql)},size:function(){return A},dispose:H,remove:H};M.push(i);var c,u,h,g,y,v,b,w,x=8,_=pu(x),A=0,C=zl,S=zl,L=!0,T=e===zl;function E(i,a,l,h){s&&(w=l,l=p.length-i.length,h=i.length);var m,g,k,M,E,P,I=c,$=s?[]:fu(A,_),O=y,R=v,H=b,G=A,W=0,j=0;for(L&&(O=H=zl),L&&(R=H=zl),c=new Array(A),A=0,u=s?G?u:[]:G>1?Wl.arrayLengthen(u,o):fu(o,_),G&&(k=(g=I[0]).key);j<h&&!((M=e(i[j]))>=M);)++j;for(;j<h;){for(g&&k<=M?(E=g,P=k,$[W]=A,(g=I[++W])&&(k=g.key)):(E={key:M,value:H()},P=M),c[A]=E;M<=P&&(m=a[j]+(s?w:l),s?u[m]?u[m].push(A):u[m]=[A]:u[m]=A,E.value=O(E.value,n[m],!0),t.zeroExcept(m,f,d)||(E.value=R(E.value,n[m],!1)),!(++j>=h));)M=e(i[j]);z()}for(;W<G;)c[$[W]=A]=I[W++],z();if(s)for(var q=0;q<o;q++)u[q]||(u[q]=[]);if(A>W)if(s)for(W=0;W<w;++W)for(q=0;q<u[W].length;q++)u[W][q]=$[u[W][q]];else for(W=0;W<l;++W)u[W]=$[u[W]];function z(){s?A++:++A===_&&($=Wl.arrayWiden($,x<<=1),u=Wl.arrayWiden(u,x),_=pu(x))}m=r.indexOf(C),A>1||s?(C=D,S=F):(!A&&T&&(A=1,c=[{key:null,value:H()}]),1===A?(C=N,S=B):(C=zl,S=zl),u=null),r[m]=C}function P(t){if(A>1||s){var e,n,i,a=A,l=c,d=fu(a,a);if(s){for(e=0,i=0;e<o;++e)if(t[e]!==lu){for(u[i]=u[e],n=0;n<u[i].length;n++)d[u[i][n]]=1;++i}}else for(e=0,i=0;e<o;++e)t[e]!==lu&&(d[u[i]=u[e]]=1,++i);for(c=[],A=0,e=0;e<a;++e)d[e]&&(d[e]=A++,c.push(l[e]));if(A>1||s)if(s)for(e=0;e<i;++e)for(n=0;n<u[e].length;++n)u[e][n]=d[u[e][n]];else for(e=0;e<i;++e)u[e]=d[u[e]];else u=null;r[r.indexOf(C)]=A>1||s?(S=F,C=D):1===A?(S=B,C=N):S=C=zl}else if(1===A){if(T)return;for(var f=0;f<o;++f)if(t[f]!==lu)return;c=[],A=0,r[r.indexOf(C)]=C=S=zl}}function D(e,o,r,i,a){var h,p,m,g,b;if(!(e===l&&o===f||L))if(s){for(h=0,g=r.length;h<g;++h)if(t.zeroExcept(m=r[h],f,d))for(p=0;p<u[m].length;p++)(b=c[u[m][p]]).value=y(b.value,n[m],!1,p);for(h=0,g=i.length;h<g;++h)if(t.onlyExcept(m=i[h],f,d,o,e))for(p=0;p<u[m].length;p++)(b=c[u[m][p]]).value=v(b.value,n[m],a,p)}else{for(h=0,g=r.length;h<g;++h)t.zeroExcept(m=r[h],f,d)&&((b=c[u[m]]).value=y(b.value,n[m],!1));for(h=0,g=i.length;h<g;++h)t.onlyExcept(m=i[h],f,d,o,e)&&((b=c[u[m]]).value=v(b.value,n[m],a))}}function N(e,o,r,i,a){if(!(e===l&&o===f||L)){var s,u,h,p=c[0];for(s=0,h=r.length;s<h;++s)t.zeroExcept(u=r[s],f,d)&&(p.value=y(p.value,n[u],!1));for(s=0,h=i.length;s<h;++s)t.onlyExcept(u=i[s],f,d,o,e)&&(p.value=v(p.value,n[u],a))}}function F(){var e,r,i;for(e=0;e<A;++e)c[e].value=b();if(s){for(e=0;e<o;++e)for(r=0;r<u[e].length;r++)(i=c[u[e][r]]).value=y(i.value,n[e],!0,r);for(e=0;e<o;++e)if(!t.zeroExcept(e,f,d))for(r=0;r<u[e].length;r++)(i=c[u[e][r]]).value=v(i.value,n[e],!1,r)}else{for(e=0;e<o;++e)(i=c[u[e]]).value=y(i.value,n[e],!0);for(e=0;e<o;++e)t.zeroExcept(e,f,d)||((i=c[u[e]]).value=v(i.value,n[e],!1))}}function B(){var e,r=c[0];for(r.value=b(),e=0;e<o;++e)r.value=y(r.value,n[e],!0);for(e=0;e<o;++e)t.zeroExcept(e,f,d)||(r.value=v(r.value,n[e],!1))}function I(){return L&&(S(),L=!1),c}function $(t,e,n){return y=t,v=e,b=n,L=!0,i}function O(){return $(ou,ru,Ul)}function R(t){function e(e){return t(e.value)}return h=Jl.by(e),g=Xl.by(e),i}function H(){var t=r.indexOf(C);return t>=0&&r.splice(t,1),(t=k.indexOf(E))>=0&&k.splice(t,1),(t=a.indexOf(P))>=0&&a.splice(t,1),(t=M.indexOf(i))>=0&&M.splice(t,1),i}return arguments.length<1&&(e=ql),r.push(C),k.push(E),a.push(P),E(p,m,0,o),O().orderNatural()}function q(){M.forEach((function(t){t.dispose()}));var e=i.indexOf(F);return e>=0&&i.splice(e,1),(e=i.indexOf(B))>=0&&i.splice(e,1),(e=a.indexOf(I))>=0&&a.splice(e,1),t.masks[f]&=d,H()}return f=N.offset,l=N.one,d=~l,h=f<<7|Math.log(l)/Math.log(2),F(n,0,o),B(0,0,o),C},groupAll:function(){var e,a,s,c,l={reduce:h,reduceCount:p,reduceSum:function(t){return h(iu(t),au(t),Ul)},value:function(){return u&&(function(){var r;for(e=c(),r=0;r<o;++r)e=a(e,n[r],!0),t.zero(r)||(e=s(e,n[r],!1))}(),u=!1),e},dispose:m,remove:m},u=!0;function d(r,i){var c;if(!u)for(c=i;c<o;++c)e=a(e,n[c],!0),t.zero(c)||(e=s(e,n[c],!1))}function f(o,r,i,c,l){var d,f,h;if(!u){for(d=0,h=i.length;d<h;++d)t.zero(f=i[d])&&(e=a(e,n[f],l));for(d=0,h=c.length;d<h;++d)t.only(f=c[d],r,o)&&(e=s(e,n[f],l))}}function h(t,e,n){return a=t,s=e,c=n,u=!0,l}function p(){return h(ou,ru,Ul)}function m(){var t=r.indexOf(f);return t>=0&&r.splice(t,1),(t=i.indexOf(d))>=0&&i.splice(t,1),l}return r.push(f),i.push(d),d(0,0),p()},size:function(){return o},all:function(){return n},allFiltered:function(e){var r=[],i=0,a=l(e||[]);for(i=0;i<o;i++)t.zeroExceptMask(i,a)&&r.push(n[i]);return r},onChange:function(t){if("function"==typeof t)return s.push(t),function(){s.splice(s.indexOf(t),1)};console.warn("onChange callback parameter must be a function!")},isElementFiltered:function(e,n){var o=l(n||[]);return t.zeroExceptMask(e,o)}},n=[],o=0,r=[],i=[],a=[],s=[];function c(r){var a=o,s=r.length;return s&&(n=n.concat(r),t.lengthen(o+=s),i.forEach((function(t){t(r,a,s)})),u("dataAdded")),e}function l(e){var n,o,r,i,a=Array(t.subarrays);for(n=0;n<t.subarrays;n++)a[n]=-1;for(o=0,r=e.length;o<r;o++)a[(i=e[o].id())>>7]&=~(1<<(63&i));return a}function u(t){for(var e=0;e<s.length;e++)s[e](t)}return t=new Wl.bitarray(0),arguments.length?c(arguments[0]):e}function fu(t,e){return(e<257?Wl.array8:e<65537?Wl.array16:Wl.array32)(t)}function hu(t){for(var e=fu(t,t),n=-1;++n<t;)e[n]=n;return e}function pu(t){return 8===t?256:16===t?65536:4294967296}function mu(){var t,e,n=[],o=this.annots;for(e=0;e<o.length;e++)t=o[e].annots,n=n.concat(t);return n}function gu(t){var e,n,o,r=[],i=this.annots;for(e in i)r.push({chr:i[e].chr,annots:[]});for(o=0;o<t.length;o++)r[(n=t[o]).chrIndex].annots.push(n);return r}function yu(){var t,e,n=this,o=n.rawAnnots.keys;for(n.unpackedAnnots=n.unpackAnnots(),n.crossfilter=uu(n.unpackedAnnots),n.annotsByFacet={},n.facets=o.slice(3,o.length),t=0;t<n.facets.length;t++)e=n.facets[t],n.annotsByFacet[e]=n.crossfilter.dimension((function(t){return t[e]}));"filterSelections"in n&&n.filterAnnots(n.filterSelections),n.filteredAnnots=n.annots}function vu(t){var e,n,o,r=Date.now(),i=this;for(i.filterSelections=t,[n,o]=function(t,e){var n,o,r,i,a,s={};if(0===Object.keys(t).length)i=e.unpackedAnnots;else{for(o=0;o<e.facets.length;o++)(r=e.facets[o])in t?(a=t[r],n=Array.isArray(a)?function(t){return 2===a.length?a[0]<=t&&t<a[1]:4===a.length?a[0]<=t&&t<a[1]||a[2]<=t&&t<a[3]:void 0}:function(t){return t in a}):n=null,e.annotsByFacet[r].filter(n),s[r]=e.annotsByFacet[r].group().top(1/0);i=e.annotsByFacet[r].top(1/0)}return[i,s]}(t,i);e<i.facets.length;e++)i.annotsByFacet[void 0].filterAll();return n=i.packAnnots(n),delete i.maxAnnotsPerBar,delete i.maxAnnotsPerBarAllChrs,i.filteredAnnots=n,Di.selectAll(i.selector+" polygon.annot").remove(),i.drawAnnots(n),console.log("Time in filterAnnots: "+(Date.now()-r)+" ms"),o}function bu(t){var e,n,o,r,i,a=t.id.split("-")[1],s=this;return e=t.bands,n=s.config.chrHeight,o=0,(r=void 0!==e)?[e,t,o]=function(t,e,n,o){var r,i,a,s,c,l=0,u=e.id.split("-")[1],d=o.coordinateSystem,f=o.config.chrHeight;for(r=0;r<t.length;r++)a=(i=t[r])[d].stop-i[d].start,o._layout._isRotated?s=f*a/e.length:(c="relative"===o.config.chromosomeScale?o.maxLength[u][d]:o.maxLength[d],s=f*e.length/c*a/e.length),t[r].px={start:l,stop:l+s,width:s},l=t[r].px.stop,n&&"acen"===i.stain&&"p"===i.name[0]&&(e.pcenIndex=r);return[t,e,l]}(e,t,r,s):(i="relative"===s.config.chromosomeScale?s.maxLength[a][s.coordinateSystem]:s.maxLength[s.coordinateSystem],o=n*t.length/i),t.width=o,t.scale=function(t,e,n){var o=n.config.chrHeight,r=t.length,i=n.maxLength,a=t.id.split("-")[1],s={};return s.bp=o/i.bp,!0===n.config.multiorganism?"relative"===n.config.chromosomeScale?(s.iscn=o*r/i[a].bp,s.bp=o/i[a].bp):s.iscn=o*r/i.bp:e&&(s.iscn=o/i.iscn),s}(t,r,s),t.bands=e,t}function wu(t,e,n,o){var r,i,a={},s=this;return r=void 0!==t,a=function(t,e,n,o){if(void 0!==e){const r=e.slice(-1)[0];t.name=n,t.length=r[o.coordinateSystem].stop,t.bpLength=r.bp.stop,t.type="nuclear"}else t=n;return t}(a,t,e,s),a.chrIndex=o,a.id="chr"+a.name+"-"+n,!0===s.config.fullChromosomeLabels&&(i=this.organisms[n],a.name=i.scientificName+" chr"+a.name),a.bands=t,(a=s.getChromosomePixels(a)).centromerePosition=function(t,e){if(!1===t)return"";const n=e[0],o=e.slice(-1)[0],r=(o.bp.stop-n.bp.start)/20;return"p"===n.name[0]&&"q"===e[1].name[0]&&n.bp.stop-n.bp.start<r?"telocentric-p":"p"===e.slice(-2)[0].name[0]&&"q"===o.name[0]&&o.bp.stop-o.bp.start<r?"telocentric-q":""}(r,t),a=function(t,e){return e&&1===t.bands.length&&delete t.bands,t}(a,r),a}const xu='\n  <style>\n\n    #gear {\n      position: absolute;\n      right: 3px;\n      top: 24px;\n      z-index: 8001;\n      cursor: pointer;\n      height: 18px;\n      width: 18px;\n    }\n\n    #tools {\n      position: absolute;\n      width: 120px;\n      right: 27px;\n      top: 16px;\n      z-index: 8000;\n      background: white;\n      margin: 0;\n      border: 1px solid #CCC;\n      border-radius: 4px;\n      box-shadow: -2px 4px 6px #CCC;\n    }\n\n    #tools ul {\n      margin-block-start: 0;\n      margin-block-end: 0;\n      padding-inline-start: 0;\n    }\n\n    #tools li, #download li {\n      padding: 2px 12px 2px 12px;\n      cursor: pointer;\n    }\n\n    #tools li:hover,\n    #tools li.active,\n    #download li:hover {\n      background: #DDD;\n    }\n\n    #tools li.ideo-disabled,\n    #tools li.active.ideo-disabled,\n    #download li.ideo-disabled {\n      background: #FFF;\n      color: #CCC;\n      cursor: default;\n    }\n\n    #download {\n      position: absolute;\n      right: 3px;\n      top: 16px;\n      z-index: 8000;\n      background: white;\n      margin: 0;\n      padding-inline-start: 0;\n    }\n\n    #settings {\n      position: absolute;\n      right: 3px;\n      top: 16px;\n      z-index: 8000;\n      background: white;\n      margin: 0;\n      padding-inline-start: 0;\n    }\n\n    #about {\n      position: absolute;\n      right: 24px;\n      top: -8px;\n      z-index: 8000;\n      background: white;\n      width: 300px;\n      border: 1px solid #CCC;\n      padding: 10px;\n      border-radius: 4px;\n      box-shadow: -2px 4px 6px #CCC;\n      cursor: default;\n    }\n\n    #close {\n      float: right;\n      border: 1px solid #DDD;\n      border-radius: 4px;\n      padding: 0 6px;\n      background: #EEE;\n      font-weight: bold;\n      cursor: pointer;\n    }\n\n    #settings label {\n      display: inline;\n      text-decoration: underline;\n      text-decoration-style: dotted;\n      cursor: pointer;\n    }\n\n    #download {\n      position: absolute;\n      width: 120px;\n      top: -2px;\n      right: 120px;\n      z-index: 8000;\n      background: white;\n      margin: 0;\n      border: 1px solid #CCC;\n      border-radius: 4px;\n      box-shadow: -2px 4px 6px #CCC;\n    }\n\n    li {\n      list-style-type: none;\n    }\n\n    #settings .no-underline {\n      text-decoration: none;\n    }\n\n    #settings .setting {\n      margin-right: 8px;\n    }\n\n    #settings input[type="checkbox"], #settings input[type="radio"] {\n      position: relative;\n      top: 2px;\n    }\n\n    .area-header {\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 10px;\n      clear: both;\n    }\n\n    .area-content {\n      display: flex;\n      flex-wrap: wrap;\n    }\n\n    .area-content > div {\n      margin-right: 30px;\n      margin-bottom: 15px;\n    }\n\n    .tab-panel input[type="number"] {\n      width: 50px;\n    }\n\n    .tab-panel ul {\n      width: 600px;\n      list-style: none;\n      border-bottom: 1px solid #CCC;\n      box-sizing: border-box;\n      margin-bottom: 0;\n      padding-left: 0;\n    }\n\n    .tab-panel .nav:before, .tab-panel .nav:after {\n      content: " ";\n      display: table;\n      clear: both;\n    }\n\n    .tab-panel li {\n      float: left;\n      margin-right: 2px;\n      display: block;\n      margin-bottom: -1px;\n    }\n\n    .tab-panel li > a {\n      padding: 10px 15px;\n      text-decoration: none;\n      border-radius: 4px 4px 0 0;\n      display: block;\n      position: relative;\n    }\n\n    .tab-panel li.active > a {\n      border: 1px solid #CCC;\n      border-bottom: none;\n      background-color: white;\n    }\n\n    .tab-panel .tab-content {\n      width: 600px;\n    }\n\n    .tab-panel .tab-content > div {\n      display: none;\n      padding-top: 20px;\n      clear: both;\n    }\n\n    .tab-panel .tab-content > div {\n      padding: 20px 10px 5px 10px;\n    }\n\n    .tab-panel .tab-content > div.active {\n      display: block;\n      border: 1px solid #CCC;\n      border-top: none;\n    }\n\n  </style>',_u='<svg viewBox="0 0 512 512"><path fill="#AAA" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"/></svg>';function Au(t){t.forEach((t=>{t.classList.remove("active")}))}function Cu(){Au(document.querySelectorAll("#tools > ul > li")),document.querySelectorAll(".ideo-modal, .ideo-tool-panel").forEach((t=>{t.remove()})),document.querySelector("#tools").style.display="none"}function Su(t){const e=document.querySelectorAll("#tools > ul > li");e.forEach((n=>{const o=function(t){return Array.from(t.classList).includes("ideo-tool-hover")?"mouseenter":"click"}(n);n.addEventListener(o,(r=>{Au(e),n.classList+=" active";const i=n.id.split("-")[0],s=function(t,e){var n;return"download"===t&&(n=`\n    <div id="download" class="ideo-tool-panel">\n      <li id="download-image">Image</li>\n      <li id="download-annots" class="${document.querySelectorAll(".annot").length>0?"":"ideo-disabled"}">Annotations</li>\n    </div>\n  `),"about"===t&&(n=`\n    <div id="about" class="ideo-modal">\n      \n    <a href="https://github.com/eweitz/ideogram" target="_blank" rel="noopener">\n      Ideogram.js</a>, version ${a} <span id="close">x</span><br/>\n      <i>Chromosome visualization for the web</i>\n    </div>`),n.trim()}(i);"mouseenter"===o?(n.insertAdjacentHTML("beforeend",s),function(t,e,n,o){"mouseenter"===t&&n.addEventListener("mouseleave",(t=>{const n=t.toElement,r=n.id,i=document.querySelector(".ideo-tool-panel");document.querySelector("#tools").contains(n)&&i&&!i.contains(n)&&r!==e&&(Au(o),i.remove())}))}(o,i,n,e),"download"===i&&(document.querySelector("#download-image").addEventListener("click",(e=>{Cu(),function(t){var e=document.querySelector(t.selector),n="_ideo-undisplayed-dl-canvas";(o=document.createElement("canvas")).setAttribute("style","display: none"),o.setAttribute("id",n);var o,r=e.width.baseVal.value+30,i=e.cloneNode(!0);i.style.left="",o.setAttribute("width",r),document.body.appendChild(o),(o=document.getElementById(n)).width*=2,o.height*=2;var a=o.getContext("2d");a.setTransform(2,0,0,2,0,0),a.imageSmoothingEnabled=!1;var s=(new XMLSerializer).serializeToString(i),c=window.URL||window.webkitURL||window,l=new Image,u=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),d=c.createObjectURL(u);l.onload=function(){var t,e,n;a.drawImage(l,0,0),c.revokeObjectURL(d),t=o.toDataURL("image/png").replace("image/png","image/octet-stream"),e=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),(n=document.createElement("a")).setAttribute("download","ideogram.png"),n.setAttribute("href",t),n.setAttribute("target","_blank"),n.setAttribute("id","_ideo-undisplayed-dl-image-link"),n.setAttribute("style","display: none;"),document.body.appendChild(n),n.dispatchEvent(e),o.remove()},l.src=d}(t)})),document.querySelector("#download-annots").addEventListener("click",(e=>{const n=document.querySelector("#download-annots");!1===Array.from(n.classList).includes("ideo-disabled")&&(Cu(),t.downloadAnnotations())})))):document.querySelector("#gear").insertAdjacentHTML("beforeend",s)}))})),document.querySelectorAll("#close").forEach((t=>{t.addEventListener("click",(()=>{Cu()}))}))}function Lu(t){const e=`\n    ${xu}\n    <div id="gear" style="display: none">${_u}</div>\n    <div id="tools" style="display: none">\n      <ul>\n        <li id="download-tool" class="ideo-tool-hover">Download <span style="float: right">&blacktriangleright;</span></li>\n        <li id="about-tool">About</li>\n      </ul>\n    </div>`;document.querySelector(t.selector).insertAdjacentHTML("beforebegin",e),function(t){document.querySelector("#gear").addEventListener("click",(t=>{var e=document.querySelector("#tools");"none"===e.style.display?(e.style.display="",function(t){const e=document.querySelectorAll("#gear, #tools"),n=t=>{let n=0;e.forEach((e=>{e.contains(t.target)||(n+=1)})),n===e.length&&(Cu(),o())},o=()=>{document.removeEventListener("click",n)};document.addEventListener("click",n)}()):(e.style.display="none",Cu())})),Su(t)}(t),function(t){const e=document.querySelector(t.selector),n=document.querySelector("#gear"),o=document.querySelector("#tools");e.addEventListener("mouseover",(()=>n.style.display="")),e.addEventListener("mouseout",(()=>{"none"===o.style.display&&(n.style.display="none")})),n.addEventListener("mouseover",(()=>n.style.display=""))}(t)}class Tu{constructor(t){this._model=t,this._class="ModelAdapter"}static getInstance(t){return t.bands?new Tu(t):new ku(t)}getModel(){return this._model}getCssClass(){return""}}class ku extends Tu{constructor(t){super(t),this._class="ModelNoBandsAdapter"}getModel(){this._model.bands=[];const t="MT"===this._model.name,e=this._model.width;return(e>1||t)&&this._model.bands.push({name:"q",px:{start:0,stop:e,width:e},bp:{start:1,stop:this._model.bpLength??this._model.length},iscn:{start:1,stop:this._model.length}}),this._model}getCssClass(){return"noBands"}}class Mu{constructor(t){this._config=t,this._ploidy=new cs(this._config)}getArmColor(t,e,n){return this._config.armColors?this._config.armColors[n]:this._config.ancestors?this._getPolyploidArmColor(t,e,n):null}getBorderColor(t,e,n){const o=this._config,r=o.chrBorderColor?o.chrBorderColor:"#000";return e<o.ploidy||this._ploidy.exists(t,e,n)?r:"#fff"}getFillColor(){const t=this._config;if(!t.chrFillColor)return"#AAA";const e=t.chrFillColor;return"string"==typeof e?{arm:e,centromere:""}:e}_getPolyploidArmColor(t,e,n){if(this._ploidy.exists(t,e,n)){var o=this._ploidy.getAncestor(t,e,n);return this._config.ancestors[o]}return"transparent"}}class Eu{constructor(t){this._data=t,this.start=t.start,this.stop=t.stop,this.length=this.stop-this.start}getColor(t){return"ploidy"in this._data?"ploidy"in this._data&&this._data.ploidy[t]?this._getColor(t):"transparent":this._getColor(t)}_getColor(t){return Array.isArray(this._data.color)?this._data.color[t]:this._data.color}}class Pu{constructor(t,e,n){this._adapter=t,this._model=this._adapter.getModel(),this._config=e,this._ideo=n,this._color=new Mu(this._config),this._bumpCoefficient=5}static getInstance(t,e,n){const o=t.getModel().centromerePosition;return"telocentric-p"===o?new Nu(t,e,n):"telocentric-q"===o?new Fu(t,e,n):new Du(t,e,n)}_addPArmShape(t,e){return e?t.concat(this._getPArmShape()):t}_addQArmShape(t,e){return e?t.concat(this._getQArmShape()):t}render(t,e,n){var o,r,i,a,s,c,l;let u;if(o=this,t=t.append("g").attr("class","bands").attr("clip-path","url(#"+this._model.id+"-chromosome-set-clippath)"),r=this._renderArm(t,e,n,"p"),i=this._renderArm(t,e,n,"q"),this._renderRangeSet(t,e,n),a=[],a=this._addPArmShape(a,r),a=this._addQArmShape(a,i),s="0",c="",l=this.isFullyBanded(),"ancestors"in this._ideo.config&&!("rangeSet"in this._ideo.config)?(c=o._color.getArmColor(e,n,0),l&&(s="0.5")):l?(s=null,c="transparent"):"ancestors"in this._ideo.config||(s="1"),this._ideo.config.chrFillColor){const t=o._color.getFillColor();c=t.arm,u=t.centromere}return t.append("g").attr("class","chromosome-border").selectAll("path").data(a).enter().append("path").attr("fill",c).style("fill-opacity",s).style("fill",(function(t){if("acen"===t.class&&u)return u})).attr("stroke",(function(t,r){return o._color.getBorderColor(e,n,r)})).attr("stroke-width",(function(t){return"strokeWidth"in t?t.strokeWidth:1})).attr("d",(function(t){return t.path})).attr("class",(function(t){return t.class})),a}_renderRangeSet(t,e,n){var o,r,i,a;"rangeSet"in this._config&&(r=this._config.rangeSet.filter((function(t){return t.chr-1===e})).map((function(t){return new Eu(t)})),i=t.append("g").attr("class","range-set"),a=(o=this)._ideo,i.selectAll("rect.range").data(r).enter().append("rect").attr("class","range").attr("x",(function(t){return a.convertBpToPx(o._model,t.start)})).attr("y",0).attr("width",(function(t){return a.convertBpToPx(o._model,t.length)})).attr("height",this._config.chrWidth).style("fill",(function(t){return t.getColor(n)})))}_getShapeData(){var t,e,n,o;for(e=0;e<this._model.bands.length;e++)if("q"===this._model.bands[e].name[0]){t=this._model.bands[e];break}return n=this._model.bands.length-1,o=this._model.bands[n].px.stop,{x1:0,x2:t?t.px.start:o,x3:o,w:this._config.chrWidth,b:this._config.chrWidth/this._bumpCoefficient}}_getPArmShape(){var t=this._getShapeData(),e=t.x2-t.b;return this.isFullyBanded()||"ancestors"in this._ideo.config?{class:"",path:"M"+t.b+",0 L"+e+",0 Q"+(t.x2+t.b)+","+t.w/2+","+e+","+t.w+" L"+t.b+","+t.w+" Q-"+t.b+","+t.w/2+","+t.b+",0"}:[{class:"",path:"M"+t.b+",0 L"+(e-2)+",0 L"+(e-2)+","+t.w+" L"+t.b+","+t.w+" Q-"+t.b+","+t.w/2+","+t.b+",0"},{class:"acen",path:"M"+e+",0 Q"+(t.x2+t.b)+","+t.w/2+","+e+","+t.w+" L"+e+","+t.w+" L"+(e-2)+","+t.w+" L"+(e-2)+",0"}]}_getQArmShape(){var t=this._getShapeData(),e=t.x3-t.b,n=t.x2+t.b;return this.isFullyBanded()||"ancestors"in this._ideo.config?{class:"",path:"M"+n+",0 L"+e+",0 Q"+(t.x3+t.b)+","+t.w/2+","+e+","+t.w+" L"+n+","+t.w+" Q"+(t.x2-t.b)+","+t.w/2+","+n+",0"}:[{path:"M"+n+",0 L"+e+",0 Q"+(t.x3+t.b)+","+t.w/2+","+e+","+t.w+" L"+n+","+t.w+" L"+n+",0"},{class:"acen",path:"M"+n+",0Q"+(t.x2-t.b)+","+t.w/2+","+n+","+t.w+" L"+n+","+t.w+"L"+(n+2)+","+t.w+"L"+(n+2)+",0"}]}isFullyBanded(){return this._model.bands&&(2!==this._model.bands.length||"q"===this._model.bands[0].name[0])}_renderBands(t,e,n,o,r){var i,a,s;a="p"===r?0:1,s="","ancestors"in(i=this)._ideo.config&&!i.isFullyBanded()&&(s=i._color.getArmColor(e,n,a)),t.selectAll("path.band."+r).data(o).enter().append("path").attr("id",(function(t){return i._model.id+"-"+t.name.replace(".","-")})).attr("class",(function(t){return"band "+r+"-band "+t.stain})).attr("d",(function(t){var e;return"M "+i._ideo.round(t.px.start)+", 0l "+(e=i._ideo.round(t.px.width))+" 0 l 0 "+i._config.chrWidth+" l -"+e+" 0 z"})).style("fill",s)}_renderArm(t,e,n,o){var r=this._model.bands.filter((function(t){return t.name[0]===o}));return this._renderBands(t,e,n,r,o),Boolean(r.length)}}class Du extends Pu{constructor(t,e,n){super(t,e,n),this._class="MetacentricChromosome"}}class Nu extends Pu{constructor(t,e,n){super(t,e,n),this._class="TelocentricPChromosome",this._pArmOffset=3}_addPArmShape(t){return t.concat(this._getPArmShape())}_getPArmShape(){var t=this._getShapeData();return t.o=this._pArmOffset,[{class:"acen",path:"M"+(t.x2+2)+",1L"+(t.x2+t.o+3.25)+",1 L"+(t.x2+t.o+3.25)+","+(t.w-1)+" L"+(t.x2+2)+","+(t.w-1)},{class:"gpos66",path:"M"+(t.x2-t.o+5)+",0L"+(t.x2-t.o+3)+",0 L"+(t.x2-t.o+3)+","+t.w+" L"+(t.x2-t.o+5)+","+t.w,strokeWidth:.5}]}_getQArmShape(){var t=this._getShapeData(),e=t.x3-t.b,n=this._pArmOffset+3;return{class:"",path:"M"+(t.x2+n)+",0 L"+e+",0 Q"+(t.x3+t.b)+","+t.w/2+","+e+","+t.w+" L"+(t.x2+n)+","+t.w}}}class Fu extends Pu{constructor(t,e,n){super(t,e,n),this._class="TelocentricQChromosome",this._qArmOffset=3}_getPArmShape(){var t=this._getShapeData(),e=t.x3-t.b,n=this._qArmOffset;return{class:"",path:"M"+(t.x2+n)+",0 L"+(e+n)+",0 L"+(e+n)+","+t.w+" L"+t.b+","+t.w+" Q-"+t.b+","+t.w/2+","+t.b+",0"}}_addQArmShape(t){return t.concat(this._getQArmShape())}_getQArmShape(){var t=this._getShapeData();return t.o=this._qArmOffset,[{class:"acen",path:"M"+(t.x2+2)+",1 L"+(t.x2+t.o+3.25)+",1 L"+(t.x2+t.o+3.25)+","+(t.w-1)+" L"+(t.x2+2)+","+(t.w-1)},{class:"gpos66",path:"M"+(t.x2+t.o+5)+",0 L"+(t.x2+t.o+3)+",0 L"+(t.x2+t.o+3)+","+t.w+" L"+(t.x2+t.o+5)+","+t.w,strokeWidth:.5}]}}function Bu(t,e,n,o){var r,i,a,s,c;s=Di.select(this.selector+" defs"),c=Tu.getInstance(t),r=n*this.config.chrMargin,i=o.append("g").attr("id",t.id).attr("class","chromosome "+c.getCssClass()).attr("transform","translate(0, "+r+")"),a=Pu.getInstance(c,this.config,this).render(i,e,n),Di.select("#"+t.id+"-chromosome-set-clippath").remove(),s.append("clipPath").attr("id",t.id+"-chromosome-set-clippath").selectAll("path").data(a).enter().append("path").attr("d",(function(t){return t.path})).attr("class",(function(t){return t.class})),t.width<1&&Di.select("#"+t.id+" .bands").style("opacity",0)}function Iu(t){var e,n,o,r,i,a;if(e=t.chrIndex,r=this._layout.getChromosomeSetTranslate(e),a=this.selector+" #"+t.id+"-chromosome-set",Di.selectAll(a+" g").remove(),0===(n=Di.select(a)).nodes().length&&(n=Di.select(this.selector).append("g").attr("class","chromosome-set").attr("transform",r).attr("id",t.id+"-chromosome-set")),"sex"in this.config&&2===this.config.ploidy&&this.sexChromosomes.index===e)this.drawSexChromosomes(n,e);else for(o=1,this.config.ploidy>1&&(o=this._ploidy.getChromosomesNumber(e)),i=0;i<o;i++)this.appendHomolog(t,e,i,n)}function $u(t){var e,n;this.unhighlight(),this.config.taxid&&(e=t.id.split("-")[0].replace("chr",""),n=this.chromosomes[this.config.taxid][e].chrIndex,this._layout.rotate(n,n,t))}function Ou(){var t,e,n,o,r,i,a,s;e=(t=this).config,i=Di.select(e.container+" svg#_ideogram"),o=Di.select(e.container+" #_ideogramInnerWrap"),r=Di.select(e.container+" #_ideogramMiddleWrap"),s=1===(a=e.ploidy)?a:1.12*a;let c=0;"annotationsLayout"in e&&(c=e.annotationHeight*e.numAnnotTracks),"vertical"===e.orientation&&"comparative"!==e.perspective&&"collinear"!==e.geometry&&(n=t.numChromosomes*(e.chrWidth+e.chrMargin+c),"heatmap-2d"!==e.annotationsLayout&&(n=Math.ceil(n*s/e.rows),"SmallLayout"===t._layout._class&&(n+=100),n+=35,r.style("height",t._layout.getHeight()+"px"),o.style("max-width",n+"px").style("overflow-x","scroll").style("position","absolute"),i.style("min-width",n-5+"px"),t.config.showTools&&Lu(t)))}function Ru(){(function(t){var e=t._layout;Di.selectAll(t.selector+" .chromosome-set").insert("text",":first-child").data(t.chromosomesArray).attr("class",e.getChromosomeLabelClass()).attr("transform",e.getChromosomeSetLabelTranslate()).attr("x",e.getChromosomeSetLabelXPosition()).attr("y",(function(t,n){return e.getChromosomeSetLabelYPosition(n)})).attr("text-anchor",e.getChromosomeSetLabelAnchor()).each((function(e,n){!function(t,e,n,o){var r=function(t,e,n){var o;return o=-1===t.name.indexOf(" ")?[t.name]:t.name.match(/^(.*)\s+([^\s]+)$/).slice(1).reverse(),"sex"in n.config&&2===n.config.ploidy&&e===n.sexChromosomes.index&&(o="male"===n.config.sex?["XY"]:["XX"]),o}(t,e,o);Di.select(n).selectAll("tspan").data(r).enter().append("tspan").attr("dy",(function(t,e){return-1.2*e+"em"})).attr("x",o._layout.getChromosomeSetLabelXPosition()).attr("class",(function(t,e){var n=o.config.fullChromosomeLabels;return 1===e&&n?"italic":null})).text(String)}(e,n,this,t)}))})(this),function(t){var e=t._layout;Di.selectAll(t.selector+" .chromosome-set").each((function(n,o){Di.select(this).selectAll(".chromosome").append("text").attr("class","chrLabel").attr("transform",e.getChromosomeSetLabelTranslate()).attr("x",(function(t,n){return e.getChromosomeLabelXPosition(n)})).attr("y",(function(t,n){return e.getChromosomeLabelYPosition(n)})).text((function(e,n){return t._ploidy.getAncestor(o,n)})).attr("text-anchor","middle")}))}(this)}function Hu(t,e,n,o){var r;e-=1,r=function(t){var e,n,o;return void 0===t||!t.hasOwnProperty("x")||1===t.x&&1===t.y?(e=-8,n=-16,t={x:1,y:1},o=""):(o="scale("+t.x+","+t.y+")",e=-6,n=""===t?-16:-14),{x:e,y:n,scaleSvg:o,scale:t}}(o),"vertical"===n||""===n?function(t,e,n,o){var r,i,a,s=o.config;e=function(t,e){return(e.numAnnotTracks>1||""===e.orientation)&&(t-=1),t}(e,s),r=-4,!0===s.showBandLabels&&(r=s.chrMargin+s.chrWidth+26),i=s.chrMargin*e,s.numAnnotTracks>1==0&&(i+=1),a=i+r,t.selectAll("text.chrLabel").attr("transform",n.scaleSvg).selectAll("tspan").attr("x",n.x).attr("y",a)}(t,e,r,this):function(t,e,n,o){var r,i,a,s=o.config;r=-s.chrWidth-2,!0===s.showBandLabels&&(r=s.chrMargin+8),i=s.annotTracksHeight,"overlay"!==s.annotationsLayout&&(i*=2),a=3-(s.chrMargin*e+r)+i,a/=n.scale.x,t.selectAll("text.chrLabel").attr("transform","rotate(-90)"+n.scaleSvg).selectAll("tspan").attr("x",a).attr("y",n.y)}(t,e,r,this)}function Gu(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Wu(t){return t instanceof Gu(t).Element||t instanceof Element}function ju(t){return t instanceof Gu(t).HTMLElement||t instanceof HTMLElement}function qu(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Gu(t).ShadowRoot||t instanceof ShadowRoot)}var zu=Math.max,Uu=Math.min,Vu=Math.round;function Yu(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Xu(){return!/^((?!chrome|android).)*safari/i.test(Yu())}function Ku(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var o=t.getBoundingClientRect(),r=1,i=1;e&&ju(t)&&(r=t.offsetWidth>0&&Vu(o.width)/t.offsetWidth||1,i=t.offsetHeight>0&&Vu(o.height)/t.offsetHeight||1);var a=(Wu(t)?Gu(t):window).visualViewport,s=!Xu()&&n,c=(o.left+(s&&a?a.offsetLeft:0))/r,l=(o.top+(s&&a?a.offsetTop:0))/i,u=o.width/r,d=o.height/i;return{width:u,height:d,top:l,right:c+u,bottom:l+d,left:c,x:c,y:l}}function Qu(t){var e=Gu(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ju(t){return t?(t.nodeName||"").toLowerCase():null}function Zu(t){return((Wu(t)?t.ownerDocument:t.document)||window.document).documentElement}function td(t){return Ku(Zu(t)).left+Qu(t).scrollLeft}function ed(t){return Gu(t).getComputedStyle(t)}function nd(t){var e=ed(t),n=e.overflow,o=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+o)}function od(t,e,n){void 0===n&&(n=!1);var o,r,i=ju(e),a=ju(e)&&function(t){var e=t.getBoundingClientRect(),n=Vu(e.width)/t.offsetWidth||1,o=Vu(e.height)/t.offsetHeight||1;return 1!==n||1!==o}(e),s=Zu(e),c=Ku(t,a,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(i||!i&&!n)&&(("body"!==Ju(e)||nd(s))&&(l=(o=e)!==Gu(o)&&ju(o)?{scrollLeft:(r=o).scrollLeft,scrollTop:r.scrollTop}:Qu(o)),ju(e)?((u=Ku(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=td(s))),{x:c.left+l.scrollLeft-u.x,y:c.top+l.scrollTop-u.y,width:c.width,height:c.height}}function rd(t){var e=Ku(t),n=t.offsetWidth,o=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:o}}function id(t){return"html"===Ju(t)?t:t.assignedSlot||t.parentNode||(qu(t)?t.host:null)||Zu(t)}function ad(t){return["html","body","#document"].indexOf(Ju(t))>=0?t.ownerDocument.body:ju(t)&&nd(t)?t:ad(id(t))}function sd(t,e){var n;void 0===e&&(e=[]);var o=ad(t),r=o===(null==(n=t.ownerDocument)?void 0:n.body),i=Gu(o),a=r?[i].concat(i.visualViewport||[],nd(o)?o:[]):o,s=e.concat(a);return r?s:s.concat(sd(id(a)))}function cd(t){return["table","td","th"].indexOf(Ju(t))>=0}function ld(t){return ju(t)&&"fixed"!==ed(t).position?t.offsetParent:null}function ud(t){for(var e=Gu(t),n=ld(t);n&&cd(n)&&"static"===ed(n).position;)n=ld(n);return n&&("html"===Ju(n)||"body"===Ju(n)&&"static"===ed(n).position)?e:n||function(t){var e=/firefox/i.test(Yu());if(/Trident/i.test(Yu())&&ju(t)&&"fixed"===ed(t).position)return null;var n=id(t);for(qu(n)&&(n=n.host);ju(n)&&["html","body"].indexOf(Ju(n))<0;){var o=ed(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||e&&"filter"===o.willChange||e&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(t)||e}var dd="top",fd="bottom",hd="right",pd="left",md="auto",gd=[dd,fd,hd,pd],yd="start",vd="end",bd="viewport",wd="popper",xd=gd.reduce((function(t,e){return t.concat([e+"-"+yd,e+"-"+vd])}),[]),_d=[].concat(gd,[md]).reduce((function(t,e){return t.concat([e,e+"-"+yd,e+"-"+vd])}),[]),Ad=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Cd(t){var e=new Map,n=new Set,o=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var o=e.get(t);o&&r(o)}})),o.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),o}var Sd={placement:"bottom",modifiers:[],strategy:"absolute"};function Ld(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Td(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,o=void 0===n?[]:n,r=e.defaultOptions,i=void 0===r?Sd:r;return function(t,e,n){void 0===n&&(n=i);var r,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Sd,i),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],l=!1,u={state:s,setOptions:function(n){var r="function"==typeof n?n(s.options):n;d(),s.options=Object.assign({},i,s.options,r),s.scrollParents={reference:Wu(t)?sd(t):t.contextElement?sd(t.contextElement):[],popper:sd(e)};var a,l,f=function(t){var e=Cd(t);return Ad.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((a=[].concat(o,s.options.modifiers),l=a.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(l).map((function(t){return l[t]}))));return s.orderedModifiers=f.filter((function(t){return t.enabled})),s.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,o=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var i=r({state:s,name:e,instance:u,options:o});c.push(i||function(){})}})),u.update()},forceUpdate:function(){if(!l){var t=s.elements,e=t.reference,n=t.popper;if(Ld(e,n)){s.rects={reference:od(e,ud(n),"fixed"===s.options.strategy),popper:rd(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(t){return s.modifiersData[t.name]=Object.assign({},t.data)}));for(var o=0;o<s.orderedModifiers.length;o++)if(!0!==s.reset){var r=s.orderedModifiers[o],i=r.fn,a=r.options,c=void 0===a?{}:a,d=r.name;"function"==typeof i&&(s=i({state:s,options:c,name:d,instance:u})||s)}else s.reset=!1,o=-1}}},update:(r=function(){return new Promise((function(t){u.forceUpdate(),t(s)}))},function(){return a||(a=new Promise((function(t){Promise.resolve().then((function(){a=void 0,t(r())}))}))),a}),destroy:function(){d(),l=!0}};if(!Ld(t,e))return u;function d(){c.forEach((function(t){return t()})),c=[]}return u.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var kd={passive:!0};function Md(t){return t.split("-")[0]}function Ed(t){return t.split("-")[1]}function Pd(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Dd(t){var e,n=t.reference,o=t.element,r=t.placement,i=r?Md(r):null,a=r?Ed(r):null,s=n.x+n.width/2-o.width/2,c=n.y+n.height/2-o.height/2;switch(i){case dd:e={x:s,y:n.y-o.height};break;case fd:e={x:s,y:n.y+n.height};break;case hd:e={x:n.x+n.width,y:c};break;case pd:e={x:n.x-o.width,y:c};break;default:e={x:n.x,y:n.y}}var l=i?Pd(i):null;if(null!=l){var u="y"===l?"height":"width";switch(a){case yd:e[l]=e[l]-(n[u]/2-o[u]/2);break;case vd:e[l]=e[l]+(n[u]/2-o[u]/2)}}return e}var Nd={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Fd(t){var e,n=t.popper,o=t.popperRect,r=t.placement,i=t.variation,a=t.offsets,s=t.position,c=t.gpuAcceleration,l=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=a.x,h=void 0===f?0:f,p=a.y,m=void 0===p?0:p,g="function"==typeof u?u({x:h,y:m}):{x:h,y:m};h=g.x,m=g.y;var y=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),b=pd,w=dd,x=window;if(l){var _=ud(n),A="clientHeight",C="clientWidth";_===Gu(n)&&"static"!==ed(_=Zu(n)).position&&"absolute"===s&&(A="scrollHeight",C="scrollWidth"),(r===dd||(r===pd||r===hd)&&i===vd)&&(w=fd,m-=(d&&_===x&&x.visualViewport?x.visualViewport.height:_[A])-o.height,m*=c?1:-1),r!==pd&&(r!==dd&&r!==fd||i!==vd)||(b=hd,h-=(d&&_===x&&x.visualViewport?x.visualViewport.width:_[C])-o.width,h*=c?1:-1)}var S,L=Object.assign({position:s},l&&Nd),T=!0===u?function(t,e){var n=t.x,o=t.y,r=e.devicePixelRatio||1;return{x:Vu(n*r)/r||0,y:Vu(o*r)/r||0}}({x:h,y:m},Gu(n)):{x:h,y:m};return h=T.x,m=T.y,c?Object.assign({},L,((S={})[w]=v?"0":"",S[b]=y?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",S)):Object.assign({},L,((e={})[w]=v?m+"px":"",e[b]=y?h+"px":"",e.transform="",e))}const Bd={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},o=e.attributes[t]||{},r=e.elements[t];ju(r)&&Ju(r)&&(Object.assign(r.style,n),Object.keys(o).forEach((function(t){var e=o[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var o=e.elements[t],r=e.attributes[t]||{},i=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});ju(o)&&Ju(o)&&(Object.assign(o.style,i),Object.keys(r).forEach((function(t){o.removeAttribute(t)})))}))}},requires:["computeStyles"]},Id={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,o=t.name,r=n.offset,i=void 0===r?[0,0]:r,a=_d.reduce((function(t,n){return t[n]=function(t,e,n){var o=Md(t),r=[pd,dd].indexOf(o)>=0?-1:1,i="function"==typeof n?n(Object.assign({},e,{placement:t})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*r,[pd,hd].indexOf(o)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,i),t}),{}),s=a[e.placement],c=s.x,l=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[o]=a}};var $d={left:"right",right:"left",bottom:"top",top:"bottom"};function Od(t){return t.replace(/left|right|bottom|top/g,(function(t){return $d[t]}))}var Rd={start:"end",end:"start"};function Hd(t){return t.replace(/start|end/g,(function(t){return Rd[t]}))}function Gd(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&qu(n)){var o=e;do{if(o&&t.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Wd(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function jd(t,e,n){return e===bd?Wd(function(t,e){var n=Gu(t),o=Zu(t),r=n.visualViewport,i=o.clientWidth,a=o.clientHeight,s=0,c=0;if(r){i=r.width,a=r.height;var l=Xu();(l||!l&&"fixed"===e)&&(s=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:s+td(t),y:c}}(t,n)):Wu(e)?function(t,e){var n=Ku(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Wd(function(t){var e,n=Zu(t),o=Qu(t),r=null==(e=t.ownerDocument)?void 0:e.body,i=zu(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=zu(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-o.scrollLeft+td(t),c=-o.scrollTop;return"rtl"===ed(r||n).direction&&(s+=zu(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:s,y:c}}(Zu(t)))}function qd(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function zd(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function Ud(t,e){void 0===e&&(e={});var n=e,o=n.placement,r=void 0===o?t.placement:o,i=n.strategy,a=void 0===i?t.strategy:i,s=n.boundary,c=void 0===s?"clippingParents":s,l=n.rootBoundary,u=void 0===l?bd:l,d=n.elementContext,f=void 0===d?wd:d,h=n.altBoundary,p=void 0!==h&&h,m=n.padding,g=void 0===m?0:m,y=qd("number"!=typeof g?g:zd(g,gd)),v=f===wd?"reference":wd,b=t.rects.popper,w=t.elements[p?v:f],x=function(t,e,n,o){var r="clippingParents"===e?function(t){var e=sd(id(t)),n=["absolute","fixed"].indexOf(ed(t).position)>=0&&ju(t)?ud(t):t;return Wu(n)?e.filter((function(t){return Wu(t)&&Gd(t,n)&&"body"!==Ju(t)})):[]}(t):[].concat(e),i=[].concat(r,[n]),a=i[0],s=i.reduce((function(e,n){var r=jd(t,n,o);return e.top=zu(r.top,e.top),e.right=Uu(r.right,e.right),e.bottom=Uu(r.bottom,e.bottom),e.left=zu(r.left,e.left),e}),jd(t,a,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}(Wu(w)?w:w.contextElement||Zu(t.elements.popper),c,u,a),_=Ku(t.elements.reference),A=Dd({reference:_,element:b,strategy:"absolute",placement:r}),C=Wd(Object.assign({},b,A)),S=f===wd?C:_,L={top:x.top-S.top+y.top,bottom:S.bottom-x.bottom+y.bottom,left:x.left-S.left+y.left,right:S.right-x.right+y.right},T=t.modifiersData.offset;if(f===wd&&T){var k=T[r];Object.keys(L).forEach((function(t){var e=[hd,fd].indexOf(t)>=0?1:-1,n=[dd,fd].indexOf(t)>=0?"y":"x";L[t]+=k[n]*e}))}return L}const Vd={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,o=t.name;if(!e.modifiersData[o]._skip){for(var r=n.mainAxis,i=void 0===r||r,a=n.altAxis,s=void 0===a||a,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=void 0===h||h,m=n.allowedAutoPlacements,g=e.options.placement,y=Md(g),v=c||(y!==g&&p?function(t){if(Md(t)===md)return[];var e=Od(t);return[Hd(t),e,Hd(e)]}(g):[Od(g)]),b=[g].concat(v).reduce((function(t,n){return t.concat(Md(n)===md?function(t,e){void 0===e&&(e={});var n=e,o=n.placement,r=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?_d:c,u=Ed(o),d=u?s?xd:xd.filter((function(t){return Ed(t)===u})):gd,f=d.filter((function(t){return l.indexOf(t)>=0}));0===f.length&&(f=d);var h=f.reduce((function(e,n){return e[n]=Ud(t,{placement:n,boundary:r,rootBoundary:i,padding:a})[Md(n)],e}),{});return Object.keys(h).sort((function(t,e){return h[t]-h[e]}))}(e,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),w=e.rects.reference,x=e.rects.popper,_=new Map,A=!0,C=b[0],S=0;S<b.length;S++){var L=b[S],T=Md(L),k=Ed(L)===yd,M=[dd,fd].indexOf(T)>=0,E=M?"width":"height",P=Ud(e,{placement:L,boundary:u,rootBoundary:d,altBoundary:f,padding:l}),D=M?k?hd:pd:k?fd:dd;w[E]>x[E]&&(D=Od(D));var N=Od(D),F=[];if(i&&F.push(P[T]<=0),s&&F.push(P[D]<=0,P[N]<=0),F.every((function(t){return t}))){C=L,A=!1;break}_.set(L,F)}if(A)for(var B=function(t){var e=b.find((function(e){var n=_.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return C=e,"break"},I=p?3:1;I>0&&"break"!==B(I);I--);e.placement!==C&&(e.modifiersData[o]._skip=!0,e.placement=C,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Yd(t,e,n){return zu(t,Uu(e,n))}const Xd={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,o=t.name,r=n.mainAxis,i=void 0===r||r,a=n.altAxis,s=void 0!==a&&a,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=void 0===f||f,p=n.tetherOffset,m=void 0===p?0:p,g=Ud(e,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),y=Md(e.placement),v=Ed(e.placement),b=!v,w=Pd(y),x="x"===w?"y":"x",_=e.modifiersData.popperOffsets,A=e.rects.reference,C=e.rects.popper,S="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,L="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(_){if(i){var M,E="y"===w?dd:pd,P="y"===w?fd:hd,D="y"===w?"height":"width",N=_[w],F=N+g[E],B=N-g[P],I=h?-C[D]/2:0,$=v===yd?A[D]:C[D],O=v===yd?-C[D]:-A[D],R=e.elements.arrow,H=h&&R?rd(R):{width:0,height:0},G=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},W=G[E],j=G[P],q=Yd(0,A[D],H[D]),z=b?A[D]/2-I-q-W-L.mainAxis:$-q-W-L.mainAxis,U=b?-A[D]/2+I+q+j+L.mainAxis:O+q+j+L.mainAxis,V=e.elements.arrow&&ud(e.elements.arrow),Y=V?"y"===w?V.clientTop||0:V.clientLeft||0:0,X=null!=(M=null==T?void 0:T[w])?M:0,K=N+U-X,Q=Yd(h?Uu(F,N+z-X-Y):F,N,h?zu(B,K):B);_[w]=Q,k[w]=Q-N}if(s){var J,Z="x"===w?dd:pd,tt="x"===w?fd:hd,et=_[x],nt="y"===x?"height":"width",ot=et+g[Z],rt=et-g[tt],it=-1!==[dd,pd].indexOf(y),at=null!=(J=null==T?void 0:T[x])?J:0,st=it?ot:et-A[nt]-C[nt]-at+L.altAxis,ct=it?et+A[nt]+C[nt]-at-L.altAxis:rt,lt=h&&it?function(t,e,n){var o=Yd(t,e,n);return o>n?n:o}(st,et,ct):Yd(h?st:ot,et,h?ct:rt);_[x]=lt,k[x]=lt-et}e.modifiersData[o]=k}},requiresIfExists:["offset"]},Kd={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,o=t.name,r=t.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Md(n.placement),c=Pd(s),l=[pd,hd].indexOf(s)>=0?"height":"width";if(i&&a){var u=function(t,e){return qd("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:zd(t,gd))}(r.padding,n),d=rd(i),f="y"===c?dd:pd,h="y"===c?fd:hd,p=n.rects.reference[l]+n.rects.reference[c]-a[c]-n.rects.popper[l],m=a[c]-n.rects.reference[c],g=ud(i),y=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,v=p/2-m/2,b=u[f],w=y-d[l]-u[h],x=y/2-d[l]/2+v,_=Yd(b,x,w),A=c;n.modifiersData[o]=((e={})[A]=_,e.centerOffset=_-x,e)}},effect:function(t){var e=t.state,n=t.options.element,o=void 0===n?"[data-popper-arrow]":n;null!=o&&("string"!=typeof o||(o=e.elements.popper.querySelector(o)))&&Gd(e.elements.popper,o)&&(e.elements.arrow=o)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qd(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Jd(t){return[dd,hd,fd,pd].some((function(e){return t[e]>=0}))}var Zd=Td({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,o=t.options,r=o.scroll,i=void 0===r||r,a=o.resize,s=void 0===a||a,c=Gu(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&l.forEach((function(t){t.addEventListener("scroll",n.update,kd)})),s&&c.addEventListener("resize",n.update,kd),function(){i&&l.forEach((function(t){t.removeEventListener("scroll",n.update,kd)})),s&&c.removeEventListener("resize",n.update,kd)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Dd({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,o=n.gpuAcceleration,r=void 0===o||o,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,c=void 0===s||s,l={placement:Md(e.placement),variation:Ed(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Fd(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Fd(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},Bd,Id,Vd,Xd,Kd,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,o=e.rects.reference,r=e.rects.popper,i=e.modifiersData.preventOverflow,a=Ud(e,{elementContext:"reference"}),s=Ud(e,{altBoundary:!0}),c=Qd(a,o),l=Qd(s,r,i),u=Jd(c),d=Jd(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),tf="tippy-content",ef="tippy-backdrop",nf="tippy-arrow",of="tippy-svg-arrow",rf={passive:!0,capture:!0},af=function(){return document.body};function sf(t,e,n){if(Array.isArray(t)){var o=t[e];return null==o?Array.isArray(n)?n[e]:n:o}return t}function cf(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function lf(t,e){return"function"==typeof t?t.apply(void 0,e):t}function uf(t,e){return 0===e?t:function(o){clearTimeout(n),n=setTimeout((function(){t(o)}),e)};var n}function df(t){return[].concat(t)}function ff(t,e){-1===t.indexOf(e)&&t.push(e)}function hf(t){return[].slice.call(t)}function pf(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function mf(){return document.createElement("div")}function gf(t){return["Element","Fragment"].some((function(e){return cf(t,e)}))}function yf(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function vf(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function bf(t,e,n){var o=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[o](e,n)}))}function wf(t,e){for(var n=e;n;){var o;if(t.contains(n))return!0;n=null==n.getRootNode||null==(o=n.getRootNode())?void 0:o.host}return!1}var xf={isTouch:!1},_f=0;function Af(){xf.isTouch||(xf.isTouch=!0,window.performance&&document.addEventListener("mousemove",Cf))}function Cf(){var t=performance.now();t-_f<20&&(xf.isTouch=!1,document.removeEventListener("mousemove",Cf)),_f=t}function Sf(){var t=document.activeElement;if(function(t){return!(!t||!t._tippy||t._tippy.reference!==t)}(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var Lf=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),Tf=Object.assign({appendTo:af,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),kf=Object.keys(Tf);function Mf(t){var e=(t.plugins||[]).reduce((function(e,n){var o,r=n.name,i=n.defaultValue;return r&&(e[r]=void 0!==t[r]?t[r]:null!=(o=Tf[r])?o:i),e}),{});return Object.assign({},t,e)}function Ef(t,e){var n=Object.assign({},e,{content:lf(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(Mf(Object.assign({},Tf,{plugins:e}))):kf).reduce((function(e,n){var o=(t.getAttribute("data-tippy-"+n)||"").trim();if(!o)return e;if("content"===n)e[n]=o;else try{e[n]=JSON.parse(o)}catch(t){e[n]=o}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},Tf.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}var Pf=function(){return"innerHTML"};function Df(t,e){t[Pf()]=e}function Nf(t){var e=mf();return!0===t?e.className=nf:(e.className=of,gf(t)?e.appendChild(t):Df(e,t)),e}function Ff(t,e){gf(e.content)?(Df(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?Df(t,e.content):t.textContent=e.content)}function Bf(t){var e=t.firstElementChild,n=hf(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(tf)})),arrow:n.find((function(t){return t.classList.contains(nf)||t.classList.contains(of)})),backdrop:n.find((function(t){return t.classList.contains(ef)}))}}function If(t){var e=mf(),n=mf();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var o=mf();function r(n,o){var r=Bf(e),i=r.box,a=r.content,s=r.arrow;o.theme?i.setAttribute("data-theme",o.theme):i.removeAttribute("data-theme"),"string"==typeof o.animation?i.setAttribute("data-animation",o.animation):i.removeAttribute("data-animation"),o.inertia?i.setAttribute("data-inertia",""):i.removeAttribute("data-inertia"),i.style.maxWidth="number"==typeof o.maxWidth?o.maxWidth+"px":o.maxWidth,o.role?i.setAttribute("role",o.role):i.removeAttribute("role"),n.content===o.content&&n.allowHTML===o.allowHTML||Ff(a,t.props),o.arrow?s?n.arrow!==o.arrow&&(i.removeChild(s),i.appendChild(Nf(o.arrow))):i.appendChild(Nf(o.arrow)):s&&i.removeChild(s)}return o.className=tf,o.setAttribute("data-state","hidden"),Ff(o,t.props),e.appendChild(n),n.appendChild(o),r(t.props,t.props),{popper:e,onUpdate:r}}If.$$tippy=!0;var $f=1,Of=[],Rf=[];function Hf(t,e){var n,o,r,i,a,s,c,l,u=Ef(t,Object.assign({},Tf,Mf(pf(e)))),d=!1,f=!1,h=!1,p=!1,m=[],g=uf(V,u.interactiveDebounce),y=$f++,v=(l=u.plugins).filter((function(t,e){return l.indexOf(t)===e})),b={id:y,reference:t,popper:mf(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:v,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(o),cancelAnimationFrame(r)},setProps:function(e){if(!b.state.isDestroyed){N("onBeforeUpdate",[b,e]),z();var n=b.props,o=Ef(t,Object.assign({},n,pf(e),{ignoreAttributes:!0}));b.props=o,q(),n.interactiveDebounce!==o.interactiveDebounce&&(I(),g=uf(V,o.interactiveDebounce)),n.triggerTarget&&!o.triggerTarget?df(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):o.triggerTarget&&t.removeAttribute("aria-expanded"),B(),D(),_&&_(n,o),b.popperInstance&&(Q(),Z().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),N("onAfterUpdate",[b,e])}},setContent:function(t){b.setProps({content:t})},show:function(){var t=b.state.isVisible,e=b.state.isDestroyed,n=!b.state.isEnabled,o=xf.isTouch&&!b.props.touch,r=sf(b.props.duration,0,Tf.duration);if(!(t||e||n||o||k().hasAttribute("disabled")||(N("onShow",[b],!1),!1===b.props.onShow(b)))){if(b.state.isVisible=!0,T()&&(x.style.visibility="visible"),D(),H(),b.state.isMounted||(x.style.transition="none"),T()){var i=E();yf([i.box,i.content],0)}var a,c,l;s=function(){var t;if(b.state.isVisible&&!p){if(p=!0,x.offsetHeight,x.style.transition=b.props.moveTransition,T()&&b.props.animation){var e=E(),n=e.box,o=e.content;yf([n,o],r),vf([n,o],"visible")}F(),B(),ff(Rf,b),null==(t=b.popperInstance)||t.forceUpdate(),N("onMount",[b]),b.props.animation&&T()&&function(t,e){W(t,(function(){b.state.isShown=!0,N("onShown",[b])}))}(r)}},c=b.props.appendTo,l=k(),(a=b.props.interactive&&c===af||"parent"===c?l.parentNode:lf(c,[l])).contains(x)||a.appendChild(x),b.state.isMounted=!0,Q()}},hide:function(){var t=!b.state.isVisible,e=b.state.isDestroyed,n=!b.state.isEnabled,o=sf(b.props.duration,1,Tf.duration);if(!(t||e||n)&&(N("onHide",[b],!1),!1!==b.props.onHide(b))){if(b.state.isVisible=!1,b.state.isShown=!1,p=!1,d=!1,T()&&(x.style.visibility="hidden"),I(),G(),D(!0),T()){var r=E(),i=r.box,a=r.content;b.props.animation&&(yf([i,a],o),vf([i,a],"hidden"))}F(),B(),b.props.animation?T()&&function(t,e){W(t,(function(){!b.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&e()}))}(o,b.unmount):b.unmount()}},hideWithInteractivity:function(t){M().addEventListener("mousemove",g),ff(Of,g),g(t)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide(),b.state.isMounted&&(J(),Z().forEach((function(t){t._tippy.unmount()})),x.parentNode&&x.parentNode.removeChild(x),Rf=Rf.filter((function(t){return t!==b})),b.state.isMounted=!1,N("onHidden",[b]))},destroy:function(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),z(),delete t._tippy,b.state.isDestroyed=!0,N("onDestroy",[b]))}};if(!u.render)return b;var w=u.render(b),x=w.popper,_=w.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+b.id,b.popper=x,t._tippy=b,x._tippy=b;var A=v.map((function(t){return t.fn(b)})),C=t.hasAttribute("aria-expanded");return q(),B(),D(),N("onCreate",[b]),u.showOnCreate&&tt(),x.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),x.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&M().addEventListener("mousemove",g)})),b;function S(){var t=b.props.touch;return Array.isArray(t)?t:[t,0]}function L(){return"hold"===S()[0]}function T(){var t;return!(null==(t=b.props.render)||!t.$$tippy)}function k(){return c||t}function M(){var t,e,n=k().parentNode;return n?null!=(e=df(n)[0])&&null!=(t=e.ownerDocument)&&t.body?e.ownerDocument:document:document}function E(){return Bf(x)}function P(t){return b.state.isMounted&&!b.state.isVisible||xf.isTouch||i&&"focus"===i.type?0:sf(b.props.delay,t?0:1,Tf.delay)}function D(t){void 0===t&&(t=!1),x.style.pointerEvents=b.props.interactive&&!t?"":"none",x.style.zIndex=""+b.props.zIndex}function N(t,e,n){var o;void 0===n&&(n=!0),A.forEach((function(n){n[t]&&n[t].apply(n,e)})),n&&(o=b.props)[t].apply(o,e)}function F(){var e=b.props.aria;if(e.content){var n="aria-"+e.content,o=x.id;df(b.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(b.state.isVisible)t.setAttribute(n,e?e+" "+o:o);else{var r=e&&e.replace(o,"").trim();r?t.setAttribute(n,r):t.removeAttribute(n)}}))}}function B(){!C&&b.props.aria.expanded&&df(b.props.triggerTarget||t).forEach((function(t){b.props.interactive?t.setAttribute("aria-expanded",b.state.isVisible&&t===k()?"true":"false"):t.removeAttribute("aria-expanded")}))}function I(){M().removeEventListener("mousemove",g),Of=Of.filter((function(t){return t!==g}))}function $(e){if(!xf.isTouch||!h&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!b.props.interactive||!wf(x,n)){if(df(b.props.triggerTarget||t).some((function(t){return wf(t,n)}))){if(xf.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else N("onClickOutside",[b,e]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),f=!0,setTimeout((function(){f=!1})),b.state.isMounted||G())}}}function O(){h=!0}function R(){h=!1}function H(){var t=M();t.addEventListener("mousedown",$,!0),t.addEventListener("touchend",$,rf),t.addEventListener("touchstart",R,rf),t.addEventListener("touchmove",O,rf)}function G(){var t=M();t.removeEventListener("mousedown",$,!0),t.removeEventListener("touchend",$,rf),t.removeEventListener("touchstart",R,rf),t.removeEventListener("touchmove",O,rf)}function W(t,e){var n=E().box;function o(t){t.target===n&&(bf(n,"remove",o),e())}if(0===t)return e();bf(n,"remove",a),bf(n,"add",o),a=o}function j(e,n,o){void 0===o&&(o=!1),df(b.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,o),m.push({node:t,eventType:e,handler:n,options:o})}))}function q(){L()&&(j("touchstart",U,{passive:!0}),j("touchend",Y,{passive:!0})),function(t){return t.split(/\s+/).filter(Boolean)}(b.props.trigger).forEach((function(t){if("manual"!==t)switch(j(t,U),t){case"mouseenter":j("mouseleave",Y);break;case"focus":j(Lf?"focusout":"blur",X);break;case"focusin":j("focusout",X)}}))}function z(){m.forEach((function(t){var e=t.node,n=t.eventType,o=t.handler,r=t.options;e.removeEventListener(n,o,r)})),m=[]}function U(t){var e,n=!1;if(b.state.isEnabled&&!K(t)&&!f){var o="focus"===(null==(e=i)?void 0:e.type);i=t,c=t.currentTarget,B(),!b.state.isVisible&&function(t){return cf(t,"MouseEvent")}(t)&&Of.forEach((function(e){return e(t)})),"click"===t.type&&(b.props.trigger.indexOf("mouseenter")<0||d)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:tt(t),"click"===t.type&&(d=!n),n&&!o&&et(t)}}function V(t){var e=t.target,n=k().contains(e)||x.contains(e);if("mousemove"!==t.type||!n){var o=Z().concat(x).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:u}:null})).filter(Boolean);(function(t,e){var n=e.clientX,o=e.clientY;return t.every((function(t){var e=t.popperRect,r=t.popperState,i=t.props.interactiveBorder,a=r.placement.split("-")[0],s=r.modifiersData.offset;if(!s)return!0;var c="bottom"===a?s.top.y:0,l="top"===a?s.bottom.y:0,u="right"===a?s.left.x:0,d="left"===a?s.right.x:0,f=e.top-o+c>i,h=o-e.bottom-l>i,p=e.left-n+u>i,m=n-e.right-d>i;return f||h||p||m}))})(o,t)&&(I(),et(t))}}function Y(t){K(t)||b.props.trigger.indexOf("click")>=0&&d||(b.props.interactive?b.hideWithInteractivity(t):et(t))}function X(t){b.props.trigger.indexOf("focusin")<0&&t.target!==k()||b.props.interactive&&t.relatedTarget&&x.contains(t.relatedTarget)||et(t)}function K(t){return!!xf.isTouch&&L()!==t.type.indexOf("touch")>=0}function Q(){J();var e=b.props,n=e.popperOptions,o=e.placement,r=e.offset,i=e.getReferenceClientRect,a=e.moveTransition,c=T()?Bf(x).arrow:null,l=i?{getBoundingClientRect:i,contextElement:i.contextElement||k()}:t,u=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(T()){var n=E().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}}];T()&&c&&u.push({name:"arrow",options:{element:c,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),b.popperInstance=Zd(l,x,Object.assign({},n,{placement:o,onFirstUpdate:s,modifiers:u}))}function J(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Z(){return hf(x.querySelectorAll("[data-tippy-root]"))}function tt(t){b.clearDelayTimeouts(),t&&N("onTrigger",[b,t]),H();var e=P(!0),o=S(),r=o[0],i=o[1];xf.isTouch&&"hold"===r&&i&&(e=i),e?n=setTimeout((function(){b.show()}),e):b.show()}function et(t){if(b.clearDelayTimeouts(),N("onUntrigger",[b,t]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&d)){var e=P(!1);e?o=setTimeout((function(){b.state.isVisible&&b.hide()}),e):r=requestAnimationFrame((function(){b.hide()}))}}else G()}}function Gf(t,e){void 0===e&&(e={});var n=Tf.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",Af,rf),window.addEventListener("blur",Sf);var o=Object.assign({},e,{plugins:n}),r=function(t){return gf(t)?[t]:function(t){return cf(t,"NodeList")}(t)?hf(t):Array.isArray(t)?t:hf(document.querySelectorAll(t))}(t).reduce((function(t,e){var n=e&&Hf(e,o);return n&&t.push(n),t}),[]);return gf(t)?r[0]:r}Gf.defaultProps=Tf,Gf.setDefaultProps=function(t){Object.keys(t).forEach((function(e){Tf[e]=t[e]}))},Gf.currentInput=xf,Object.assign({},Bd,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}}),Gf.setDefaultProps({render:If});const Wf=Gf,jf='.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}';function qf(t){return Math.round(performance.now()-t)}function zf(){const t=this.annotDescriptions.annots,e=Object.values(t).slice(),n=e.filter((t=>t.type&&t.type.includes("paralogous"))),o=e.filter((t=>t.type&&t.type.includes("interacting gene")));return{related:e,paralogous:n,interacting:o,searched:Object.entries(t).filter((t=>t[1].type&&t[1].type.includes("searched gene")))[0][0]}}function Uf(t){const e=this,n=performance.now()-e.time.prevTooltipOff,o=e.time.prevTooltipAnnotDomId;if(n<300&&t.domId===o)return null;const r=t.name,i=e.annotDescriptions.annots[t.name].type.split(" ")[0],a=Vf(e);return Object.assign({tooltipGene:r,tooltipRelatedType:i},a)}function Vf(t){const e=t.getRelatedGenesByType();return{numRelatedGenes:e.related.length,numParalogs:e.paralogous.length,numInteractingGenes:e.interacting.length,searchedGene:e.searched}}const Yf="#AAA",Xf="#555",Kf="#D8D8D8",Qf="#888",Jf="#888",Zf="#333",th="#F55",eh="#A00",nh="#922D5E",oh="#D26D9E",rh="#CAA",ih="#866",ah="#E88",sh="#A55",ch="#FFC0CB",lh="#CF909B",uh="#99D",dh="#22C",fh="#CCF",hh="#33D",ph="#EEF",mh="#AAF",gh="#66B",yh="#116",vh="#7D7",bh="#393",wh="#3A3",xh="#060",_h="#93E9BE",Ah="#53AC7E",Ch="#51087E",Sh="#8138AE",Lh="#880ED4",Th="#5800A4",kh="#B24BF3",Mh="#520B83",Eh="#D7A1F9",Ph="#A771C9",Dh="#EEDDFF",Nh="#A771C9",Fh="#964B00",Bh="#660B00",Ih="#C87D32",$h="#722810",Oh="#DACDBA",Rh="#A99A89",Hh="#FFA500",Gh="#DD8000",Wh="#DD8300",jh="#883000",qh="#FFEA66",zh="#FFB466",Uh="#EEBB00",Vh="#A99A89",Yh="#FF3",Xh="#AA0",Kh="#FFFBCC",Qh="#CCC89A",Jh="#BCB",Zh="#9A9",tp="#DFD",ep="#CDC";function np(t){return"_"===t[0][0]}const op={_H:"Helical",_E:"Extracellular",_C:"Cytoplasmic"};function rp(t,e,n,o){let r=t[0];const i=t[3];let a=e.px.start+i.x,s=i.width;n||(a=e.px.length+e.px.start-(i.x+i.width));let c=30,l=14;const u=np(t),d=function(t){return"S"===t[0]}(t);let f="";if(o&&(c=38,u)){r=function(t){return t in op?op[t]:t.slice(1)}(t[0]),c=30,l=30;const o=`${t[0]} ${t[1]} ${t[2]}`;if((n&&i.x+i.width>e.px.length+3||!n&&i.x+i.width>e.px.length+3)&&(console.debug(`Truncate protein topology feature: ${o}`),s-=i.x+i.width-e.px.length,n||(a+=s)),f='data-topology="true"',s<0){const t="Width < 0, omit protein topology feature";return console.debug(`${t}: ${o}`),""}}const[h,p]="S"===(m=r)?["#FF2","#F99"]:"Extracellular"===m?[ph,mh]:"Cytoplasmic"===m?[Kh,Qh]:"Helical"===m||m.startsWith("Helical ---")?[Oh,Rh]:"Lumenal"===m?[qh,zh]:"Lumenal, melanosome"===m?[Uh,Vh]:"Mitochondrial matrix"===m?[tp,ep]:"Mitochondrial intermembrane"===m?[Jh,Zh]:"Perinuclear space"===m?[Dh,Nh]:"Nuclear"===m?[Eh,Ph]:"Beta stranded"===m?[uh,dh]:m.includes("conserved site")||m.includes("conserved domain")||"WGR domain"===m||"R3H domain"===m||m.includes("QLQ")||"Sema domain"===m||"Proteasome component (PCI) domain"===m||"Sterol-sensing domain"===m||"Erythropoietin/thrombopoietin"===m||"SPRY domain"===m||"Anaphylatoxin/fibulin"===m||"Tetratricopeptide repeat"===m||"Doublecortin domain"===m||m.includes("Glycosyl transferase")||m.toLowerCase().includes("lethal")&&m.toLowerCase().includes("c-terminal")||m.includes("PUB")||m.includes("Myogenic determination")||"Globin"===m||"GPS motif"===m||m.includes("D-like")||m.toLowerCase().includes("insertion domain")||"Macro domain"===m?[nh,oh]:m.includes("active site")||m.includes("hydroxylation site")||m.includes("catalytic domain")||m.includes("Lipid transport")||"BRCA1, serine-rich domain"===m||"Tower domain"===m||m.endsWith("attachment site")||m.endsWith("amyloid-beta peptide")||"Reverse transcriptase domain"===m||"Membrane attack complex component/perforin (MACPF) domain"===m||"Alpha-2-macroglobulin"===m||"Kinesin motor domain"===m||"Adenomatous polyposis coli tumour suppressor protein"===m||m.includes("endostatin")?[th,eh]:"Cyclin, C-terminal domain"===m||m.includes("OB C-terminal domain")||"Cationic amino acid transporter, C-terminal"===m||"High mobility group box domain"===m||"HMG-box domain"===m||m.includes("CUB domain")||"C-5 cytosine methyltransferase"===m||m.includes("(G-protein), alpha subunit")||"SCAN domain"===m||"Apolipoprotein A/E"===m||m.includes("Clusterin")||m.includes("SMAD domain")||"PLAC"===m||m.endsWith("tripeptidyl peptidase II")||"Prohormone convertase enzyme"===m||m.includes("rod domain")||"Osteopontin"===m||"SPRY-associated"===m||"C1q domain"===m||"OAR domain"===m||m.includes("FTO, C-terminal")||m.includes("ATPase, C-terminal")||m.includes("Hint domain")||"Laminin IV"===m||"NACHT-associated domain"===m||m.includes("FANCD2")||m.startsWith("Acyl-CoA")&&m.endsWith("C-terminal")||"Kinesin-like"===m||"GUCT"===m||m.includes("(APC) repeat")||m.includes("IP3R")?[rh,ih]:m.includes("trypsin domain")||m.includes("scaffold dimerization")||m.includes("eIF-4 gamma, MA3")||"Troponin"===m||"SKI/SNO/DAC domain"===m||m.toLowerCase().includes("large ribosom")||m.includes("KA1")||"V(D)J recombination-activating protein 1"===m||m.toLowerCase().includes("opiod")||"Corticotropin-releasing factor"===m||m.includes("2Fe-2S ferredoxin")||m.includes("acidic domain")?[ah,sh]:"EGF-like calcium-binding domain"===m||m.includes("PTX/LNS")||"HSR domain"===m||m.includes("MutS, clamp")||m.includes("S5 domain 2-like")||m.endsWith("CC1/2")||m.includes("MUN")||m.includes("second molybdopterin")?[wh,xh]:m.includes("binding site")||"EF-hand domain"===m||m.includes("EF hand-like")||"Zinc finger, nuclear hormone receptor-type"===m||m.includes("Serpin domain")||"Peptidase C14,  p20 domain"===m||"PWWP domain"===m||"Peptidoglycan binding-like"===m||"MAD homology 1, Dwarfin-type"===m||"F-actin binding"===m||m.includes("Glycoside hydrolase")&&m.endsWith("domain")||"p53 tumour suppressor family"===m||"Menin"===m||m.includes("von Hippel")&&m.includes("beta")||"Pointed domain"===m||m.includes("DNA binding")||"Helix-hairpin-helix domain"===m||"Helix-hairpin-helix motif"===m||"MIR motif"===m||"Rad52 family"===m||"Oxidoreductase FAD/NAD(P)-binding"===m||m.endsWith("NAD-binding")||m.endsWith("NAD binding")||m.includes("Bromo adjacent")||"HARP domain"===m||"FATC domain"===m||m.startsWith("XRN2-binding")||"SRCR-like domain"===m||m.includes("SRCR")||"Gamma-carboxyglutamic acid-rich (GLA) domain"===m||"Pterin-binding domain"===m||"Receptor, ligand binding region"===m||m.includes("DHEX domain")||"SANT/Myb domain"===m||m.includes("Forkhead-associated")||"Rap/Ran-GAP domain"===m||m.endsWith("C2 domain")||m.includes("tri-helix bundle domain")||m.includes("Cx50")||m.includes("tyrosine-rich")||"Filaggrin"===m?[uh,dh]:m.includes("dehydrogenase, molybdopterin binding")||"Zinc finger CCHC HIVEP-type"===m||"Cyclin, N-terminal"===m||"MAD homology, MH1"===m||"Sodium ion transport-associated"===m||"Sodium ion transport-associated domain"===m||m.endsWith("head")||m.includes("Pleckstrin homology domain")||"PH domain"===m||m.endsWith("pleckstrin homology-like domain")||"DEP domain"===m||"Post-SET domain"===m||m.includes("Glycoside hydrolase")||"Pyridoxal phosphate-dependent decarboxylase"===m||m.includes("OB1")||m.includes("OB3")||m.includes("OB domain")||"Fork head domain"===m||"Histone deacetylase domain"===m||m.includes("MG1")||"Homocysteine-binding domain"===m||m.startsWith("Acyl-CoA")&&m.endsWith("N-terminal")||"Clathrin light chain"===m||"Hexokinase, N-terminal"===m?[fh,hh]:m.includes("zinc-binding")||m.includes("DNA-binding")||"RUNT domain"===m||"G protein-coupled receptor, rhodopsin-like"===m||m.includes("CXC domain")||m.includes("Homeobox domain")||m.includes("BRCT domain")||m.includes("EF-hand")||"Laminin G domain"===m||"Peptidase C14, caspase non-catalytic subunit p10"===m||"ADD domain"===m||"PDZ domain"===m||"Krueppel-associated box"===m||"Ets domain"===m||"P domain"===m||m.includes("bHLH")||"Ras-associating (RA) domain"===m||"Ras-associating domain"===m||"Calcium/calmodulin-dependent protein kinase II, association-domain"===m||"Bromodomain"===m||"Bromodomain associated domain"===m||"SLIDE domain"===m||"Peptidase M24"===m||"Pentraxin-related"===m||m.includes("Notch ligand")||"Anti-proliferative protein"===m||m.includes("transpeptidase")||"Tuberin-type domain"===m||"Ras-like guanine nucleotide exchange factor, N-terminal"===m||m.includes("factor-binding protein")||m.includes("GPD")||"ELM2 domain"===m?[gh,yh]:"SH2 domain"===m||m.includes("SH2-like domain")||m.includes("Furin-like")||m.includes("heparin-binding")||"SRCR domain"===m||"EGF-like domain"===m||"Basic leucine zipper domain, Maf-type"===m||m.startsWith("Leucine zipper")||m.includes("Interleukin")&&m.includes("propeptide")||"Sirtuin family"===m||"Amino acid/polyamine transporter I"===m||"Peptidase M10, metallopeptidase"===m||"Metallothionein"===m||"DDHD domain"===m||"Zinc finger C2H2-type"===m||"Zinc finger, PARP-type"===m||m.endsWith("tail domain")||"SET domain"===m||"Hamartin"===m||m.includes("von Hippel")&&m.includes("alpha")||m.includes("transactivation domain 2")||"Phosphopantetheine binding ACP domain"===m||"Multicopper oxidase, second cupredoxin domain"===m||"Helicase, C-terminal"===m||m.includes("Carboxylesterase")||m.includes("presequence")||m.endsWith("CC3")?[vh,bh]:"Insulin-like"===m||"Fibroblast growth factor family"===m||"Nerve growth factor-related"===m||"Transforming growth factor-beta, C-terminal"===m||"Telomere-length maintenance and DNA damage repair"===m||"PDGF/VEGF domain"===m||m.includes("SH3-RhoGEF")||m.includes("MG4")||m.includes("RING domain")||m.includes("RING-type")||m.startsWith("DEAD/DEAH")||"Laminin alpha, domain I"===m||m.toLowerCase().includes("nuclear/hormone receptor")||"P-type trefoil domain"===m||m.includes("KHDRBS")?[wh,xh]:"SH3 domain"===m||"Variant SH3 domain"===m||m.endsWith("SH3 domain")||m.includes("copper-binding")||"Sushi/SCR/CCP domain"===m||m.includes("Coagulation factor 5/8")||"Basic-leucine zipper domain"===m||"Basic region leucine zipper"===m||"Sirtuin family, catalytic core domain"===m||"Amine oxidase"===m||m.includes("peroxidase")||m.includes("lid domain")||m.includes("prodomain")||"Pre-SET domain"===m||m.includes("transactivation domain")||m.includes(" activation domain")||m.includes("activating region")||"Thioesterase"===m||m.toLowerCase().includes("thiored")||m.includes("esterase")||m.endsWith("Claudin superfamily")||"Retinoblastoma-associated protein, A-box"===m||m.includes("Between PH and SH2")||m.includes("inter-SH2")||"Chromogranin A/B/C"===m||m.toLowerCase().includes("helicase")||m.endsWith("pro-domain")||"Brix domain"===m||"Coagulation Factor Xa inhibitory site"===m||"Trypsin Inhibitor-like, cysteine rich domain"===m||"WIF domain"===m||m.toLowerCase().includes("cystatin")||"EGF domain"===m||"Axin beta-catenin binding"===m||"Peptidase M2, peptidyl-dipeptidase A"===m||m.endsWith("phosphatase domain")||"PIGA, GPI anchor biosynthesis"===m||m.startsWith("Acyl-CoA")&&m.endsWith("middle domain")||m.includes("(COR)")||"K Homology domain, type 2"===m||m.includes("Phox")||m.includes("PB1")||m.includes("multifunctional domain")||m.includes("MutS, core")||"RAP domain"===m||m.endsWith("CC5")||m.includes("first molybdopterin")?[_h,Ah]:"Immunoglobulin-like domain"===m||m.toLowerCase().endsWith("immunoglobulin-like domain")||m.endsWith("Ig domain")||m.endsWith("Ig-like domain")||"Major facilitator superfamily domain"===m||m.includes("interface")||"Class I myosin tail homology domain"===m||"Myosin tail"===m||"Acyl transferase"===m||m.endsWith("transferase")||m.startsWith("Acyl-CoA")||"JAK, FERM F2 lobe domain"===m||"Sodium/solute symporter"===m||m.includes("foci domain")||m.includes("Receptor L-domain")||"Wnt"===m||"R-spondin, Fu-CRD domain"===m||m.endsWith("merisation domain")||m.endsWith("merization domain")||m.endsWith("merisation motif")||m.endsWith("merization motif")||m.endsWith("BTB/POZ domain")||m.includes("CBS domain")||"DZF domain"===m||"GS domain"===m||m.includes("kinase domain")||m.includes("FAT")||m.startsWith("von Willebrand factor, type A")||m.includes("VWA")||"Reeler domain"===m||"BMP/retinoic acid-inducible neural-specific protein"===m||"Low-density lipoprotein (LDL) receptor class A repeat"===m||"TILa domain"===m||m.includes("chromosome condensation")||"Immunoglobulin I-set"===m||"Kinesin-associated"===m||"SMCs flexible hinge"===m||m.includes("Cys-His rich domain")?[ch,lh]:"Immunoglobulin"===m||"Immunoglobulin domain"===m||"CD20-like family"===m||"Calponin homology domain"===m||m.endsWith("Calponin-homology domain")||m.includes("ATPase")||m.includes("ATP coupling domain")||m.includes("globular domain")||"Mitochondrial substrate/solute carrier"===m||"Major facilitator,  sugar transporter-like"===m||"Major facilitator, sugar transporter-like"===m||"Sodium:neurotransmitter symporter"===m||m.toLowerCase().includes("methyltransferase")||"Rhodanese-like domain"===m||m.startsWith("Thyroglobulin")||"Retinoblastoma-associated protein, B-box"===m||"C-type lectin-like"===m||"Galectin, carbohydrate recognition domain"===m||"VWFC domain"===m||m.includes("CFC domain")||"POLO box domain"===m||m.endsWith("domain 1")||m.endsWith("domain II")||"Fibronectin, type I"===m||"Cadherin-like"===m||"G-protein gamma-like domain"===m||"GoLoco motif"===m||"MyTH4 domain"===m||m.endsWith("isomerase")||"BTB/Kelch-associated"===m||"Stathmin family"===m?[Eh,Ph]:"Immunoglobulin C1-set"===m||m.includes("GTPase")||"RGS domain"===m||"Major facilitator superfamily"===m||"Fibronectin type II domain"===m||m.includes("ectodomain")||m.endsWith("receptor domain")||m.endsWith("receptor domain 4")||"MAM domain"===m||"IPT domain"===m||m.endsWith("extracellular")||"Link domain"===m||m.includes("connector domain")||"WW domain"===m||"WHIM1 domain"===m||"TNFR/NGFR cysteine-rich region"===m||"Frizzled domain"===m||"Netrin module, non-TIMP type"===m||"CFTR regulator domain"===m||m.endsWith("domain 2")||"GNAT domain"===m||"NIDO domain"===m||"Myosin head, motor domain"===m||"von Willebrand domain, type D domain"===m||"Kinesin-like KIF1-type"===m||m.includes("Paxillin")||"Clathrin, heavy chain/VPS, 7-fold repeat"===m||"Collagen IV, non-collagenous"===m?[kh,Mh]:"Fibronectin type III"===m||"Tissue factor"===m||"Immunoglobulin C2-set"===m||m.includes("immunoglobulin C2-set")||m.includes("protein interaction")||"SWIRM domain"===m||m.includes("(DSL) protein")||"Dishevelled protein domain"===m||m.endsWith("domain 3")||"DnaJ domain"===m||m.toLowerCase().includes("nuclear receptor")||"Gonadal family"===m?[Lh,Th]:"Immunoglobulin V-set domain"===m||m.includes("V-set domain")||m.includes("V-like")||"Frizzled/Smoothened, 7TM"===m||m.endsWith("domain 4")||"Integrin alpha-2"===m||"Calcium-activated potassium channel BK, alpha subunit"===m||m.includes("Dbl homology (DH) domain")||m.includes("Glycine rich")||m.toLowerCase().includes("exonuclease")||"WHIM2 domain"===m||m.includes("Coactivator CBP")||m.includes("cryptic polo")?[Ch,Sh]:"Desmoplakin, spectrin-like domain"===m||"Spectrin repeat"===m||m.endsWith("TED domain")||"Polyadenylate-binding protein/Hyperplastic disc protein"===m||m.includes(" cap domain")||m.toLowerCase().includes("agenet")||m.includes("TATA")||m.includes("Citron")||"RIH domain"===m||m.toLowerCase().includes("sclerostin")||"ZU5 domain"===m||"Piezo domain"===m||"Histone H2A/H2B/H3"===m?[Yh,Xh]:"Armadillo"===m||m.includes("Apple domain")||"Protocadherin"===m||"DIX domain"===m||"Ferritin-like diiron domain"===m||"4Fe-4S dicluster domain"===m||"Transferrin-like domain"===m||"PAS domain"===m||"PAS fold"===m||"Polyketide synthase, dehydratase domain"===m||"Flavodoxin/nitric oxide synthase"===m||"Flavodoxin-like fold"===m||"G-patch domain"===m||"Chromo domain"===m||m.toLowerCase().includes("tudor")||"Cytochrome P450"===m||"Potassium channel domain"===m||"G2 nidogen/fibulin G2F"===m||m.includes("bait region")||"WWE domain"===m||m.endsWith("deiodinase")||"Cobalamin (vitamin B12)-binding domain"===m||"Laminin domain II"===m||"Troponin I residues 1-32"===m||"KI67R"===m||m.includes("FAD-binding")?[Hh,Gh]:m.includes("Kringle")||m.includes("Peptidase M12A")||"TGF-beta, propeptide"===m||m.includes("autopeptidase")||m.includes("GAIN")||"PIK-related kinase"===m||m.includes("(PIK) domain")||"LDLR class B repeat"===m||"Actin family"===m||"Ferritin/DPS protein domain"===m||"PAS fold-3"===m||"Polyketide synthase, ketoreductase domain"===m||m.startsWith("Heat shock protein")&&m.endsWith("family")||"BAG domain"===m||"MCM domain"===m||m.endsWith("reductase-like")||"Lipase"===m||"Phospholipase A2 domain"===m||"Notch domain"===m||m.includes("LCCL domain")||m.includes("SANT-like")||"VWF/SSPO/Zonadhesin-like, cysteine-rich domain"===m||"Kappa casein"===m||"Casein, alpha/beta"===m||"Natriuretic peptide"===m||"EMI domain"===m||"Neurohypophysial hormone"===m||"Synuclein"===m||m.includes("Hydroxymethylglutaryl-CoA reductase")||m.includes("Perilipin")||m.includes("lipase")||m.includes("CRAL")||m.includes("SAND")||m.toLowerCase().includes("hsp")||m.toLowerCase().includes("bombesin")?[Oh,Rh]:"Notch, NOD domain"===m||"Cadherin, Y-type LIR-motif"===m||"Protein patched/dispatched"===m||m.includes("membrane-proximal")||"LicD family"===m||m.includes("MoaB/Mog")?[Ih,$h]:m.includes("transmembrane domain")||m.includes("trans-membrane domain")||m.includes("Transmembrane protein")||m.includes("7TM")||"Major intrinsic protein"===m||m.includes("Triadin")||m.includes("Collectrin")||m.includes("membrane glycoprotein")||"SEA domain"===m||"CD36 family"===m||m.includes("CD34")||"Hypoxia-inducible factor, alpha subunit"===m||"Hypoxia-inducible factor, alpha subunit-like"===m||"PKD domain"===m||m.includes("regulatory domain")||m.endsWith("E2 domain")||"PLAT/LH2 domain"===m||"Notch, NODP domain"===m||"Syndecan/Neurexin domain"===m||"Zona pellucida domain"===m||m.includes("Ion transport domain")||m.endsWith("Membrane transport protein MMPL domain")||m.includes("Caveolin")||"Band 7 domain"===m||m.includes("Shisa")||"ABC-2 family transporter protein"===m||"Anoctamin"===m||"Sodium-dependent phosphate transport protein"===m||m.includes("MHC II-interacting")?[Fh,Bh]:"DAPIN domain"===m||"Death effector domain"===m||"Death domain"===m||m.includes("death protein")||m.toLowerCase().includes("lethal")||m.includes("UBA domain")||m.includes("HECT domain")||m.toLowerCase().includes("ubiquitin")||m.includes("necrosis")||m.toLowerCase().includes("death")||m.includes("Bcl-2")||m.includes("CIDE-N")||"Disintegrin domain"===m||m.includes("TRAF")||m.includes("TIR")||m.toLowerCase().includes("caspase")||"Pellino family"===m?[Jf,Zf]:m.includes("unknown function")||m.toLowerCase().includes("unstructured")||m.startsWith("Uncharacterised")?[Yf,Xf]:m.toLowerCase().includes("leucine rich repeat")||m.includes("HIN")||m.includes("calcium")||m.toLowerCase().includes("calreticulin")||m.includes("cytokine receptor")||m.includes("pore forming")||m.includes("RHIM")||m.includes("SWIB")||"Ryanodine receptor Ryr"===m||m.includes("Armadillo")||"UME domain"===m||m.includes("WD40 domain")||"WSTF/Acf1/Cbp146"===m||"BCL7"===m||m.endsWith("repeat ring region")||m.includes("PANDER")||"GPCR, rhodopsin-like, 7TM"===m||"GPCR, family 2, secretin-like"===m||"GPCR, family 3, nine cysteines domain"===m||"G-protein coupled receptor"===m||m.toLowerCase().includes("orexin")||"[2Fe-2S]-binding"===m?[Wh,jh]:m.includes("repeat")||"Vitellinogen, open beta-sheet"===m||m.includes("Interleukin")&&m.includes("family")||/Interleukin-\d+$/.test(m)||"Chemokine interleukin-8-like domain"===m||m.includes("beta-ribbon")||m.includes("cytoplasmic domain")||m.toLowerCase().includes("interleukin")||"Citrate transporter-like domain"===m||m.toLowerCase().includes("calsequestrin")?[Hh,Gh]:m.includes("inhibit")||m.includes("central")||m.endsWith("tail")||m.endsWith("helical domain")||m.endsWith("helical domain HD2")||m.endsWith("coiled-coil domain")||m.endsWith("coiled-coil region")||m.includes("zinc ribbon fold")||m.includes("zinc-ribbon")||m.toLowerCase().includes("anhydrase")||"Macroglobulin domain"===m||m.includes("KH0")||m.includes("EGF")||m.toLowerCase().includes("olfact")||m.toLowerCase().includes("mucin")?[_h,Ah]:m.includes("Peptidase")||m.includes("Ras-binding")||m.includes("CRIB domain")?[uh,dh]:m.toLowerCase().includes("zinc finger")||m.toLowerCase().includes("zinc-finger")||m.includes("RING finger")||m.toLowerCase().includes("transcription factor")||"Paired domain"===m||"JmjC domain"===m||"BRK domain"===m||m.includes("MG3")||m.toLowerCase().includes("polycomb")||m.toLowerCase().includes("metallopeptidase")||m.toLowerCase().includes("metallo-peptidase")||m.toLowerCase().includes("metalloenzyme")||"K Homology domain, type 1"===m||m.includes("winged helix")||m.toLowerCase().includes("dehydrogenase")||m.includes("BAR")||m.includes("metal")||m.includes("redoxin")?[vh,bh]:m.startsWith("Tyrosine-protein kinase receptor")||"PTB/PI domain"===m||m.endsWith("receptor")||m.includes("cysteine rich")||m.includes("cysteine-rich")||"AWS domain"===m||m.toLowerCase().includes("somatomedin b")||m.includes("MHC class II")&&!m.includes("C-terminal")?[kh,Mh]:m.toLowerCase().includes("golgi")||"GOLD domain"===m||m.includes("deaminase")||m.includes("C-terminal core")||m.includes("nucleoside triphosphatase")||m.includes("globin")||m.includes("IspD/TarI")||"Telethonin"===m||m.includes("Sarcoglycan")||m.includes("toxin")||m.includes("ShKT")||m.includes("SAM")||m.includes("Sterile alpha motif")||m.includes("Unconventional myosin-X")||"CARD domain"===m||m.includes("endonuclease")||m.toLowerCase().includes("splicing factor")||m.toLowerCase().includes("interferon")||"Tropomyosin"===m||m.includes("R1 domain")?[nh,oh]:m.includes("TM")||m.toLowerCase().includes("transmembrane")||m.toLowerCase().includes("trans-membrane")?[Fh,Bh]:m.includes("binding domain")||m.includes("binding protein")?[gh,yh]:m.includes("Ribosomal protein")||m.toLowerCase().includes("ribosomal subunit")||m.toLowerCase().includes("ribosom")||m.toLowerCase().includes("ribonuclease")?[wh,xh]:m.includes("lectin")||m.includes("recognition")||m.toLowerCase().includes("solute carrier")||m.includes("isomerase")||"Clathrin-H-link"===m?[Eh,Ph]:m.startsWith("von Willebrand factor")||m.endsWith("receptor-binding")||m.toLowerCase().includes("link")||m.includes("basic domain")||m.includes("interacting")||m.includes("domain IV")||m.toLowerCase().includes("immunoglobulin domain")?[Lh,Th]:m.includes("transferase")||m.includes("merisation")?[ch,lh]:m.includes("oxygenase")?[th,eh]:m.includes("phosphatase")||m.includes("RNA polymerase")||m.includes("catenin")?[_h,Ah]:m.includes("bind")||m.includes("EF")?[uh,dh]:m.includes("C-termin")||m.includes("C termin")||m.includes("kinase")?[rh,ih]:m.includes("N-termin")||m.includes("N-teminal")||m.includes("N termin")||m.toLowerCase().includes("decarboxylase")||m.toLowerCase().includes("hydrolase")||m.includes("PH domain")||m.includes("cytosolic")||m.toLowerCase().includes("homeobox")?[fh,hh]:[Kf,Qf];var m;d&&(r="Signal peptide",l=8,c+=3),u&&("Helical"===r?r="Transmembrane":r.startsWith("Helical --- Name=")&&(r=r.replace("Helical --- Name=","Transmembrane: ")));const g=`${t[2]}&nbsp;aa`,y=`data-subpart="${r} ${ap} ${g}"`,v=`x="${a}" width="${s}" y="${c}" height="${l}"`,b=`class="subpart domain${u?" topology":""}" `,w=function(t,e,n,o,r,i=!1){const a=e+o,s=`stroke="${r}"`,c=t+n;let l="",u="";return i&&(l=`<line class="subpart-line" x1="${t}" x2="${c}" y1="${e}" y2="${e}" ${s} />`,u=`<line class="subpart-line" x1="${t}" x2="${c}" y1="${a}" y2="${a}" ${s} />`),`<line class="subpart-line" x1="${t}" x2="${t}" y1="${e}" y2="${a}" ${s} /><line class="subpart-line" x1="${c}" x2="${c}" y1="${e}" y2="${a}" ${s} />`+l+u}(a,c,s,l,p,!u);return`<rect ${b} rx="1.5" fill="${h}" ${v} ${y} ${f}/>`+w}const ip=5,ap="<span style='color: #CCC'>|</span>",sp="5'-UTR",cp="3'-UTR",lp={"5'-UTR":20,exon:20,intron:20,"3'-UTR":20},up={"5'-UTR":"#155069",exon:"#DAA521",intron:"#FFFFFF00","3'-UTR":"#357089"},dp={"5'-UTR":"#70A099",exon:"#BA8501","3'-UTR":"#90C0B9"},fp={"5'-UTR":"five-prime-utr",exon:"exon","3'-UTR":"three-prime-utr",intron:"intron"},hp=`<style>\n  ._ideoGeneStructureContainerName {\n    position: relative;\n    left: 45px;\n    margin-right: 20px;\n  }\n  ._ideoGeneStructureContainerName.pre-mRNA {\n    left: 70px;\n    margin-right: 70px;\n  }\n  ._ideoGeneStructureContainer rect:hover + line {\n    visibility: hidden;\n  }\n  ._ideoGeneStructureContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n  }\n  ._ideoGeneStructureContainer:hover ._ideoSpliceToggle {\n    visibility: visible;\n  }\n  ._ideoGeneStructureContainer ._ideoSpliceToggle {\n    visibility: hidden;\n  }\n  ._ideoSpliceToggle {\n    margin-left: 53px; background-color: #EEE;\n  }\n  ._ideoSpliceToggle.pre-mRNA {\n    margin-left: 43px; background-color: #F8F8F8;\n  }\n  ._ideoHoveredSubpart {\n    stroke: #D0D0DD !important; stroke-width: 3px;\n  }\n  #_ideoGeneStructureTip {\n    font-style: italic;\n  }\n\n  ${jf}\n\n  .tippy-box {\n    font-size: 12px;\n  }\n\n  .tippy-content {\n    padding: 3px 7px;\n  }\n  </style>`,pp='<span id="_ideoGeneStructureTip">Hover for details</span>';function mp(){return document.querySelector("._ideoGeneStructureFooter")}function gp(t){const e=mp(),n=t.querySelector("svg").getAttribute("data-ideo-footer");e.innerHTML=`&nbsp;<br/>${n}`}function yp(t,e=0){const[n,o]=bp(t,e),r=0===o;document.querySelector("#_ideoGeneStructureMenu").options[o].selected=!0;const i=Gp(n,t,t.spliceExons)[0],a=document.querySelector("._ideoGeneStructureSvgContainer");a.innerHTML=i,Ip(t.spliceExons,r),gp(a),t.addedSubpartListeners=!1,Ep(t),Dp(t)}function vp(t){return t.split("-").slice(0,-1).join("-")}function bp(t,e=0){let n,o;const r=document.querySelector("#_ideoGeneStructureMenu");if(r){const t=r.options.length;n=r.selectedIndex+e,n>=t?n=0:n<0&&(n=t-1),o=r.options[n].value}else{const t=document.querySelector("._ideoGeneStructure");if(!t)return null;o=t.getAttribute("data-ideo-gene-structure-name"),n=0}const i=vp(o);return[t.geneStructureCache[i].find((t=>t.name===o)),n]}function wp(t){if("s"===t.key){const t=document.querySelector("._ideoSpliceToggle input");if(!t)return;const e=document.querySelector("#_ideoSubpartText");e&&(e.innerHTML="&nbsp;"),t.dispatchEvent(new MouseEvent("click"))}}function xp(t,e){const n=t.slice(),o=e?cp:sp,r=t.some((t=>t[0]===o));return t.forEach(((o,i)=>{if(0===i)return;const a=t[i-1],s=a[0]===cp,c=a[0]===sp;"exon"===o[0]&&r&&(!e&&s||e&&c)&&o[1]!==a[1]+a[2]-1&&2!==a[2]&&(n[i]=a,n[i-1]=o)})),n}function _p(t,e){return t.classList.contains(e)}function Ap(t,e,n,o){const r="five-prime-utr",i="three-prime-utr",a=_p(e,r),s=_p(e,i),c=!_p(t,i),l=!_p(t,r);return o&&(!n&&s&&c||n&&a&&l)}function Cp(t,e,n,o){const r=e[0]===sp,i=e[0]===cp,a=t[0]!==cp,s=t[0]!==sp;return o&&(!n&&i&&a||n&&r&&s)}function Sp(){const t="_ideoHoveredSubpart";document.querySelectorAll(`.${t}`).forEach((e=>e.classList.remove(t)))}function Lp(t){const e=Array.from(document.querySelectorAll("rect.subpart")),n="+"===document.querySelector("._ideoGeneStructure").getAttribute("data-ideo-strand"),o=function(t,e){const n=t.slice(),o=Array.isArray(t[0]);let r;if(o){const n=e?cp:sp;r=t.some((t=>t[0]===n))}else{const n=e?"three-prime-utr":"five-prime-utr";r=t.some((t=>_p(t,n)))}return t.forEach(((i,a)=>{if(a===n.length-1)return;const s=t[a+1];(o?Cp:Ap)(i,s,e,r)&&(n.splice(a,1,s),n.splice(a+1,1,i))})),n}(e,n);if(0===o.length)return;const r="_ideoHoveredSubpart",i=document.querySelector(`.${r}`);if(!i)return t.stopPropagation(),void t.preventDefault();let a;o.forEach(((t,e)=>{t.classList.contains(r)&&(a=e)}));const s={view:window,bubbles:!1,cancelable:!0},c=new MouseEvent("mouseenter",s),l=new MouseEvent("mouseleave",s),u=n?"ArrowLeft":"ArrowRight",d=n?"ArrowRight":"ArrowLeft";let f;if(t.key===u?f="left":t.key===d&&(f="right"),void 0===f||function(t,e,n){const o="left"===n;return 0===t&&o||t===e.length-1&&!o}(a,o,f))return t.stopPropagation(),void t.preventDefault();Sp();const h=t.altKey,p=t.metaKey;if(t.key===u){i.dispatchEvent(l);let t=a-1;h&&(t=a-10<0?0:a-10),p&&(t=0),o[t].dispatchEvent(c)}else if(t.key===d){i.dispatchEvent(l);const t=o.length-1;let e=a+1;h&&(e=a+10>t?t:a+10),p&&(e=t),o[e].dispatchEvent(c)}t.stopPropagation(),t.preventDefault()}function Tp(){return document.querySelector("#_ideoGeneStructureMenuContainer")}function kp(t,e){mp().innerHTML=t,Dp(e)}function Mp(t,e){const n=t;n.addEventListener("mouseenter",(t=>{Sp(),t.target.classList.add("_ideoHoveredSubpart");const o=mp();e.originalTooltipFooter=o.innerHTML,kp(`<div id="_ideoSubpartText" style="margin-bottom: -10px; max-width: 260px;"">${n.getAttribute("data-subpart")}</div>${o.innerHTML.replace("&nbsp;","")}`,e);const r=Tp();r&&(r.style.marginTop="")})),n.addEventListener("mouseleave",(t=>{t.target.classList.remove("_ideoHoveredSubpart"),kp(e.originalTooltipFooter,e);const n=Tp();n&&(n.style.marginTop="4px")}))}function Ep(t){const e=document.querySelectorAll("rect.subpart");if(0===e.length)return;t.subparts=e;const n=document.querySelector("._ideoGeneStructureContainer");n.addEventListener("mouseenter",(()=>{document.addEventListener("keydown",Lp),t.addedMenuListeners||(t.addedMenuListeners=!0,gp(n),document.querySelector("._ideogramTooltip").addEventListener("change",(()=>{yp(t),t.oneTimeDelayTooltipHideMs=2e3})),t.tissueCache&&(document.querySelector("._ideoTooltipFooter").style.display="none"))})),n.addEventListener("mouseleave",(e=>{t.oneTimeDelayTooltipHideMs=2e3,t.tissueCache&&(document.querySelector("._ideoTooltipFooter").style.display="");const n=function(t){const e=document.querySelector("._ideogramTooltip").getBoundingClientRect(),n=t.screenX,o=t.screenY;return n>e.left&&n<e.right&&o>e.top&&o<e.bottom}(e);!0===n&&kp(pp,t),t.addedMenuListeners=!1,document.removeEventListener("keydown",Lp)})),t.addedSubpartListeners||(t.addedSubpartListeners=!0,e.forEach((e=>{Mp(e,t)})))}function Pp(t){return{theme:"light-border",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:t}}]},onShow:function(){document.querySelectorAll("[data-tippy-root]").forEach((t=>t.remove()))}}}function Dp(t){const e=Pp(["top-start","top"]);t.tippy=Wf("._ideoSpliceToggle[data-tippy-content]",e);const n=Pp(["bottom"]);n.popperOptions.modifiers.push({name:"offset",options:{offset:[-5,20]}});const o=Wf("._ideoMenuArrow[data-tippy-content]",n);t.tippy=t.tippy.concat(o)}function Np(t){null!==bp(t)&&(function(t){document.addEventListener("keydown",wp);const e=document.querySelector("._ideoGeneStructureContainer"),n=document.querySelector("._ideoSpliceToggle");e&&n.addEventListener("change",(e=>{!function(t){t.spliceExons=!t.spliceExons;const e=t.spliceExons,[n,o]=bp(t),r=0===o,[,i,a]=Gp(n,t,e),s=document.querySelector("#_ideoProtein");s&&!e&&(s.style.display="none");const c=document.querySelectorAll(".intron").length>0;e||c?document.querySelectorAll(".intron").forEach((t=>t.remove())):function(t,e,n){let o=0;const r=document.querySelectorAll(".subpart");t.forEach(((t,n)=>{const i=n-o;if(e[i][0]!==t[0]){const e=t[3].summary,n=`<rect class="subpart intron" y="${ip}" height="20" fill="#FFFFFF00" ${e} />`;r[i].insertAdjacentHTML("beforebegin",n),o+=1}})),document.querySelectorAll(".intron").forEach((t=>{Mp(t,n)}))}(i,a,t),document.querySelectorAll(".subpart-line.rna").forEach((t=>t.remove()));const l=e?a:i;Di.select("._ideoGeneStructure").selectAll(".subpart").data(l).transition().duration(750).attr("x",((t,e)=>l[e][3].x)).attr("width",((t,e)=>l[e][3].width)).on("end",((n,o)=>{if(o!==l.length-1)return;s&&e&&(s.style.display=""),document.querySelectorAll(".subpart:not(.domain)").forEach(((t,e)=>{const n=Hp(l[e]);t.insertAdjacentHTML("afterend",n)})),Ip(e,r);const i=document.querySelector("#_ideoTranscriptLengthBp");if(!i)return;const a=$p(l,e).toLocaleString();i.innerText=`${a} bp`,t.tippy[0].show()}))}(t),Ep(t),e.stopPropagation()}))}(t),Ep(t),function(t){document.querySelector("._ideoGeneStructureContainer").addEventListener("click",(e=>{"_ideoGeneStructureMenu"===e.target.id&&e.stopPropagation();let n=e.target;if("svg"===n.parentElement.tagName&&(n=n.parentElement),Array.from(n.classList).includes("_ideoMenuArrow")){const o=n.getAttribute("data-dir");yp(t,"down"===o?1:-1),e.stopPropagation()}}))}(t),function(t){const e=bp(t)[0].strand;if("+"===e)return;const n=document.querySelector("._ideoTooltipFooter");n.innerText=n.innerText.replace(")",`, ${e})`)}(t),Dp(t))}function Fp(t){return t?"Unsplice exons (s)":"Splice exons (s)"}function Bp(t,e=!0){let n="",o=" and protein",r="without";t||(n="pre-",o="",r="with");const i=e?"Canonical":"Alternative";return{title:`${i} transcript per Ensembl, ${r} introns`,name:`${i} ${n}mRNA ${o}`}}function Ip(t,e){const n=document.querySelector("._ideoGeneStructureContainerName"),o=document.querySelector("._ideoSpliceToggle");if(n&&o){[n,o].forEach((t=>t.classList.remove("pre-mRNA"))),t||[n,o].forEach((t=>t.classList.add("pre-mRNA")));const{title:r,name:i}=Bp(t,e);n.textContent=i,n.title=r}}function $p(t,e=!1){const n=t.filter((t=>"exon"===t[0]));e&&(t=n);const o=t.slice(-1)[0];return o[1]+o[2]+(e?n.length-1:0)}function Op(t,e=null){const n=$p(t)/250/(e?3:1),o=e??t;for(let t=0;t<o.length;t++){const e=o[t];if(3!==e.length)continue;const r=e[2],i=e[1]/n,a=r/n,s=e[0];o[t].push({type:s,x:i,width:a})}return o}function Rp(t,e,n,o,r){"-"===o&&(n=e-n+1);const i=e>1?`${n} of ${e} `:"",a=t[0].toUpperCase()+t.slice(1),s=r.toLocaleString();return`data-subpart="${a} ${i}${ap} ${s} bp"`}function Hp(t){const e=t[0],n=t[3].x,o=lp[e],r=ip+o,i=`stroke="${dp[e]}"`;return`<line class="subpart-line rna" x1="${n}" x2="${n}" y1="${ip}" y2="${r}" ${i} />`}function Gp(t,e,n=!1){const o=t.strand,r=t.subparts;let i,a=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){const r=t[o],[i,a]=r.slice(1);if(i>n){const t=n,o=i-n-1;e.push(["intron",t,o])}n=i+a,e.push(r)}return Op(e)}(r),s=function(t){const e=[];let n=0,o=0;for(let r=0;r<t.length;r++){const i=t[r],[a,s,c]=i,l=s===o;let u,d,f;r>0&&([,u,d]=t[r-1]),f=l?s:r>0&&s===u?o:r>0&&s<=u+d?o+d-c:n;const h=f+c,p=[a,f,c+1];e.push(p),n=h,o=f}return Op(e)}(r);i=n?s:a;const c=document.querySelector("._ideoSpliceToggle");if(c){const t=Fp(n);c.setAttribute("data-tippy-placement","right"),c.setAttribute("data-tippy-content",t),Dp(e)}const l=[],u=`<rect fill="black" x="0" width="248" y="${ip+10}" height="1"/>`;l.push(u);const d={"5'-UTR":0,exon:0,intron:0,"3'-UTR":0},f={"5'-UTR":0,exon:0,intron:0,"3'-UTR":0},h="+"===o;i=xp(i,h),a=xp(a,h),s=xp(s,h);for(let t=0;t<i.length;t++){const e=i[t][0];e in f&&(f[e]+=1)}for(let t=0;t<i.length;t++){const e=i[t],r=e[0];let c="black";r in up&&(c=up[r]);const u=lp[r],h=e[2],p=`x="${e[3].x}" width="${e[3].width}" y="${ip}" height="${u}"`,m=`class="subpart ${fp[r]}" `,g=f[r];d[r]+=1;const y=Rp(r,g,d[r],o,h);n?"intron"!==r&&(s[t][3].summary=y):a[t][3].summary=y;const v=`<rect ${m} rx="1.5" fill="${c}" ${p} ${y}/>`+Hp(e);l.push(v)}const p="position: relative; width: 274px; margin: auto;";let m=`style="${p} left: 10px;"`;"-"===o&&(m=`transform="scale(-1 1)" style="${p} left: -10px;"`);const g=t.name,y=vp(g),v=function(t,e,n){const o="_ideoGeneStructureMenuContainer",r="margin-bottom: 4px; margin-top: 4px; clear: both;",i=e.geneStructureCache[t];if(1===i.length)return`<div id="${o}" style="${r}">Transcript: ${i[0].name}</div>`;const a=i.map((t=>{const e=t.name;let o="";return n&&n===t.name&&(o=" selected"),`<option value="${e}" ${o}>${e}</option>`})).join(""),s="_ideoGeneStructureMenu",c=function(){const t="width: 12px; height: 12px; cursor: pointer;user-select: none;",e='class="_ideoMenuArrow"',n='data-tippy-placement="bottom-start"',o=`${`style="${t}; margin-left: 2px;"`} ${e} data-dir="up" data-tippy-content="Previous transcript" ${n}`;return`<svg ${`${`style="${t}; margin-left: 5px;"`} ${e} data-dir="down" data-tippy-content="Next transcript" ${n}`}>${mc({shape:"triangle",color:"#888"},{config:{orientation:"down"}})}</svg><svg ${o}>${mc({shape:"triangle",color:"#888"},{config:""})}</svg>`}();return`<div id="${o}" style="${r}"><label for="${s}">Transcript:</label> <select id="${s}" name="${s}">${a}</select>`+c+"</div>"}(y,e,g).replaceAll('"',"'"),b=function(t,e){var n;return null===(n=e.proteinCache[t])||void 0===n?void 0:n.some((t=>t.protein.some((t=>np(t)))))}(y,e),[w,x]=function(t,e,n,o,r){let i=[];const a=vp(t),s=function(t,e){return e.config.showProteinInTooltip&&!("proteinCache"in e==0||t in e.proteinCache==0||"spliceExons"in e==0||!1===e.spliceExons)}(a,r);if(!s)return["<br/>",null];const c=r.proteinCache[a].find((e=>e.transcriptName===t));if(!c)return["<br/>",null];const l=c.protein,u=function(t,e){e||(t=t.slice().reverse());const n=e?"5'-UTR":"3'-UTR",o=t.filter((t=>t[0]===n)).slice(-1)[0];let r,i;o?(r=o[3].x+o[3].width,i=o[1]+o[2]):(r=0,i=0);const a=e?"3'-UTR":"5'-UTR",s=t.filter((t=>t[0]===a)).slice(-1)[0];let c,l;if(s)c=s[3].x,l=s[1];else{const e=t.slice(-1)[0];c=e[3].x+e[3].width,l=e[1]+e[2]}return{px:{start:r,length:c-r},bp:{start:i,length:l-i}}}(e,n),d=Op(e,l),f=[];for(let t=0;t<d.length;t++){const e=d[t],r=np(e),a=rp(e,u,n,o);r?f.push(a):i.push(a)}const h=function(t,e){const n=e?"43":"35",o=e?"BBB":"DDD",r=e?"555":"777";return`<rect class="_ideoProteinLine"x="${t.px.start}" width="${t.px.length}" y="${n}" height="4" fill="#${o}" stroke="#${r}" />`}(u,o);return f.push(h),i=f.concat(i),[`<g id="_ideoProtein">${i.join("")}</g>`,null]}(g,i,h,b,e),_=$p(i,n).toLocaleString(),A=[`${f.exon} exons`,`<span id='_ideoTranscriptLengthBp'>${_} bp</span> `];if(x){const t=x.toLocaleString();A.push(`<span id='_ideoProteinLengthAa'>${t} aa</span> `)}const C=t.biotype.replace(/_/g," ");"protein coding"!==C&&A.push(C);let S=""===w?"30":"50";return b&&(S="60"),[`<svg class="_ideoGeneStructure" data-ideo-gene-structure-name="${g}" data-ideo-strand="${o}" data-ideo-footer="${v+A.join(` ${ap} `)}" width="268" height="${S}" ${m}>`+l.join("")+w+"</svg>",a,s]}window.swapUTRsForward=xp;const Wp={Arrow:["acts on","acted on by"],TBar:["inhibits","inhibited by"],"mim-binding":["binds","binds"],"mim-catalysis":["catalyzes","catalyzed by"],"mim-cleavage":["cleaves","cleaved by"],"mim-conversion":["converts","converted by"],"mim-gap":["interacts with","interacts with"],"mim-inhibition":["inhibits","inhibited by"],"mim-modification":["modifies","modified by"],"mim-necessary-stimulation":["necessarily stimulates","necessarily stimulated by"],"mim-stimulation":["stimulates","stimulated by"],"mim-transcription-translation":["transcribes / translates","transcribed / translated by"]};function jp(t){return Object.values(t).find((t=>t.length>0&&"ixnType"in t[0]))[0].ixnType.toLowerCase()}function qp(t,e){if(void 0===t||""===t)return[[],[]];const n=Array.from(t.querySelectorAll(`DataNode[TextLabel="${e}"]`)).map((t=>({type:"node",matchedLabel:e,textLabel:t.getAttribute("TextLabel"),graphId:t.getAttribute("GraphId"),groupRef:t.getAttribute("GroupRef")}))),o=n.map((t=>t.graphId)),r=n.map((t=>t.groupRef)).map((t=>`Group[GroupId="${t}"]`)).join(",");let i=[];if(""!==r){const n=t.querySelectorAll(r);i=Array.from(n).map((t=>({type:"group",matchedLabel:e,graphId:t.getAttribute("GraphId"),groupId:t.getAttribute("GroupId")})))}const a=i.map((t=>t.graphId));return[o.concat(a),n.concat(i)]}function zp(t,e){return null==t?e:"function"==typeof t?t:e=>e[t]}function Up(t,e=!1){const n=new Float64Array(5),o=new Float64Array(4);!function(t,e,n){const o=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),r=Math.exp(-1.783/n),i=Math.exp(-1.723/n),a=.6318/n,s=1.997/n,c=Float64Array.of(-r*Math.cos(a),r*Math.sin(a),-r*Math.cos(-a),r*Math.sin(-a),-i*Math.cos(s),i*Math.sin(s),-i*Math.cos(-s),i*Math.sin(-s)),l=2.5066282746310007*n,u=Float64Array.of(o[0],o[1],0,0,0,0,0,0),d=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let f,h;for(h=2;h<8;h+=2){for(u[h]=c[h]*u[h-2]-c[h+1]*u[h-1],u[h+1]=c[h]*u[h-1]+c[h+1]*u[h-2],f=h-2;f>0;f-=2)u[f]+=c[h]*u[f-2]-c[h+1]*u[f-1],u[f+1]+=c[h]*u[f-1]+c[h+1]*u[f-2];for(f=0;f<=h;f+=2)u[f]+=o[h]*d[f]-o[h+1]*d[f+1],u[f+1]+=o[h]*d[f+1]+o[h+1]*d[f];for(d[h+2]=c[h]*d[h]-c[h+1]*d[h+1],d[h+3]=c[h]*d[h+1]+c[h+1]*d[h],f=h;f>0;f-=2)d[f]+=c[h]*d[f-2]-c[h+1]*d[f-1],d[f+1]+=c[h]*d[f-1]+c[h+1]*d[f-2]}for(h=0;h<4;++h)f=h<<1,e[h]=u[f]/l,t[h+1]=d[f+2]}(n,o,t);const r=Float64Array.of(0,o[1]-n[1]*o[0],o[2]-n[2]*o[0],o[3]-n[3]*o[0],-n[4]*o[0]),i=1+n[1]+n[2]+n[3]+n[4];return{sigma:t,negative:e,a:n,b_causal:o,b_anticausal:r,sum_causal:(o[0]+o[1]+o[2]+o[3])/i,sum_anticausal:(r[1]+r[2]+r[3]+r[4])/i}}function Vp(t,e,n,o=1,r=new Float64Array(n),i=new Float64Array(n),a=new Float64Array(5),s=r,c=Yp){const l=2*o,u=3*o,d=4*o,f=o*n;let h,p;for(c(r,e,n,o,t.b_causal,3,t.a,4,t.sum_causal,a,t.sigma),p=4,h=d;p<n;++p,h+=o)r[p]=t.b_causal[0]*e[h]+t.b_causal[1]*e[h-o]+t.b_causal[2]*e[h-l]+t.b_causal[3]*e[h-u]-t.a[1]*r[p-1]-t.a[2]*r[p-2]-t.a[3]*r[p-3]-t.a[4]*r[p-4];for(c(i,e,n,-o,t.b_anticausal,4,t.a,4,t.sum_anticausal,a,t.sigma),p=4,h=f-5*o;p<n;++p,h-=o)i[p]=t.b_anticausal[1]*e[h+o]+t.b_anticausal[2]*e[h+l]+t.b_anticausal[3]*e[h+u]+t.b_anticausal[4]*e[h+d]-t.a[1]*i[p-1]-t.a[2]*i[p-2]-t.a[3]*i[p-3]-t.a[4]*i[p-4];if(t.negative)for(p=0,h=0;p<n;++p,h+=o)s[h]=r[p]+i[n-p-1];else for(p=0,h=0;p<n;++p,h+=o)s[h]=Math.max(0,r[p]+i[n-p-1]);return s}function Yp(t,e,n,o,r,i,a,s,c,l){const u=Math.abs(o)*n,d=o<0?u+o:0;let f,h,p;for(h=0;h<s;++h)for(l[h]=h<=i?r[h]:0,p=1;p<=s&&p<=h;++p)l[h]-=a[p]*l[h-p];for(p=0;p<s;++p)for(t[p]=0,h=1;h<=p;++h)f=d+o*h,f>=0&&f<u&&(t[p]+=l[p-h]*e[f]);const m=e[d];if(m>0)for(p=0;p<s;++p)t[p]+=l[p]*m}function Xp(t,e){const n=t.length;if(!n)return NaN;if((e=+e)<=0||n<2)return t[0];if(e>=1)return t[n-1];const o=(n-1)*e,r=Math.floor(o),i=t[r];return i+(t[r+1]-i)*(o-r)}function Kp(t,e={}){const{adjust:n=1,pad:o=3,bins:r=512}=e,i=zp(e.x,(t=>t)),a=zp(e.weight,(()=>1/t.length));let s=e.bandwidth??n*function(t,e){const n=t.map(e).filter((t=>null!=t&&t>=t));n.sort(((t,e)=>t-e));const o=function(t){const e=t.length;let n,o=0,r=0,i=0;for(let a=0;a<e;++a){const e=t[a];n=e-r,r+=n/++o,i+=n*(e-r)}return o>1?Math.sqrt(i/(o-1)):NaN}(n),r=Xp(n,.25),i=Xp(n,.75),a=n.length,s=(i-r)/1.34;return 1.06*(Math.min(o,s)||o||Math.abs(r)||1)*Math.pow(a,-.2)}(t,i);const[c,l]=e.extent??function(t,e,n=0){const o=t.length;let r,i;for(let n=0;n<o;++n){const o=e(t[n],n,t);null!=o&&(void 0===r?o>=o&&(r=i=o):(o<r&&(r=o),o>i&&(i=o)))}return[r-n,i+n]}(t,i,o*s),u=function(t,e,n,o,r,i){const a=new Float64Array(i),s=(i-1)/(r-o);for(let r=0;r<t.length;++r){const c=t[r],l=e(c,r,t),u=n(c,r,t);if(!Number.isFinite(l)||!Number.isFinite(u))continue;const d=(l-o)*s,f=Math.floor(d),h=f+1;0<=f&&h<i?(a[f]+=(h-d)*u,a[h]+=(d-f)*u):-1===f?a[h]+=(d-f)*u:h===i&&(a[f]+=(h-d)*u)}return a}(t,i,a,c,l,r),d=(l-c)/(r-1),f=u.some((t=>t<0));let h,p=Up(s/d,f);function*m(t="x",e="y"){const n=g.grid(),o=1/d;for(let i=0;i<r;++i)yield{[t]:c+i*d,[e]:n[i]*o}}const g={[Symbol.iterator]:m,points:m,grid:()=>h||(h=Vp(p,u,r)),extent:()=>[c,l],bandwidth(t){return arguments.length?(t!==s&&(s=t,h=null,p=Up(s/d,f)),g):s}};return g}const Qp=12,Jp=48;function Zp(t,e,n=!0,o=0,r=null){const i=function(t,e){let n=0;for(let o=0;o<t.length;o++){const r=t[o],i=r.expression.max;if(e){if(r.tissue===e){n=i;break}}else i>n&&(n=i)}return n}(t,r);let a=0;if(r){const e=t.find((t=>t.tissue===r));a=e.expression.min}const s=["max","q3","median","q1","min"];return t.map((t=>{if(t.px={},n)for(let n=0;n<s.length;n++){const r=s[n],c=t.expression[r];let l=e*(c-a)/(i-a)+o;Math.round(l)>e&&(t.px[r+"Raw"]=l,l+=e-l),l+=o,t.px[r]=l}else{const n=t.expression.min,r=t.expression.max;for(let i=0;i<s.length;i++){const a=s[i],c=t.expression[a],l=e*(c-n)/(r-n)+o;t.px[a]=l}}return t})),t}function tm(t,e,n,o,r=!1){let i=t[e],a=!1;r&&i>Jp&&(i=Jp+1,a=!0);let s=a?Qp:t[e+"Height"];isNaN(s)&&(s=Qp);const c=o-s,l=c+n+.5,u=c+n+s,d="median"===e,f=t.max-t.min<=8&&d;return{x:i,y1:l,y2:u,style:f?"display: none":"",endStyle:a&&d||f?"display: none;":""}}function em(t,e,n,o,r,i=!1){const a=t[0].toUpperCase()+t.slice(1),{x:s,y1:c,y2:l,style:u}=tm(e,t,o,r),d=""===u?"":`style="${u}"`;return`<line stroke="${Ji(ra(n,.55),n)}" ${`x1="${s}" y1="${c}" x2="${s}" y2="${l}" ${d} `+(i?'stroke-dasharray="3" ':"")+`class="_ideoExpression${a}" `} />`}function nm(t,e,n,o){return[em("median",t,o,e,n,!1),em("q1",t,o,e,n,!0),em("q3",t,o,e,n,!0)]}function om(t,e,n,o=64,r=!1){const i=t.expression.quantiles,a=t.px,s=t.samples,c=[];i.map(((t,e)=>{for(let n=0;n<t;n++)c.push(e)}));const l=Kp(c,{bins:o,bandwidth:s>=70?.7:1.5}),u=Array.from(l).filter((t=>0<=t.x&&t.x<=10));if(0===u.length)return"";const d=Math.max(...u.map((t=>t.y))),f=u[0].x,h=u.slice(-1)[0].x-f,p=(("maxRaw"in a?a.maxRaw:a.max)-a.min)/h,m=n+e;let g=0;const y=u.map(((t,e)=>{let o=(t.x-f)*p+a.min;r&&o>Jp&&(o=Jp);const i=n*(t.y/d),s=m-i;return e>0&&["q1","median","q3"].forEach((t=>{const e=a[t];g<e&&e<=o&&(a[t+"Height"]=i)})),g=o,`${o},${s}`}));let v=a.max,b=a.min;r&&(a.max>Jp&&(v=Jp),a.min>Jp&&(b=Jp)),y.push(v+","+m),y.push(b+","+m);const w=y[0];return y.push(w),[y.join(" "),a]}function rm(t,e,n,o,r,i=64){const[a,s]=om(t,e,n,i);return[`<polyline fill="${o}" stroke="${r}" points="${a}" class="tissue-curve" data-tissue-curve="${t.tissue}" />`,s]}function im(t,e){return 1+t*(e+2)}function am(t,e,n){const o=Jp;e=Zp(e,o,!0,0);const r=Qp,i=function(t,e,n,o){const r=function(t){return`<i>Full detail: <a href="https://www.gtexportal.org/home/gene/${t}" class="_ideoGtexLink" target="_blank">GTEx</a></i>`}(t);if(n.length<=3)return`<br/>${r}<br/><br/>`;const i=`<span style="margin: 0 6px; color: #CCC;">|</span>${r}`,a=o.showTissuesMore?"More...":"Less...";return`<div style="position: relative; left: ${o.showTissuesMore?-50:1}px; top: -1px; font-size: ${e}px"><a class="_ideoMoreOrLessTissue" style="cursor: pointer;px;">${a}</a>${o.showTissuesMore?"":i}</div>`}(t,r,e,n),a=n.showTissuesMore?3:10;let s;const c=e.slice(0,a).map(((e,n)=>{s=im(n,r);const i=function(t){let e=t.replace(/_/g," ").toLowerCase();return["ba24","ba9","basal ganglia","omentum","suprapubic","lower leg","cervical c-1"].forEach((t=>e=e.replace(t,"("+t+")"))),["ba24","ba9","ebv"].forEach((t=>{e=e.replace(t,t.toUpperCase())})),["adipose","artery","brain","breast","cells","cervix","colon","heart","kidney","muscle","nerve","skin","small intestine"].forEach((t=>{e=e.replace(t,t+" -")})),e=e.replace("basal ganglia","BG"),e=e[0].toUpperCase()+e.slice(1),e}(e.tissue),a=`#${e.color}`,c=ra(a,.85),[l,u]=rm(e,s,r,a,c),[d]=nm(u,s,r,a),f=`data-tissue="${e.tissue}"`,h=`height="${r+2}" width="${o}px" fill="#FFF" opacity="0" x="0" y="${s}" data-gene="${t}" `+f,p=`y="${s+r}" style="font-size: ${r}px;" x="${o+10}" `+f;return`<g data-group-tissue="${e.tissue}"><text ${p}>${i}</text>`+l+d+`<rect ${h} class="_ideoExpressionTrace" /></g>`})).join("");let l="";return t in n.geneStructureCache||(l='style="margin-bottom: 10px;"'),`<div class="_ideoTissuePlotContainer" ${l}><div class="_ideoTissueExpressionPlot" style="margin-top: 15px; margin-bottom: -15px;">\n        <div class="_ideoTissuePlotTitle" style="margin-bottom: 4px;">Reference expression by tissue</div>\n        <svg width="275" height="${s+r+2}" style="position: relative; left: 10px">${c}</svg>\n        ${i}\n      </div></div>`}function sm(t,e){const n=t.getAttribute("data-tissue");document.querySelector(`text[data-tissue="${n}"]`).setAttribute("fill",e)}function cm(t){const e=document.querySelector("._ideoMoreOrLessTissue");e&&e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),t.showTissuesMore=!t.showTissuesMore,function(t){const e=document.querySelector("._ideoTissueExpressionPlot").parentElement,n=document.querySelector("#ideo-related-gene").innerText,o=am(n,t.tissueExpressionsByGene[n],t);e.innerHTML=o,cm(t)}(t)}));const n=document.querySelectorAll("._ideoExpressionTrace");n.forEach((e=>{e.addEventListener("mouseenter",(()=>{sm(e,"#338"),lm(e,t),function(t,e){const n=t.getAttribute("data-gene"),o=t.getAttribute("data-tissue");let r=e.tissueExpressionsByGene[n].find((t=>t.tissue===o));r=Zp([r],225,!1,35)[0];const i=`#${r.color}`,a=ra(i,.85),[s,c]=rm(r,1,50,i,a,256),[l,u,d]=nm(c,0,50,i),f=function(t,e){const n=t.px.min,o=t.expression.min,r=t.px.max,i=t.expression.max,a=t.px.median,s=t.expression.median,c=r/2,l='stroke="#CCC" stroke-width="1px"',u={config:{weight:400,annotLabelSize:12}},d=`<line x1="${r}" x2="${r}" y1="52" y2="60" ${l} /><text x="${r-Xi("Max",u).width/2}" y="71">Max.</text><text x="${r-Xi(i,u).width/2}" y="82">${i}</text>`,f=Xi("Min",u).width,h=Xi(o,u).width;let p=n-f/2,m=n-h/2;const g=n+f,y=`x1="${n}" x2="${n}" y1="52" y2="60" ${l}`;let v=a-Xi("Median",u).width/2,b=a-Xi(s,u).width/2;return g>=v&&(v=a,b=a),g>=v&&(v+=1.5,b+=1.5,p=n-f-1.5,m=n-h-1.5),`<g><line ${y} /><text x="${p}" y="71" >Min.</text><text x="${m}" y="82" >${o}</text>`+d+`<line x1="${a}" x2="${a}" y1="52" y2="60" ${l} /><text x="${v}" y="71">Median</text><text x="${b}" y="82">${s}</text>`+`<text x="${c-40}" y="101">Expression (TPM)</text>`+`<text x="${c-70}" y="114">Samples: ${t.samples} | Source: GTEx</text></g>`}(r);let h;const p=document.querySelector("._ideoGeneStructureContainer"),m=document.querySelector("._ideoTooltipFooter");p?(h=p,p.style.display="none",m.style.display="none"):(h=m,document.querySelector("._ideoTissuePlotContainer").setAttribute("style","margin-bottom: 20px"));const g='<div class="_ideoDistributionContainer" style="position: relative; height: 119.5px"><svg width="280px" height="119.5px" style="position: absolute; top: 2px; left: -5px;">'+f+s+l+u+d+"</svg></div>";h.insertAdjacentHTML("beforebegin",g)}(e,t)})),e.addEventListener("mouseleave",(()=>{sm(e,"#000"),lm(n[0],t,!0),function(){const t=document.querySelector("._ideoDistributionContainer");if(!t)return;t.remove();const e=document.querySelector("._ideoGeneStructureContainer");e&&(e.style.display=""),document.querySelector("._ideoTooltipFooter").style.display=""}()}))}))}function lm(t,e,n=!1){const o=t.getAttribute("data-gene"),r=n?null:t.getAttribute("data-tissue"),i=e.showTissuesMore?3:10;let a=e.tissueExpressionsByGene[o];a=Zp(a,Jp,!0,0,r).slice(0,i);const s=Qp;a.forEach(((t,e)=>{const o=t.tissue,r=a.find((t=>t.tissue===o)),i=im(e,s),c=!n,[l,u]=om(r,i,s,64,c);a[e].points=l;const d=tm(u,"median",i,s,c);a[e].medianLine=d})),Di.select("._ideoTissueExpressionPlot").selectAll("polyline").data(a).transition().duration(500).attr("points",((t,e)=>a[e].points)),Di.select("._ideoTissueExpressionPlot").selectAll("._ideoExpressionMedian").data(a).attr("style",((t,e)=>a[e].medianLine.style)).transition().duration(500).attr("x1",((t,e)=>a[e].medianLine.x)).attr("x2",((t,e)=>a[e].medianLine.x)).attr("y1",((t,e)=>a[e].medianLine.y1)).attr("y2",((t,e)=>a[e].medianLine.y2)).attr("style",((t,e)=>a[e].medianLine.endStyle))}function um(t){const e=t.name,n=t.genomic_pos.ensemblgene;let o=n;return void 0===n&&(o=t.genomic_pos.filter((t=>!t.chr.includes("_")))[0].ensemblgene),{name:e,ensemblId:o}}function dm(t,e){const n=e.organismScientificName;throw Error(`"${t}" is not a known gene in ${n}`)}function fm(t,e){var n;if(!e.synonymCache)return null;const o=t.toLowerCase();if(null===(n=e.synonymCache)||void 0===n||!n.nameCaseMap){const t={};for(const n in e.synonymCache.byGene){const o=e.synonymCache.byGene[n];t[n.toLowerCase()]=o.map((t=>t.toLowerCase()))}e.synonymCache.nameCaseMap=t}const r=e.synonymCache.nameCaseMap;for(const t in r)if(r[t].includes(o))return e.geneCache.nameCaseMap[t];return null}const hm={genes:0};async function pm(t,e,n){let o;"string"==typeof t&&(t=[t]);const r=`?q=${t.map((t=>`${e}:${t.trim()}`)).join(" OR ")}&species=${n.config.taxid}&fields=`;if(n.geneCache){const r=function(t,e,n){const o=n.geneCache,r="symbol"===e,i=r?o.lociByName:o.lociById,a=r?o.idsByName:o.namesById;return t.map((t=>{const e=t.toLowerCase();if(!i[t]&&!o.nameCaseMap[e]&&!fm(t,n)){if(!r)return;dm(t,n)}let s=!1,c=null;r&&!i[t]&&(o.nameCaseMap[e]?t=o.nameCaseMap[e]:(c=t,t=fm(c,n),s=!0));const l=i[t],u=r?t:a[t],d=r?a[t]:t;return{symbol:u,name:o.fullNamesById[d],source:"cache",genomic_pos:{chr:l[0],start:l[1],end:l[2],ensemblgene:d},isSynonym:s,synonym:c}})).filter((t=>void 0!==t))}(t,e,n);r.forEach((t=>{const e=t.symbol,o=t.name,r=t.isSynonym,i=t.synonym;e in n.annotDescriptions.annots?(n.annotDescriptions.annots[e].name=o,n.annotDescriptions.annots[e].isSynonym=t.isSynonym,n.annotDescriptions.annots[e].synonym=t.synonym):n.annotDescriptions.annots[e]={name:o,isSynonym:r,synonym:i}})),o={hits:r,fromGeneCache:!0}}else{const i=`${r}symbol,genomic_pos,name`;try{o=await async function(t){const e=await fetch("https://mygene.info/v3/query"+t+"&size=400");return await e.json()}(i)}catch(r){"Failed to fetch"===r.message&&navigator.onLine&&(o=await async function(t,e,n,o){const r=hm[t];if(r>e)throw new TypeError("Failed to fetch from Ideogram third-party service for: "+t);hm[t]+=1;const i=function(t,e){const n=10*Math.random();return Math.round(500+n)*t**2}(r);return console.log(`Failed fetch for ${t} ${r} times, retrying in ${i} ms`),await(a=i,new Promise((t=>setTimeout(t,a)))),await n(...o);var a}("genes",3,pm,[t,e,n]))}}return o}async function mm(t,e,n){const o=[],r=Object.keys(t);return 0===r.length||((await pm(r,"symbol",n)).hits.forEach((r=>{if("genomic_pos"in r==0||r.symbol===e.name)return;const i=bm(r,n,"purple");o.push(i);const a=t[r.symbol.toLowerCase()],s=function(t,e,n){const o=[],r=[];let i="";if(void 0!==e){let t=e.map((t=>{const e=`https://classic.wikipathways.org/index.php/Pathway:${t.pathwayId}`;return o.push(t.pathwayId),r.push(t.name),`<a class="ideo-pathway-link" title="View in WikiPathways" data-pathway-id="${t.pathwayId}" target="_blank" href="${e}">${t.name}</a>`}));t=t.join("<br/>"),i=`Interacts with ${n.name} in:<br/>${t}`}const{name:a,ensemblId:s}=um(t);return{description:i,ixnsDescription:i,ensemblId:s,name:a,type:"interacting gene",pathwayIds:o,pathwayNames:r}}(r,a,e);Tm(i,s,n)})),function(t){const e={};Object.entries(t.annotDescriptions.annots).forEach((([t,n])=>{"type"in n&&n.type.includes("interacting gene")&&(e[t]=n.pathwayIds)}));const n={};Object.entries(e).forEach((([t,e])=>{n[t]={},e.map((async e=>{const o=await async function(t){if(!navigator.onLine)return"";const e=`https://cdn.jsdelivr.net/npm/ixn2/${t}.xml.gz`,n=await fetch(e);if(!n.ok)return console.log(`Gracefully degrading as request failed for: ${e}`),"";const o=await n.blob(),r=za(Wa(new Uint8Array(await o.arrayBuffer())));return(new DOMParser).parseFromString(r,"text/xml")}(e);n[t][e]=o}))})),t.gpmlsByInteractingGene=n}(n)),o}function gm(t,e){t=Am(t,e),e.drawAnnots(t,"overlay",!0,!0),_m(e)}function ym(t,e){var n;if(!e.config.showParalogNeighborhoods)return;if((null===(n=e.neighborhoodAnnots)||void 0===n?void 0:n.length)>0)return e.neighborhoodAnnots.forEach((t=>{e.annotDescriptions.annots[t.name]=t})),void gm(e.neighborhoodAnnots,e);const o=e.relatedAnnots[0];if((t=Am(t,e)).unshift(o),t.length<2)return;const r={};r[t[0].chr]={},r[t[0].chr][t[0].start]=[t[0]];for(let e=1;e<t.length;e++){const n=t[e],o=n.chr,i=n.start;if(o in r){const t=Object.keys(r[o]);for(let e=0;e<t.length;e++){const a=parseInt(t[e]);Math.abs(i-a)<2e6?r[o][a].push(n):r[o][i]=[n]}}else r[o]={},r[o][i]=[n]}const i=15e6,a=o.name,s=Object.entries(r).map((([t,n],r)=>{const s=parseInt(Object.keys(n)[0]);let c=Object.values(n)[0];if(c.length<2)return{paralogs:c};let l=!1;c[0].name===o.name&&(c=c.slice(1),l=!0);const u=("paralog","paralog"+(c.length>1?"s":""));const d=`${c.length} nearby ${u} of ${a}`,f=e.chromosomes[e.config.taxid][t].bpLength;let h=s-75e5,p=s+75e5;p>f?(h=s-i,p=f):h<1&&(h=1,p=i),"geneCache"in e&&(c=c.map((t=>{t.fullName=e.geneCache.fullNamesById[t.id];const n=e.geneCache.interestingNames;return n.includes(t.name)?t.rank=n.indexOf(t.name)+1:t.rank=1e10,t})));const m={name:"paralogNeighborhood-"+r,chr:t,start:h,stop:p,color:"pink",description:d,paralogs:c,type:"paralog neighborhood",displayCoordinates:`chr${t}:${s.toLocaleString()} ± 2 Mbp`,includesSearched:l};return e.annotDescriptions.annots[m.name]=m,m})).filter((t=>t.paralogs.length>1||t.includesSearched));e.neighborhoodAnnots=s,s.length>0&&gm(s,e)}function vm(t,e){let n=null;return n=Array.isArray(t.genomic_pos)?t.genomic_pos.filter((t=>t.chr in e.chromosomes[e.config.taxid]))[0]:t.genomic_pos,n}function bm(t,e,n="red"){const o=vm(t,e);return{name:t.symbol,chr:o.chr,start:o.start,stop:o.end,id:o.ensemblgene,color:n}}function wm(t){const e=t.innerText.toLowerCase();let n;return e.includes("interacting")&&(n="interacting"),e.includes("paralogous")&&(n="paralogous"),e.includes("searched")&&(n="searched"),n}function xm(t){function e(e){(function(t,e){t.classList+=" active";const n=function(t){return{interacting:"purple",paralogous:"pink",searched:"red"}[wm(t)]}(t);if(e.config.showAnnotLabels){e.clearAnnotLabels(),e.flattenAnnots().forEach((t=>{t.color!==n&&(document.getElementById(t.domId).style.display="none")}));const t=e.flattenAnnots().sort(((t,n)=>e.annotSortFunction(t,n))).filter((t=>t.color===n)),o=Math.min(t.length,20);e.fillAnnotLabels(t,o)}})(e.target,t),t.onHoverLegendCallback&&t.onHoverLegendCallback()}function n(){!function(t){if(document.querySelectorAll("#_ideogramLegend li").forEach((t=>{t.classList.remove("active")})),t.flattenAnnots().forEach((t=>{document.getElementById(t.domId).style.display=null})),t.config.showAnnotLabels){const e=t.flattenAnnots().sort(((e,n)=>t.annotSortFunction(e,n)));t.fillAnnotLabels(e)}}(t)}document.querySelectorAll("#_ideogramLegend li._ideoLegendEntry").forEach((t=>{t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",n);const o=wm(t),r=`class="_ideoLegendEntry" style="position: inherit; left: inherit" data-tippy-content="${{interacting:"Adjacent to searched gene in a biochemical pathway, per WikiPathways",paralogous:"Evolutionarily related to searched gene by a duplication event, per Ensembl"}[o]}" `;"paralogous"===o?t.innerHTML=`<span ${r}>Paralogous genes</span>`:"interacting"===o&&(t.innerHTML=`<span ${r}>Interacting genes</span>`)}));const o=`<style>\n    ${jf}\n\n    .tippy-box {\n      font-size: 12px;\n    }\n\n    .tippy-content {\n      padding: 3px 7px;\n    }\n\n    #_ideogramLegend li {\n      padding-left: 5px;\n      border-radius: 2px;\n    }\n\n    #_ideogramLegend li.active {\n      color: #00C;\n      background-color: #EEF;\n    }\n    </style>`;document.querySelector("#_ideogramLegend").insertAdjacentHTML("afterBegin",o);const r=ia();r.maxWidth=180,r.offset=[-30,10],t.legendTippy=Wf("._ideoLegendEntry[data-tippy-content]",r)}function _m(t,e=0){const n=document.querySelector("#_ideogramInnerWrap"),o=`position: absolute; top: 15px; left: ${Om({}).legendPad+20+e}px`,r=document.querySelector("#_ideogramLegend");n.prepend(r),r.style=o,xm(t)}function Am(t,e){if("all"===e.config.annotsInList)return t;const n=[];return t.forEach((t=>{e.config.annotsInList.includes(t.name.toLowerCase())&&n.push(t)})),n}function Cm(t,e){return new Promise((async n=>{const o=performance.now(),r=await async function(t,e){const n={},o={},r=e.config.organism.replace(/-/g," "),i=t.name.toUpperCase();let a={result:[]};if(e.interactionCache)i in e.interactionCache&&(a=e.interactionCache[i]);else{const t=`https://cdn.jsdelivr.net/npm/ixn2/${i}.json.gz`,e=await fetch(t);if(e.ok){const t=await e.blob(),n=new Uint8Array(await t.arrayBuffer());a=JSON.parse(za(Wa(n)))}}return a.result.forEach((i=>{if(i.species.toLowerCase()===r){const r=i.fields.right.values,a=i.fields.left.values,s=r.concat(a),c=i.name,l=i.id,u=function(t,e){return e&&(t=Uc(t,e)),t.sort(((t,e)=>t.rank-e.rank))}(s.map((t=>({name:t,color:""}))),e).map((t=>t.name));u.forEach((r=>{const i=r.toLowerCase();if(i.includes(t.name.toLowerCase()))return;const a=c+l,s=function(t,e,n,o,r){let i;return i="geneCache"in r&&e.name?t.toLowerCase()in r.geneCache.nameCaseMap:function(t,e){return""!==t&&!t.includes(" ")&&!t.includes("/")&&t.toLowerCase()!==e.name.toLowerCase()}(t,e),i&&!(n in o)}(i,t,a,o,e);if(s){o[a]=1;const t={name:c,pathwayId:l};i in n?n[i].push(t):n[i]=[t]}}))}})),n}(t,e),i=await mm(r,t,e);e.relatedAnnots.push(...i),Em("interacting",e),e.time.rg.interactions=qf(o),ym(i,e),n()}))}function Sm(t,e){return new Promise((async n=>{const o=performance.now(),r=await async function(t,e){const n=e.config.taxid;let o;if(e.paralogCache){const n=e.paralogCache.paralogsByName,r=t.name.toUpperCase();o=r in n?n[r]:[]}else{const e=`&format=condensed&type=paralogues&target_taxon=${n}`,r=`/homology/id/${t.id}?${e}`;o=(await Ideogram.fetchEnsembl(r)).data[0].homologies}let r=await async function(t,e,n){const o=[],r=t.length&&"string"==typeof t[0]?t:t.map((t=>t.id));return(await pm(r,"ensemblgene",n)).hits.forEach((t=>{if("genomic_pos"in t==0)return;if("name"in t==0)return;const r=bm(t,n,"pink");o.push(r);const i=n.tissueCache?"":`Paralog of ${e.name}`,{name:a,ensemblId:s}=um(t);Tm(r,{description:i,ensemblId:s,name:a,type:"paralogous gene"},n)})),o}(o,t,e);return r=r.filter((t=>!t.name.match(/^AC[0-9.]+$/))),r}(t,e);e.relatedAnnots.push(...r),Em("paralogous",e),ym(r,e),e.time.rg.paralogs=qf(o),n()}))}function Lm(t,e){var n,o,r,i;if("name"in t?(n=t.name,o=e.name,r=t.color,i=e.color):([n,r]=[t[0],t[3]],[o,i]=[e[0],e[3]]),"initRank"in t==0){if("red"===r)return-1;if("red"===i)return 1;if("purple"===r&&"pink"===i)return-1;if("purple"===i&&"pink"===r)return 1}return t.rank-e.rank}function Tm(t,e,n){let o;const r=n.annotDescriptions.annots;if(t.name in r){const i=r[t.name];if(o=e,e.type===i.type)return;Object.keys(i).forEach((function(t){t in o==0&&(o[t]=i[t])})),"type"in i&&!n.tissueCache&&(o.type+=", "+i.type,o.description+=`<br/><br/>${i.description}`)}else o=e;n.annotDescriptions.annots[t.name]=o}function km(t,e,n){setTimeout((()=>{n<40&&(e.tissueCache?Mm(t,e):km(t,e,n+1))}),50)}async function Mm(t,e){if(!e.tissueCache)return void km(t,e,0);const n={},o=e.tissueCache,r=[];t.forEach((async t=>{const i=new Promise((async r=>{const i=await o.getTissueExpressions(t,e);n[t]=i,r()}));r.push(i)})),await Promise.all(r),e.tissueExpressionsByGene=n}function Em(t,e){let n=e.relatedAnnots;if(n.length>1&&e.onFindGenesCallback&&e.onFindGenesCallback(),n=function(t){const e={};let n=[];return t.forEach((t=>{t.name in e==0?(n.push(t),e[t.name]=1):"purple"===t.color&&(n=n.map((e=>t.name===e.name?t:e)))})),n}(n),function(t,e){t=Am(t,e),e.drawAnnots(t)}(n,e),e.config.showAnnotLabels){const t=e.flattenAnnots().sort(((t,n)=>e.annotSortFunction(t,n)));e.fillAnnotLabels(t)}_m(e),function(t,e){if("pathway"===t)return;const n=e.getRelatedGenesByType(),o={paralogous:"interacting",interacting:"paralogous"}[t],r=n[t].length,i=n[o]?n[o].length:0;if(e._didRelatedGenesFirstPlot)if(r>0&&i>0){const t=e.time.rg.timestampFirstPlot;e.time.rg.totalLastPlotDiff=qf(t)}else r>0&&0===i?(e.time.rg.timestampFirstPlot=performance.now(),e.time.rg.totalFirstPlot=qf(e.time.rg.t0),e._relatedGenesFirstPlotType=t,e.time.rg.totalLastPlotDiff=0):(0===r&&i>0||(e._relatedGenesFirstPlotType="searched"),e.time.rg.totalLastPlotDiff=0);else e._didRelatedGenesFirstPlot=!0,e.time.rg.totalFirstPlot=qf(e.time.rg.t0),r>0&&(e.time.rg.timestampFirstPlot=performance.now(),e._relatedGenesFirstPlotType=t)}(t,e)}function Pm(t){var e=document.querySelector(t.config.container);e.style.visibility="",e.style.position="absolute",e.style.width="100%";var n=document.querySelector("#_ideogramInnerWrap");n.style.position="relative",n.style.marginLeft="auto",n.style.marginRight="auto",n.style.overflowY="hidden",document.querySelector("#_ideogramMiddleWrap").style.overflowY="hidden";const o=t.config.legendPad;if(void 0===t.didAdjustIdeogramLegend){var r=document.querySelector("#_ideogram");const e=160;n.style.maxWidth=parseInt(n.style.maxWidth)+e+o+"px",r.style.minWidth=parseInt(r.style.minWidth)+o+"px",r.style.maxWidth=parseInt(r.style.minWidth)+o+"px",r.style.position="relative",r.style.left=e+"px",t.didAdjustIdeogramLegend=!0}}async function Dm(t=null){const e=this;if(!t)return Hm();e.clearAnnotLabels();const n=document.querySelector("#_ideogramLegend");n&&n.remove(),e.config=Om(e.config),function(t,e){const n=[`# ${e}`,`# Organism: ${t.getScientificName(t.config.taxid)}`,`# Generated by Ideogram.js version ${Ideogram.version}, https://github.com/eweitz/ideogram`,`# Generated at ${window.location.href}`].join("\n");delete t.annotDescriptions,t.annotDescriptions={headers:n,annots:{}}}(e,`Related genes for ${t}`);const o=e.selector+" .annot";document.querySelectorAll(o).forEach((t=>t.remove())),e.startHideAnnotTooltipTimeout(),document.querySelectorAll(".chromosome").forEach((t=>{t.style.cursor=""})),Pm(e),e.relatedAnnots=[],e.neighborhoodAnnots=[];const r=await async function(t,e){const n=performance.now(),o=await pm(t,"symbol",e);if(0===o.hits.length)return;const r=o.hits.find((t=>{const n=vm(t,e);return n&&n.ensemblgene}));let i={description:"",ensemblId:r.genomic_pos.ensemblgene,type:"searched gene"};if(r.symbol in e.annotDescriptions.annots){const t=e.annotDescriptions.annots[r.symbol];i=Object.assign(t,i)}else i.name=r.name;e.annotDescriptions.annots[r.symbol]=i;const a=bm(r,e);return e.relatedAnnots.push(a),e.time.rg.searchedGene=qf(n),a}(t,e);void 0===r&&dm(t,e),e.config.legend=Im,vc(e),_m(e),await Promise.all([Cm(r,e),Sm(r,e)]),e.time.rg.total=qf(e.time.rg.t0),function(t){const e=Vf(t),n=t.time.rg.total,o=t.time.rg.totalFirstPlot,r=t.time.rg.totalLastPlotDiff,i=t.time.rg.paralogs,a=t.time.rg.interactions,s=t.time.rg.searchedGene,c=t._relatedGenesFirstPlotType,l=Object.assign({firstPlotType:c,timeTotal:n,timeTotalFirstPlot:o,timeTotalLastPlotDiff:r,timeSearchedGene:s,timeInteractingGenes:a,timeParalogs:i},e);t.relatedGenesAnalytics=l}(e),e.onPlotFoundGenesCallback&&e.onPlotFoundGenesCallback()}function Nm(t,e,n){if("type"in e&&e.type.includes("interacting gene")){const o=e.pathwayIds,r=function(t){return Object.entries(t.annotDescriptions.annots).find((([t,e])=>"searched gene"===e.type))[0]}(n),i=n.gpmlsByInteractingGene[t.name],a=function(t,e,n,o){let r=null;if(!navigator.onLine)return"Interacts with";const i=function(t,e,n,o){const r={};return n.map((n=>{const i=o[n],a=function(t,e,n){if(void 0===n||""===n)return[];const[o,r]=qp(n,e),[i,a]=qp(n,t),s={searchedGene:r,interactingGene:a},c=o.concat(i),l={searchedGeneGraphIds:o,matchingGraphIds:c},u=[],d=n.querySelectorAll("Interaction Graphics");return Array.from(d).forEach((t=>{const e=function(t,e){let n=null;const{searchedGeneGraphIds:o,matchingGraphIds:r}=e,i=[];let a=0,s=!1,c=null,l=null;return Array.from(t.children).forEach((t=>{if("Point"!==t.nodeName)return;const e=t,n=e.getAttribute("GraphRef");if(null!==n&&r.includes(n)&&(a+=1,i.push(n),o.includes(n)&&(s=!0),e.getAttribute("ArrowHead"))){const t=e.getAttribute("ArrowHead"),r=o.includes(n);null===l&&(l=r?0:1);try{c=Wp[t][r?0:1]}catch(t){}}})),a>=2&&s&&(null!==l&&null!==c||(c="interacts with"),c=c[0].toUpperCase()+c.slice(1),n={interactionId:t.parentNode.getAttribute("GraphId"),endIds:i,ixnType:c}),n}(t,l);null!==e&&(e.elements=s,u.push(e))})),u}(t,e,i);r[n]=a})),r}(t,e,n,o),a=i[n[0]];if(a.length>0){let t={ixnsByPwid:i,isSameByPwid:{},isSame:null,isDirectionSameByPwid:{},isDirectionSame:null,directionsByPwid:{}};t=function(t){let e=!0;const n=t.ixnsByPwid,o=jp(n);return Object.entries(n).map((([n,r])=>{const{isRefMatch:i,thisIsSame:a}=function(t,e){let n=!0,o=!0;if(0===t.length)return{isRefMatch:n,thisIsSame:o};const r=t[0].ixnType.toLowerCase();return t.forEach((t=>{const i=t.ixnType.toLowerCase();i!==e&&(n=!1),i!==r&&(o=!1)})),{isRefMatch:n,thisIsSame:o}}(r,o);a&&i||(e=!1),t.isSameByPwid[n]=a})),t.isSame=e,t}(t),t.isSame?r=a[0].ixnType:(t=function(t){let e=!0;const n=[],o=[];Object.values(Wp).forEach((t=>{o.push(t[0]),n.push(t[1])}));const r="Acts on",i="Acted on by",a=t.ixnsByPwid,s=jp(a),c=o.includes(s)?r:i;return Object.entries(a).map((([n,a])=>{let s=!0;if(a.length>0){const l=a[0].ixnType.toLowerCase(),u=o.includes(l)?r:i;a.forEach((a=>{const l=a.ixnType.toLowerCase(),d=o.includes(l)?r:i;t.directionsByPwid[n]=d,d!==c&&(e=!1),d!==u&&(s=!1)}))}t.isDirectionSameByPwid[n]=s})),t.isDirectionSame=e,!0===e&&(t.direction=c),t}(t),r=t.isDirectionSame?t.direction:"Interacts with")}return r}(t.name,r,o,i);if(null!==a){const t="Interacts with";e.description=e.description.replace(t,a)}}return e}const Fm="triangle";function Bm(t,e=null){let n=`<div style="font-size: 14px; font-weight: bold; font-color: #333;">${t}</div>`;return e&&(n=e),`\n    <div style="position: relative; left: 30px;">\n      ${n}\n      <i>Click gene to search</i>\n    </div>\n  `}const Im=[{name:Bm("Related genes"),nameHeight:50,rows:[{name:"Interacting gene",color:"purple",shape:Fm},{name:"Paralogous gene",color:"pink",shape:Fm},{name:"Searched gene",color:"red",shape:Fm}]}];Bm("Related genes");const $m=[{name:Bm("Highly cited genes"),nameHeight:30,rows:[]}];function Om(t){return t.legendPad=t.showAnnotLabels?70:30,t}const Rm={chrWidth:9,chrHeight:100,chrLabelSize:12,annotationHeight:7,showFullyBanded:!1,rotatable:!1,legend:Im,chrBorderColor:"#333",chrLabelColor:"#333",onBeforeDrawAnnots:function(){const t=this;!function(t){const e=[],n=t.chromosomesArray.map((t=>t.name));if("relatedAnnots"in t){t.relatedAnnots=Am(t.relatedAnnots,t);const e={};t.relatedAnnots=t.relatedAnnots.filter((t=>!(t.name in e)&&(e[t.name]=1,!0)))}const o={};t.annots.forEach((e=>{const n=e.annots.sort(((e,n)=>-t.annotSortFunction(e,n)));o[e.chr]=n}));const r={};Object.entries(o).forEach((([t,o])=>{r[t]={chr:t,annots:[]},o.forEach(((e,o)=>{const i=n.indexOf(t);e.domId=Bc(i,o),r[t].annots.push(e)})),e.push(r[t])})),t.annots=e}(t);const e=[],n=t.annots;for(let r=0;r<n.length;r++){const i=n[r].annots;for(let n=0;n<i.length;n++){var o;const a=i[n];if(e.push(a.name),t.config.colorMap&&null!==(o=a.differentialExpression)&&void 0!==o&&o.length){const e=t.config.colorMap,o=a.differentialExpression[0].group;a.color=e[o],t.annots[r].annots[n]=a}}}Mm(e,t)},onWillShowAnnotTooltip:function(t){var e,n;const o=this;if(t.name===(null===(e=o.prevClickedAnnot)||void 0===e?void 0:e.name)&&o.isTooltipCooling)return null;let r=o.annotDescriptions.annots[t.name];"related"===o.config.relatedGenesMode&&(r=Nm(t,r,o));const i=r.description.length>0?`<br/>${r.description}`:"",a=r.name,s="color: #0366d6; cursor: pointer;";let c=a;"rank"in t&&(c=`<span title="${"Ranked "+t.rank+" in general or scholarly interest"}">${a}</span>`);let l="";null!==(n=r)&&void 0!==n&&n.isSynonym&&(l=`<div style="font-style: italic">Synonym: ${r.synonym}</div>`);const u=t.name.includes("paralogNeighborhood"),d=function(t,e,n){let o="";const r=t.name;if(e.config.showGeneStructureInTooltip&&!n&&"geneStructureCache"in e!=0&&r in e.geneStructureCache!=0){e.addedSubpartListeners=!1,"spliceExons"in e==0&&(e.spliceExons=!0);const t=e.spliceExons,n=Gp(e.geneStructureCache[r][0],e,t)[0],i='class="_ideoGeneStructureContainer"',a=function(t){const e=t.spliceExons,n=e?"checked":"";return`<label class="_ideoSpliceToggle ${e?"":"pre-"}mRNA" style="position: relative; top: -10px; user-select: none; float: right; cursor: pointer; font-size: 16px; padding: 2px 4px; border: 1px solid #CCC; border-radius: 3px;" data-tippy-content="${Fp(e)}" data-tippy-placement="right"><input type="checkbox" ${n} style="display: none;" />&#x2702;</label>`}(e),s=`class="_ideoGeneStructureContainerName${t?"":" pre-mRNA"}"`,{name:c,title:l}=Bp(t);o="<br/><br/>"+hp+`<div ${i}>`+`<div><span ${s} title="${l}">${c}</span>${a}</div><span class="_ideoGeneStructureSvgContainer" >`+n+'</span><div class="_ideoGeneStructureFooter">'+pp+"</div></div>"}return o}(t,o,u),f=function(t,e){if(!e.tissueCache||!(t.name in e.tissueCache.byteRangesByName))return"<br/>";void 0===e.showTissuesMore&&(e.showTissuesMore=!0);const n=t.name,o=e.tissueExpressionsByGene[n];return o?am(n,o,e):void 0}(t,o);let h=`<span id="_ideoGeneSymbolAndFullName">\n      <span id="ideo-related-gene" style="${s}">${t.name}</span><br/>${c}<br/>\n    </span>`+l+i+f+d;return u&&([t,h]=function(t,e,n){const o=e.paralogs.sort(((t,e)=>t.rank-e.rank)),r="Paralog neighborhood<br/><br/>"+e.description+":<br/>"+`${o.map((t=>{let e="";return t.fullName&&(e=t.fullName),t.rank&&(e+=` &#013;Ranked ${t.rank} in general or scholarly interest`),""!==e&&(e=`title="${e}"`),`<span class="ideo-paralog-neighbor" ${e} style="${n}"'>${t.name}</span>`})).join("<br/>")}<br/>`;return t.displayCoordinates=e.displayCoordinates,[t,r]}(t,r,s)),t.displayName=h,t},onDidShowAnnotTooltip:function(){const t=this;t.tissueCache&&function(){const t=document.querySelector("#_ideogramTooltip"),e=t.getBoundingClientRect().top,n=document.querySelector("#_ideogram").getBoundingClientRect().top;e>n&&(t.style.top=n+"px")}(),function(t){const e=document.querySelector("._ideogramTooltip");t.addedTooltipClickHandler||(e.addEventListener("click",(e=>{if(["input","label"].includes(e.target.localName))return;let n=document.querySelector("#ideo-related-gene");n||(n=e.target);const o=function(t,e){var n;return e.annots.forEach((e=>{e.annots.forEach((e=>{t===e.name&&(n=e)}))})),null===n&&(n=e.annotDescriptions.annots[t]),n}(n.textContent,t);t.onClickAnnot(o)})),t.addedTooltipClickHandler=!0)}(t),Np(t),cm(t),t.tissueTippy=Wf("._ideoGeneTissues[data-tippy-content]",ia())},showTools:!0,showAnnotLabels:!0,chrFillColor:{centromere:"#DAAAAA"}};function Hm(){const t=this;if(!t||"annotDescriptions"in t)return;t.annotDescriptions={annots:{}},t.flattenAnnots().map((e=>{let n=[];"significance"in e&&"n/a"!==e.significance&&n.push(e.significance),"citations"in e&&void 0!==e.citations&&n.push(e.citations),n=n.join("<br/><br/>"),t.annotDescriptions.annots[e.name]={description:n,name:decodeURIComponent(e.fullName)}})),Pm(t),_m(t,-60);const e=t.config.container;if(document.querySelector(e).style.visibility="",t.config.showAnnotLabels){const e=t.flattenAnnots().sort(((e,n)=>t.annotSortFunction(e,n)));t.fillAnnotLabels(e)}}function Gm(t,e,n){if("all"!==n&&(n=n.map((t=>t.toLowerCase()))),e.annotsInList=n,t.legendPad=t.showAnnotLabels?80:30,"onWillShowAnnotTooltip"in e){const n="onWillShowAnnotTooltip",o=e[n],r=t[n],i=function(t){return t=r.bind(this)(t),o.bind(this)(t)};t[n]=i,delete e[n]}if("onDidShowAnnotTooltip"in e){const n="onDidShowAnnotTooltip",o=e[n],r=t[n],i=function(t){return t=r.bind(this)(t),o.bind(this)(t)};t[n]=i,delete e[n]}if("onBeforeDrawAnnots"in e){const n="onBeforeDrawAnnots",o=e[n],r=t[n],i=function(){r&&r.bind(this)(),o.bind(this)()};t[n]=i,delete e[n]}if("onDrawAnnots"in e){const n="onDrawAnnots",o=e[n],r=t[n],i=function(){r&&r.bind(this)(),o.bind(this)()};t[n]=i,delete e[n]}const o=Object.assign(t,e),r=new Ideogram(o);var i;return e.onFindGenes&&(r.onFindGenesCallback=e.onFindGenes),e.onPlotFoundGenes&&(r.onPlotFoundGenesCallback=e.onPlotFoundGenes),e.onHoverLegend&&(r.onHoverLegendCallback=e.onHoverLegend),r.getTooltipAnalytics=Uf,r.annotSortFunction=Lm,(i=r).time={rg:{t0:performance.now()}},"_didRelatedGenesFirstPlot"in i&&delete i._didRelatedGenesFirstPlot,r}class Wm{constructor(t){this.configure=ca,this.initDrawChromosomes=_s,this.onLoad=Cs,this.handleRotateOnClick=As,this.init=Ps,this.finishInit=ss,this.writeContainer=gs,this.onLoadAnnots=Ks,this.onDrawAnnots=Qs,this.processAnnotData=Oc,this.restoreDefaultTracks=Ec,this.updateDisplayedTracks=Pc,this.initAnnotSettings=Gc,this.fetchAnnots=qc,this.drawAnnots=bc,this.getHistogramBars=hc,this.drawHeatmaps=Vs,this.deserializeAnnotsForHeatmap=Xs,this.fillAnnots=zc,this.drawProcessedAnnots=wc,this.drawSynteny=Mc,this.startHideAnnotTooltipTimeout=Zs,this.showAnnotTooltip=oc,this.onWillShowAnnotTooltip=tc,this.onDidShowAnnotTooltip=ec,this.onClickAnnot=nc,this.setOriginalTrackIndexes=Dc,this.afterRawAnnots=Wc,this.downloadAnnotations=Hc,this.addAnnotLabel=lc,this.removeAnnotLabel=dc,this.fillAnnotLabels=uc,this.clearAnnotLabels=fc,this.flattenAnnots=jc,this.highlight=Vc,this.unhighlight=Yc,this.esearch=Qc,this.esummary=Jc,this.elink=Zc,this.getOrganismFromEutils=el,this.getTaxids=il,this.getAssemblyAndChromosomesFromEutils=sl,this.drawBandLabels=ml,this.getBandColorGradients=yl,this.processBandData=_l,this.setBandsToShow=fl,this.hideUnshownBandLabels=cl,this.drawBandLabelText=hl,this.drawBandLabelStalk=pl,this.onBrushMove=Al,this.onBrushEnd=Cl,this.createBrush=Sl,this.createClickCursor=Tl,this.onCursorMove=Ll,this.drawSexChromosomes=kl,this.setSexChromosomes=Ml,this.convertBpToPx=El,this.convertPxToBp=Dl,this.unpackAnnots=mu,this.packAnnots=gu,this.initCrossFilter=yu,this.filterAnnots=vu,this.assemblyIsAccession=Ni,this.getDataDir=Ii,this.round=$i,this.onDidRotate=Oi,this.getSvg=Ri,this.fetch=Hi,this.getTaxid=Gi,this.getCommonName=Wi,this.getScientificName=ji,this.getChromosomeModel=wu,this.getChromosomePixels=bu,this.drawChromosomeLabels=Ru,this.rotateChromosomeLabels=Hu,this.appendHomolog=Bu,this.drawChromosome=Iu,this.rotateAndToggleDisplay=$u,this.setOverflowScroll=Ou,this.plotRelatedGenes=Dm,this.getRelatedGenesByType=zf,this.configure(t)}static get version(){return a}static get d3(){return Di}static async fetchEnsembl(t,e=null,n="GET"){const o={method:n};if(null!==e&&(o.body=JSON.stringify(e)),"GET"===n){const e=t.includes("&")?"&":"?";t+=e+"content-type=application/json"}else o.headers={"Content-Type":"application/json"};const r=await fetch(`https://rest.ensembl.org${t}`,o);return await r.json()}static getChrSortNamesAndTypes(t,e){var n,o,r,i,a,s,c,l,u,d;return"string"==typeof t||"chr"in t&&"annots"in t?(a="MT"===(n="string"==typeof t?t:t.chr),s="MT"===(o="string"==typeof e?e:e.chr),c="AP"===n,l="AP"===o,u=!(r="CP"===n)&&!a&&!c,d=!(i="CP"===o)&&!s&&!l):(n=t.name,o=e.name,r="chloroplast"===t.type,i="chloroplast"===e.type,a="mitochondrion"===t.type,s="mitochondrion"===e.type,c="apicoplast"===t.type,l="apicoplast"===e.type,u="nuclear"===t.type,d="nuclear"===e.type),[n,o,{aIsNuclear:u,bIsNuclear:d,aIsCP:r,bIsCP:i,aIsMT:a,bIsMT:s,aIsAP:c,bIsAP:l}]}static sortChromosomes(t,e){let[n,o,r]=Wm.getChrSortNamesAndTypes(t,e);const{aIsNuclear:i,bIsNuclear:a,aIsCP:s,bIsCP:c,aIsMT:l,bIsMT:u,aIsAP:d,bIsAP:f}=r;return i&&a?(Ui(n)&&Ui(o)&&(n=Vi(n).toString(),o=Vi(o).toString()),n.localeCompare(o,"en",{numeric:!0})):!i&&a||l&&c?1:s&&u?-1:d||l||s||!(u||c||f)?void 0:-1}static initRelatedGenes(t,e="all"){return function(t,e){return"leads"===t.relatedGenesMode&&(delete t.onDrawAnnots,delete t.relatedGenesMode),Gm(Object.assign({showParalogNeighborhoods:!0,isLegendInteractive:!0,relatedGenesMode:"related",useCache:!0,awaitCache:!0},Rm),t,e)}(t,e)}static initGeneLeads(t,e="all"){return function(t,e){if(delete t.onPlotFoundGenes,t.legendName)if(t.legendContent)$m[0].name=Bm(t.legendName,t.legendContent);else if(t.geneLeadsDE){const e=`<span style="font-size: 14px; font-weight: bold; left: 0">Gene leads</span> from<br/><div style="margin-top: 10px; padding: 3px 6px; font-size: 14px; font-weight: bold; color: #3D629A;">${fileIcon} <span style="margin-left: 20px; position: relative; top: -1px;">Publication</span></div><div style="margin-top: 3px; margin-bottom: -10px; font-size: 14px; padding: 3px 6px;">${deltaIcon} <span style="margin-left: 20px;">Differential expression</span></div><br/>`;$m[0].name=Bm(t.legendName,e)}else $m[0].name=Bm(t.legendName);let n,o;return t.legend=$m,t.geneLeadsDE?(o="leads",n="annotations/gene_leads.tsv"):(o="hints",n="cache/homo-sapiens-top-genes.tsv"),Gm(Object.assign({relatedGenesMode:o,chrMargin:-4,annotationsPath:Fi(n),onDrawAnnots:Hm,useCache:!0},Rm),t,e)}(t,e)}}window.Ideogram=Wm;const jm=Wm})(),o})()));
//# sourceMappingURL=ideogram.min.js.map