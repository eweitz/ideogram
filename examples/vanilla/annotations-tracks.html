
<!DOCTYPE html>
<html>
<head>
  <title>Annotations, tracks | Ideogram</title>
  <style>body {font: 12px Arial; line-height: 19.6px;}</style>
  <script type="text/javascript" src="../../dist/js/ideogram.min.js"></script>
</head>
<body>
<h1>Annotations, tracks | Ideogram</h1>
<a href="../">Back to overview</a> |
<a href="annotations-overlaid">Previous</a> |
<a href="annotations-external-data">Next</a>
<p>
  1000 <a href="https://github.com/eweitz/ideogram/blob/ca64a3c51e1b5ecaae89d2422ffc408565743644/scripts/create_annots.py#L68">
  randomly generated</a> SNVs across the human genome, artificially categorized
  as "pathogenic" (red), "uncertain significance" (grey) or "benign" (green).
  See also <a href="annotations-track-filters">Annotations, track filters</a>.
  <br/>
  <br/>
  Annotation shape:
  <select id="shape-menu">
    <option>Triangle</option>
    <option>Circle</option>
    <option>Rectangle</option>
    <option>Narrow rectangle</option>
  </select>
</p>
<script type="text/javascript">

  var d3 = Ideogram.d3;

  var annotHeight = 3.5;

  d3.selectAll('select').on('change', function() {

    var shape = this.options[this.selectedIndex].text.toLowerCase();

    if (shape === 'narrow rectangle') {
      shape =
        'm0,0 l 0 ' + (2 * annotHeight) +
        'l ' + annotHeight/2 + ' 0' +
        'l 0 -' + (2 * annotHeight) + 'z';
    }

    drawIdeogram(shape);

  });


    function callback() {
      var band, bandMiddle,
        chrLabel, chrLabelMiddle;

      band = d3.selectAll('.chromosome .band').nodes()[0].getBoundingClientRect();
      chrLabel = d3.selectAll('.chrLabel').nodes()[0].getBoundingClientRect();

      bandMiddle = band.left + band.width / 2;
      chrLabelMiddle = chrLabel.left + chrLabel.width / 2;

      labelsDiff = Math.abs(bandMiddle - chrLabelMiddle);
console.log(labelsDiff)
    }

  function drawIdeogram(shape) {

    var annotationTracks = [
      {id: 'pathogenicTrack', displayName: 'Pathogenic', color: '#F00'},
      {id: 'likelyPathogenicTrack', displayName: 'Likely pathogenic', color: '#DB9'},
      {id: 'uncertainSignificanceTrack', displayName: 'Uncertain significance', color: '#CCC'},
      {id: 'likelyBenignTrack', displayName: 'Likely benign', color: '#BD9'},
      {id: 'benignTrack', displayName: 'Benign', color: '#8D4'}
    ];

    var config = {
      organism: 'human',
      chrWidth: 20,
      chrHeight: 500,
      annotationsPath: '/dist/data/annotations/1000_virtual_snvs.json',
      annotationTracks: annotationTracks,
      annotationHeight: 2.5,
      dataDir: '/dist/data/bands/native/'
    };
    config.onDrawAnnots = callback;

    if (typeof ideogram !== 'undefined') {
      d3.select(ideogram.config.container + '> div').remove();
    }

    ideogram = new Ideogram(config);
  }

  drawIdeogram('triangle');

</script>
</body>
</html>
